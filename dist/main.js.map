{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.config.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/core/categories/categories.module.ts","webpack:///./src/app/core/categories/models/categories.model.ts","webpack:///./src/app/core/categories/services/category-handler.service.ts","webpack:///./src/app/core/categories/services/category-selecter.service.ts","webpack:///./src/app/core/categories/services/category-selector.abstract.ts","webpack:///./src/app/core/categories/services/category.service.ts","webpack:///./src/app/core/categories/services/filtered-orthogonal-nested-categories.service.ts","webpack:///./src/app/core/categories/services/nested-category.abstract.ts","webpack:///./src/app/core/core-interface/core-interface.module.ts","webpack:///./src/app/core/file-handler/file-handler.module.ts","webpack:///./src/app/core/file-handler/services/file-upload.service.ts","webpack:///./src/app/core/fk-forms/components/fk-dialog/fk-dialog.component.html","webpack:///./src/app/core/fk-forms/components/fk-dialog/fk-dialog.component.ts","webpack:///./src/app/core/fk-forms/components/fk-growl/fk-growl.component.html","webpack:///./src/app/core/fk-forms/components/fk-growl/fk-growl.component.ts","webpack:///./src/app/core/fk-forms/components/form-messages/form-messages.component.html","webpack:///./src/app/core/fk-forms/components/form-messages/form-messages.component.ts","webpack:///./src/app/core/fk-forms/components/form-save/form-save.component.html","webpack:///./src/app/core/fk-forms/components/form-save/form-save.component.ts","webpack:///./src/app/core/fk-forms/fk-forms.module.ts","webpack:///./src/app/core/fk-forms/services/form-data.service.ts","webpack:///./src/app/core/fk-forms/services/message.service.ts","webpack:///./src/app/core/storage/services/cookie-storage.service.ts","webpack:///./src/app/core/storage/services/local-storage.service.ts","webpack:///./src/app/core/storage/storage.module.ts","webpack:///./src/app/core/tags/models/tag.model.ts","webpack:///./src/app/core/tags/services/tag.service.ts","webpack:///./src/app/core/tags/tags.module.ts","webpack:///./src/app/core/wishlist/models/wishlist.model.ts","webpack:///./src/app/core/wishlist/services/wishlist.service.ts","webpack:///./src/app/core/wishlist/wishlist.module.ts","webpack:///./src/app/global/contracts/modules/category.contract.ts","webpack:///./src/app/global/contracts/modules/image.contract.ts","webpack:///./src/app/global/contracts/modules/products.contract.ts","webpack:///./src/app/global/contracts/modules/shop.contract.ts","webpack:///./src/app/global/contracts/modules/tag.contract.ts","webpack:///./src/app/global/contracts/services/authentication.provider.ts","webpack:///./src/app/global/contracts/services/restful-service.abstract.ts","webpack:///./src/app/global/contracts/services/storage.provider.ts","webpack:///./src/app/global/fk-browser/browser.config.ts","webpack:///./src/app/global/fk-browser/components/browser-events/browser-events.component.html","webpack:///./src/app/global/fk-browser/components/browser-events/browser-events.component.ts","webpack:///./src/app/global/fk-browser/fk-browser.module.ts","webpack:///./src/app/global/fk-browser/models/browser.model.ts","webpack:///./src/app/global/fk-browser/services/browser-handler.service.ts","webpack:///./src/app/modules/admin/pages/admin-dashboard/admin-dashboard.component.html","webpack:///./src/app/modules/admin/pages/admin-dashboard/admin-dashboard.component.ts","webpack:///./src/app/modules/admin/pages/all-products/all-products.component.html","webpack:///./src/app/modules/admin/pages/all-products/all-products.component.ts","webpack:///./src/app/modules/admin/pages/approve-products/approve-products.component.html","webpack:///./src/app/modules/admin/pages/approve-products/approve-products.component.ts","webpack:///./src/app/modules/admin/pages/categories/categories.component.html","webpack:///./src/app/modules/admin/pages/categories/categories.component.ts","webpack:///./src/app/modules/admin/pages/collections/collections.component.html","webpack:///./src/app/modules/admin/pages/collections/collections.component.ts","webpack:///./src/app/modules/admin/pages/featured-products/featured-products.component.html","webpack:///./src/app/modules/admin/pages/featured-products/featured-products.component.ts","webpack:///./src/app/modules/admin/pages/homepage-banner/homepage-banner.component.html","webpack:///./src/app/modules/admin/pages/homepage-banner/homepage-banner.component.ts","webpack:///./src/app/modules/admin/pages/new-arrivals/new-arrivals.component.html","webpack:///./src/app/modules/admin/pages/new-arrivals/new-arrivals.component.ts","webpack:///./src/app/modules/admin/pages/users/users.component.html","webpack:///./src/app/modules/admin/pages/users/users.component.ts","webpack:///./src/app/modules/navigation/common/dashboard-roles.enum.ts","webpack:///./src/app/modules/navigation/components/dashboard-menu/dashboard-menu.component.html","webpack:///./src/app/modules/navigation/components/dashboard-menu/dashboard-menu.component.ts","webpack:///./src/app/modules/navigation/components/nested-route-loader/nested-route-loader.component.html","webpack:///./src/app/modules/navigation/components/nested-route-loader/nested-route-loader.component.ts","webpack:///./src/app/modules/products/models/product-attribute.model.ts","webpack:///./src/app/modules/products/models/product-detail.model.ts","webpack:///./src/app/modules/products/models/product.model.ts","webpack:///./src/app/modules/products/models/specification.model.ts","webpack:///./src/app/modules/products/services/product.service.ts","webpack:///./src/app/modules/security/components/account-form/account-form.component.html","webpack:///./src/app/modules/security/components/account-form/account-form.component.ts","webpack:///./src/app/modules/security/components/confirm-email/confirm-email.component.html","webpack:///./src/app/modules/security/components/confirm-email/confirm-email.component.ts","webpack:///./src/app/modules/security/components/forgot-password/forgot-password.component.html","webpack:///./src/app/modules/security/components/forgot-password/forgot-password.component.ts","webpack:///./src/app/modules/security/components/login/login.component.html","webpack:///./src/app/modules/security/components/login/login.component.ts","webpack:///./src/app/modules/security/components/logout/logout.component.html","webpack:///./src/app/modules/security/components/logout/logout.component.ts","webpack:///./src/app/modules/security/components/reset-password/reset-password.component.html","webpack:///./src/app/modules/security/components/reset-password/reset-password.component.ts","webpack:///./src/app/modules/security/components/shop-info/shop-info.component.html","webpack:///./src/app/modules/security/components/shop-info/shop-info.component.ts","webpack:///./src/app/modules/security/components/update-email-form/update-email-form.component.html","webpack:///./src/app/modules/security/components/update-email-form/update-email-form.component.ts","webpack:///./src/app/modules/security/guards/auth-guard-service.service.ts","webpack:///./src/app/modules/security/guards/role-guard.service.ts","webpack:///./src/app/modules/security/models/auth-role.model.ts","webpack:///./src/app/modules/security/models/auth-user.model.ts","webpack:///./src/app/modules/security/models/countries.model.ts","webpack:///./src/app/modules/security/models/user-profile.model.ts","webpack:///./src/app/modules/security/security.module.ts","webpack:///./src/app/modules/security/services/jwt-auth.service.ts","webpack:///./src/app/modules/security/services/secure-storage.factory.ts","webpack:///./src/app/modules/security/services/secure-storage.service.ts","webpack:///./src/app/modules/security/services/secured-storage.provider.ts","webpack:///./src/app/modules/security/services/user.service.ts","webpack:///./src/app/modules/shop/components/seller-dashboard/seller-dashboard.component.html","webpack:///./src/app/modules/shop/components/seller-dashboard/seller-dashboard.component.ts","webpack:///./src/app/modules/shop/models/banking-model.model.ts","webpack:///./src/app/modules/shop/models/shop.model.ts","webpack:///./src/app/modules/shop/services/shop.service.ts","webpack:///./src/app/public.routes.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["var map = {\n\t\"app/modules/products/products.module.ngfactory\": [\n\t\t\"./src/app/modules/products/products.module.ngfactory.js\",\n\t\t\"app-modules-products-products-module-ngfactory~app-modules-shop-shop-module-ngfactory\",\n\t\t\"app-modules-products-products-module-ngfactory\"\n\t],\n\t\"app/modules/shop/shop.module.ngfactory\": [\n\t\t\"./src/app/modules/shop/shop.module.ngfactory.js\",\n\t\t\"app-modules-products-products-module-ngfactory~app-modules-shop-shop-module-ngfactory\",\n\t\t\"app-modules-shop-shop-module-ngfactory\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error('Cannot find module \"' + req + '\".');\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\tvar module = __webpack_require__(ids[0]);\n\t\treturn module;\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";\nmodule.exports = webpackAsyncContext;","<div class=\"page-wrapper\">\r\n  <router-outlet ></router-outlet>  \r\n</div>\r\n<app-browser-events></app-browser-events>","import { Component, Renderer2, OnInit, AfterViewInit } from '@angular/core';\r\nimport { Router, NavigationEnd, NavigationStart, } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent implements OnInit {\r\n  title = 'Finders Keepers Online Marketplace';\r\n\r\n  constructor( ) {}\r\n\r\n  // All DOM events will be triggered by the App Component - including rputer events\r\n  ngOnInit() {}\r\n\r\n\r\n}\r\n","// Core Imports\r\nimport { InjectionToken } from '@angular/core';\r\n\r\n// local imports\r\nimport { environment } from '../environments/environment';\r\nimport { AppConfig } from './global/contracts/config/app-config';\r\n\r\n\r\nexport const APP_CONFIG = new InjectionToken<AppConfig>('app.config');\r\n\r\n\r\n// Arguably we could leave Enviornment variables and config separately\r\nexport const FKConfig: AppConfig = environment;\r\n","// Angular\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n// 3rd party\r\nimport { CookieService } from 'ngx-cookie-service';\r\n\r\n// Global Modules\r\nimport { FKBrowserModule } from './global/fk-browser/fk-browser.module';\r\n\r\n// Contracts\r\nimport { AuthenticationProvider } from './global/contracts/services/authentication.provider';\r\nimport { CategoryHandler, CategoryProvider } from './global/contracts/modules/category.contract';\r\nimport { StorageProvider } from './global/contracts/services/storage.provider';\r\nimport { APP_CONFIG, FKConfig } from './app.config';\r\nimport { ProductsProvider, PRODUCTS_PROVIDER } from './global/contracts/modules/products.contract';\r\n\r\n// Site Modules\r\n// import { BackEndModule } from './sites/back-end/back-end.module';\r\n\r\n// Contract Providers Modules\r\nimport { CategoryHandlerService } from './core/categories/services/category-handler.service';\r\nimport { CategoryService } from './core/categories/services/category.service';\r\nimport { ProductService } from './modules/products/services/product.service';\r\nimport { LocalStorageService } from './core/storage/services/local-storage.service';\r\n\r\n// SECURITY\r\nimport { JwtModule, JWT_OPTIONS } from '@auth0/angular-jwt';\r\nimport { JWTAuthService } from './modules/security/services/jwt-auth.service';\r\nimport { SecuredStorageProvider } from './modules/security/services/secured-storage.provider';\r\nimport { secureStorageServiceFactory } from './modules/security/services/secure-storage.factory';\r\n\r\n\r\n// Mocking\r\nimport { AdminModule } from './modules/admin/admin.module';\r\n// import { HttpClientInMemoryWebApiModule } from 'angular-in-memory-web-api';\r\n// import { InMemDataService } from './global/mocks/storage/in-mem-data.service';\r\n\r\n// Main Component\r\nimport { AppComponent } from './app.component';\r\n// import { SellersModule } from './sites/sellers/sellers.module';\r\nimport { ServiceWorkerModule } from '@angular/service-worker';\r\nimport { environment } from '../environments/environment';\r\nimport { PublicRoutingModule } from './public.routes';\r\nimport { SecurityModule } from './modules/security/security.module';\r\nimport { SHOP_PROVIDER } from './global/contracts/modules/shop.contract';\r\nimport { ShopService } from './modules/shop/services/shop.service';\r\n\r\n\r\n// JWT factory function\r\nexport function jwtOptionsFactory(secureStorage: SecuredStorageProvider) {\r\n  return {\r\n    tokenGetter: () => {\r\n      return secureStorage.getAuthToken();\r\n    },\r\n    // Fix to use environments\r\n    whitelistedDomains: ['dev-api.thefinderskeepersmarketplace.com', 'http://localhost:4444',\r\n    'http://fk-om-frontend-dev.s3-website-ap-southeast-2.amazonaws.com',\r\n    'http://fk-om-frontend-release.s3-website-ap-southeast-2.amazonaws.com']\r\n  };\r\n}\r\n/**\r\n * Fulfillment of contracts should be inserted here\r\n *\r\n * @export\r\n * @class AppModule\r\n */\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    HttpClientModule,\r\n    FormsModule,\r\n    BrowserAnimationsModule,\r\n    FKBrowserModule,\r\n    PublicRoutingModule,\r\n    JwtModule.forRoot({\r\n      jwtOptionsProvider: {\r\n        provide: JWT_OPTIONS,\r\n        useFactory: jwtOptionsFactory,\r\n        deps: [SecuredStorageProvider]\r\n      },\r\n      config: {\r\n        whitelistedDomains: ['dev-api.thefinderskeepersmarketplace.com', 'http://localhost:4444',\r\n        'http://fk-om-frontend-release.s3-website-ap-southeast-2.amazonaws.com']\r\n      }\r\n    }),\r\n    ServiceWorkerModule.register('/ngsw-worker.js', { enabled: environment.production }),\r\n    SecurityModule\r\n  ],\r\n  providers: [\r\n    { provide: APP_CONFIG, useValue: FKConfig },\r\n    { provide: AuthenticationProvider, useClass: JWTAuthService },\r\n    { provide: PRODUCTS_PROVIDER, useClass: ProductService},\r\n    { provide: SHOP_PROVIDER, useClass: ShopService },\r\n    { provide: CategoryHandler, useClass: CategoryHandlerService},\r\n    { provide: CategoryProvider, useClass: CategoryService},\r\n    { provide: StorageProvider, useClass: LocalStorageService},\r\n    CookieService,\r\n    { provide: SecuredStorageProvider, useFactory: secureStorageServiceFactory, deps: [CookieService, APP_CONFIG] }\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n// For Navigation directives\r\nimport { RouterModule } from '@angular/router';\r\n\r\n// services\r\nimport { CategoryHandlerService } from './services/category-handler.service';\r\nimport { CategorySelecterService } from './services/category-selecter.service';\r\nimport { FilteredOrthogonalNestedCategoriesService } from './services/filtered-orthogonal-nested-categories.service';\r\nimport { CategoryService } from './services/category.service';\r\n// components\r\nimport { CategorySelectBoxComponent } from './components/category-select-box/category-select-box.component';\r\nimport { CategoryFormComponent } from './components/category-form/category-form.component';\r\nimport { CategoryListComponent } from './components/category-list/category-list.component';\r\nimport { TagsModule } from '../tags/tags.module';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { CategoryChipsComponent } from './components/category-chips/category-chips.component';\r\n\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule,\r\n    FormsModule,\r\n    TagsModule\r\n  ],\r\n  declarations: [CategoryFormComponent, CategorySelectBoxComponent, CategoryListComponent, CategoryChipsComponent\r\n  ],\r\n  providers: [\r\n    CategoryHandlerService,\r\n    CategorySelecterService,\r\n    FilteredOrthogonalNestedCategoriesService,\r\n    CategoryService\r\n  ],\r\n  exports: [CategoryFormComponent, CategorySelectBoxComponent, CategoryListComponent, CategoryChipsComponent]\r\n})\r\nexport class CategoriesModule { }\r\n","// 3rd party decorator\r\nimport { JsonObject, JsonProperty, JsonConverter, JsonCustomConvert } from 'json2typescript';\r\nimport { CategoryContract } from '../../../global/contracts/modules/category.contract';\r\nexport class CategoryAlias implements CategoryContract {\r\n\r\n    // Optional in alias model\r\n    subCategories: CategoryContract[] = [];\r\n\r\n    @JsonProperty('id')\r\n    public id: number;\r\n\r\n    @JsonProperty('name', String)\r\n    public name: string;\r\n\r\n    @JsonProperty('parentCategoryId')\r\n    public parentCategoryId: number;\r\n\r\n    @JsonProperty('depth')\r\n    public depth?: number;\r\n\r\n    constructor(id: number, name: string, parentCategoryId: number, depth?: number) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.parentCategoryId = parentCategoryId;\r\n        this.depth = depth;\r\n    }\r\n}\r\nexport interface CategoryInterface {\r\n    getId(): number;\r\n    getParentCategoryId(): number;\r\n    getName(): string;\r\n    getDescription(): string;\r\n    getSlug(): string;\r\n    getImageUrl(): string;\r\n    getSubCategories(): CategoryContract[];\r\n\r\n    setId(id: number): void;\r\n    setParentCategoryId(id: number): void;\r\n    setName(name: string): void;\r\n    setDescription(description: string): void;\r\n    setSlug(slug: string): void;\r\n    setImageUrl(imageUrl: string): void;\r\n    setSubCategories(children: CategoryContract[]): void;\r\n}\r\n\r\n\r\nexport class Category extends CategoryAlias {\r\n\r\n    public id: number;\r\n    public parentCategoryId: number;\r\n    public name: string;\r\n    public description: string;\r\n    public slug: string;\r\n    public imageUrl: string;\r\n    public subCategories: Category[];\r\n    constructor(id: number,\r\n        parentCategoryId: number,\r\n        name: string,\r\n        description: string,\r\n        slug: string,\r\n        imageUrl: string,\r\n        subCategories: Category[]) {\r\n            super(id, name, parentCategoryId);\r\n            this.id                 = id;\r\n            this.parentCategoryId   = parentCategoryId;\r\n            this.name               = name;\r\n            this.description        = description;\r\n            this.slug               = slug;\r\n            this.imageUrl           = imageUrl;\r\n            this.subCategories      = subCategories;\r\n    }\r\n    // getId(): number {\r\n    //     return this.id;\r\n    // }\r\n    // getParentCategoryId(): number {\r\n    //     return this.parentCategoryId;\r\n    // }\r\n    // getName(): string {\r\n    //     return this.name;\r\n    // }\r\n    // getDescription(): string {\r\n    //     return this.description;\r\n    // }\r\n    // getSlug(): string {\r\n    //     return this.slug;\r\n    // }\r\n    // getImageUrl(): string {\r\n    //     return this.imageUrl;\r\n    // }\r\n    // getSubCategories(): CategoryContract[] {\r\n    //     return this.subCategories;\r\n    // }\r\n    // setId(id: number): void {\r\n    //     this.id = id;\r\n    // }\r\n    // setParentCategoryId(id: number): void {\r\n    //     this.parentCategoryId = id;\r\n    // }\r\n    // setName(name: string): void {\r\n    //     this.name = name;\r\n    // }\r\n    // setDescription(description: string): void {\r\n    //     this.description = description;\r\n    // }\r\n    // setSlug(slug: string): void {\r\n    //     this.slug = slug;\r\n    // }\r\n    // setImageUrl(imageUrl: string): void {\r\n    //     this.imageUrl = imageUrl;\r\n    // }\r\n    // setSubCategories(children: CategoryContract[]): void {\r\n    //     this.subCategories = children;\r\n    // }\r\n}\r\n\r\n\r\n/**\r\n * Not to be used as a service\r\n *\r\n * @export\r\n * @class SelectableCategory\r\n */\r\nexport class SelectableCategory {\r\n    public category: Category;\r\n    public selected: boolean;\r\n}\r\n@JsonObject\r\nexport class CategoryServiceModel {\r\n    @JsonProperty('categoryID')\r\n    categoryID: number;\r\n\r\n    @JsonProperty('description')\r\n    description?: string;\r\n\r\n    @JsonProperty('imageURL')\r\n    imageURL?: string;\r\n\r\n    @JsonProperty('isActive')\r\n    isActive: boolean;\r\n\r\n    @JsonProperty('isPublic')\r\n    isPublic: boolean;\r\n\r\n    @JsonProperty('level')\r\n    level: number;\r\n\r\n    @JsonProperty('name')\r\n    name: string;\r\n\r\n    @JsonProperty('parentCat')\r\n    parentCat?: number;\r\n\r\n    @JsonProperty('slug')\r\n    slug: string;\r\n\r\n    @JsonProperty('sort')\r\n    sort: number;\r\n}\r\nexport class CategoryServiceData {\r\n    data: CategoryServiceModel[];\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CategoryService } from './category.service';\r\nimport { FilteredOrthogonalNestedCategoriesService } from './filtered-orthogonal-nested-categories.service';\r\nimport { CategorySelecterService } from './category-selecter.service';\r\nimport { Category, CategoryAlias } from '../models/categories.model';\r\nimport { CategoryContract, CategoryHandler } from '../../../global/contracts/modules/category.contract';\r\nimport { Subject, BehaviorSubject } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class CategoryHandlerService extends CategoryHandler  {\r\n\r\n  private _categoryState: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\r\n  /**\r\n     * Filters dictionary\r\n     *\r\n     * @private\r\n     * @type {{ [id: number]: { selected: number[] }}}\r\n     * @memberof CategorySelecterComponent\r\n     */\r\n  private filters: { [id: number]: { selected: number[] } } = {};\r\n\r\n  /**\r\n   * maybe time to use _depth for private\r\n   *\r\n   * @private\r\n   * @memberof CategorySelecterComponent\r\n   */\r\n  private _depth = 0;\r\n\r\n  /**\r\n   * Creates an instance of CategorySelecterComponent.\r\n   * @param {CategoryService} service\r\n   * @param {FilteredOrthogonalNestedCategoriesService} nestedHandler\r\n   * @param {CategorySelecterService} categoryHandler\r\n   * @memberof CategorySelecterComponent\r\n   */\r\n  constructor(private service: CategoryService, private nestedHandler: FilteredOrthogonalNestedCategoriesService,\r\n    private categorySelecterService: CategorySelecterService) {\r\n    super();\r\n    this.filters[0] = {\r\n      selected: []\r\n    };\r\n    this.getHttpCategories();\r\n  }\r\n  public initList(selecedCategories: CategoryContract[] ) {\r\n    this.categorySelecterService.initSelectedCategories(selecedCategories as CategoryAlias[]);\r\n  }\r\n  public hasItem(itemId: number): boolean {\r\n    return this.categorySelecterService.hasSelectedCategory( itemId );\r\n  }\r\n\r\n  public getItem(itemId: number): CategoryContract {\r\n    return this.categorySelecterService.getSelectedCategory(itemId);\r\n  }\r\n\r\n  public deleteFromList(itemId: number): boolean {\r\n    return this.categorySelecterService.removeSelectedCategory(itemId);\r\n  }\r\n  public resetCategories(): void {\r\n    this._categoryState.next(false);\r\n    this.filters[0] = {\r\n      selected: []\r\n    };\r\n    this.getHttpCategories();\r\n  }\r\n\r\n  public getCategoryState(): BehaviorSubject<boolean> {\r\n    return this._categoryState;\r\n  }\r\n  /**\r\n   * Initialise catagories\r\n   *\r\n   * @memberof CategorySelecterComponent\r\n   */\r\n  getHttpCategories() {\r\n    this.service.getCategories().subscribe(\r\n      data => {\r\n        // console.log(data);\r\n        this.nestedHandler.init(data);\r\n        // console.log(this.nestedHandler.getFullModel());\r\n        this._categoryState.next(true);\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Gets Parent Id for child list\r\n   *\r\n   * @param {number} index\r\n   * @returns {number}\r\n   * @memberof CategorySelecterComponent\r\n   */\r\n  public getParentId(index: number): number {\r\n    return this.filters[index].selected[0];\r\n  }\r\n\r\n  /**\r\n   * Get the list of filtered catagories for current depth\r\n   * Does not use the hidden option and permits inital filtering\r\n   * @param {number} depth\r\n   * @returns {Category[]}\r\n   * @memberof CategorySelecterComponent\r\n   */\r\n  public getCategories(depth: number): Category[] {\r\n    return this.nestedHandler.filterAtDepth(this.filters[depth].selected, depth);\r\n  }\r\n\r\n  /**\r\n   * Return result is sort of irrelevant\r\n   * And Filters should probably be moved back to service\r\n   * Although a pipe could do this as well\r\n   *\r\n   * @param {{ depth: number, category: Category }} toggleData\r\n   * @memberof CategorySelecterComponent\r\n   */\r\n  public onToggled(toggleData: { depth: number, category: Category }): void {\r\n    if (this.filters[toggleData.depth + 1] === undefined) {\r\n      this.filters[toggleData.depth + 1] = {\r\n        selected: []\r\n      };\r\n    }\r\n    this._depth = toggleData.depth + 1;\r\n    this.filters[toggleData.depth + 1].selected = [toggleData.category.id];\r\n    for (const key in this.filters) {\r\n      if (+key > this._depth) {\r\n        this.filters[key].selected = [];\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * This gets toggled levels\r\n   *\r\n   * @returns {number}\r\n   * @memberof CategorySelecterComponent\r\n   */\r\n  public getLevels(depth?: number): number[] {\r\n    if (depth !== undefined) {\r\n      return Array(depth).fill(1).map((x, i) => i);\r\n    }\r\n    const numbers = Array(this.nestedHandler.getModelSize()).fill(1).map((x, i) => i);\r\n    return numbers;\r\n  }\r\n\r\n  /**\r\n   * Check if the selected level exists in the model\r\n   * yet.\r\n   * @param {number} index\r\n   * @returns {boolean}\r\n   * @memberof CategorySelecterComponent\r\n   */\r\n  public hasLevel(index: number): boolean {\r\n    return ((this.filters[index] !== undefined) && (this._depth >= index));\r\n  }\r\n\r\n  /**\r\n   * Adds a category to the selected items\r\n   * Emit this instead\r\n   * @param {{ depth: number, category: Category}} eventData\r\n   * @memberof CategorySelecterComponent\r\n   */\r\n  public addCategory(eventData: { depth: number, category: Category }) {\r\n    const parents = this.nestedHandler.recursiveFindParents(eventData.category.id);\r\n    parents.forEach(cat =>\r\n      this.categorySelecterService.addSelectedCategory(new CategoryAlias(cat.id, cat.name, cat.parentCategoryId, eventData.depth)));\r\n  }\r\n  /**\r\n     * Remove catagory and any child catagories linked\r\n     *\r\n     * @param {CategoryAlias} removedAlias\r\n     * @param {number} [depth]\r\n     * @memberof CategorySelecterComponent\r\n     */\r\n  public removeCategory(removedAlias: CategoryAlias, depth?: number): void {\r\n    const tagDeleted = this.nestedHandler.findCategoryAtDepth(removedAlias.id);\r\n    // what is this ID?\r\n    if (tagDeleted) {\r\n      const children = this.nestedHandler.recursiveFindChildren([tagDeleted]);\r\n      // console.log('children', children);\r\n      this.categorySelecterService.removeSelectedCategory(removedAlias.id);\r\n      children.forEach(cat => this.categorySelecterService.removeSelectedCategory(cat.id));\r\n    }\r\n  }\r\n  /**\r\n   * Gets all added categories to a list\r\n   *\r\n   * @returns {CategoryAlias[]}\r\n   * @memberof CategorySelecterComponent\r\n   */\r\n  public getAllFromList(): CategoryAlias[] {\r\n    return this.categorySelecterService.getSelectedCatageories();\r\n  }\r\n  public addToList(newCtagory: CategoryContract): void {\r\n    this.categorySelecterService.addSelectedCategory(newCtagory as CategoryAlias);\r\n  }\r\n  public applyFilters(filteredIds: number[], boxIndex: number) {\r\n    // console.log('call me' + filteredIds);\r\n    this.nestedHandler.applyFilters(filteredIds, boxIndex);\r\n  }\r\n}\r\n\r\n// A little stuck here - or just out of energy\r\n","import { Injectable } from '@angular/core';\r\nimport { CategoryAlias, Category } from '../models/categories.model';\r\nimport { AbstractCategorySelector } from './category-selector.abstract';\r\n/**\r\n * This may need a dictionary to allow\r\n * multiple category selecters on the same DOM !Important\r\n * @export\r\n * @class CategorySelecterService\r\n */\r\n@Injectable()\r\nexport class CategorySelecterService extends AbstractCategorySelector {\r\n\r\n  private selectedCategories: CategoryAlias[] = [];\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n   /**\r\n    * Mainly enforcing type safety. If you can access\r\n    * this and write to it - state won't be broken\r\n    * as init allows for write but you could accidently\r\n    * empty it.\r\n    * @returns\r\n    * @memberof CategorySelecterService\r\n    */\r\n   public getSelectedCatageories() {\r\n     return this.selectedCategories;\r\n   }\r\n\r\n  /**\r\n   * Set the selected Catagories from a list\r\n   *\r\n   * @param {CategoryAlias[]} selectedCategories\r\n   * @memberof CategorySelecterService\r\n   */\r\n  public initSelectedCategories(selectedCategories: CategoryAlias[]): void {\r\n    this.selectedCategories = selectedCategories;\r\n  }\r\n\r\n\r\n  /**\r\n   * Select catagory and all parent categories\r\n   * And add them to selected list\r\n   * @private\r\n   * @param {number} categoryId\r\n   * @memberof CategorySelecterService\r\n   */\r\n  public addSelectedCategory(alias: CategoryAlias): boolean {\r\n    if (!this.hasSelectedCategory(alias.id)) {\r\n      this.selectedCategories.push(alias);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Shallow remove. Will not remove parent categories for child.\r\n   * Could check for orphans - but it starts to seem unintuitve.\r\n   * @param {number} categoryId\r\n   * @memberof CategorySelecterService\r\n   */\r\n  public removeSelectedCategory(categoryId: number): boolean {\r\n    if (this.hasSelectedCategory(categoryId)) {\r\n      const index = this.selectedCategories.findIndex(x => x.id === categoryId);\r\n      this.selectedCategories.splice(index, 1);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Get a category from a selected list\r\n   *\r\n   * @param {number} categoryId\r\n   * @returns {CategoryAlias}\r\n   * @memberof CategorySelecterService\r\n   */\r\n  public getSelectedCategory(categoryId: number): CategoryAlias {\r\n    return this.selectedCategories.find(x => x.id === categoryId);\r\n  }\r\n\r\n  /**\r\n   * Check if the category has already been selected\r\n   *\r\n   * @param {number} categoryId\r\n   * @returns {boolean}\r\n   * @memberof CategorySelecterService\r\n   */\r\n  public hasSelectedCategory(categoryId: number): boolean {\r\n    return (this.selectedCategories.findIndex(x => x.id === categoryId) !== -1);\r\n  }\r\n\r\n}\r\n","import { CategoryAlias, Category } from '../models/categories.model';\r\nexport abstract class AbstractCategorySelector {\r\n    /**\r\n     * Mainly enforcing type safety. If you can access\r\n     * this and write to it - state won't be broken\r\n     * as init allows for write but you could accidently\r\n     * empty it.\r\n     * @returns\r\n     * @memberof AbstractCategorySelector\r\n     */\r\n    public abstract getSelectedCatageories(): CategoryAlias[];\r\n\r\n    /**\r\n     * Set the selected Catagories from a list\r\n     *\r\n     * @param {CategoryAlias[]} selectedCategories\r\n     * @memberof AbstractCategorySelector\r\n     */\r\n    public abstract initSelectedCategories(selectedCategories: CategoryAlias[]): void;\r\n\r\n    /**\r\n     * Select catagory and all parent categories\r\n     * And add them to selected list\r\n     * @private\r\n     * @param {number} categoryId\r\n     * @memberof AbstractCategorySelector\r\n     */\r\n    public abstract addSelectedCategory(alias: CategoryAlias): boolean;\r\n\r\n    /**\r\n     * Shallow remove. Will not remove parent categories for child.\r\n     * Could check for orphans - but it starts to seem unintuitve.\r\n     * @param {number} categoryId\r\n     * @memberof AbstractCategorySelector\r\n     */\r\n    public abstract removeSelectedCategory(categoryId: number): boolean;\r\n\r\n    /**\r\n     * Get a category from a selected list\r\n     *\r\n     * @param {number} categoryId\r\n     * @returns {CategoryAlias}\r\n     * @memberof AbstractCategorySelector\r\n     */\r\n    public abstract getSelectedCategory(categoryId: number): CategoryAlias;\r\n\r\n    /**\r\n     * Check if the category has already been selected\r\n     *\r\n     * @param {number} categoryId\r\n     * @returns {boolean}\r\n     * @memberof AbstractCategorySelector\r\n     */\r\n    public abstract hasSelectedCategory(categoryId: number): boolean;\r\n\r\n\r\n}\r\n","// Core\r\nimport { Injectable, Inject } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\n\r\n// Rxjs\r\nimport { Observable } from 'rxjs';\r\nimport { map, filter, catchError, mergeMap, switchMap } from 'rxjs/operators';\r\n\r\n// Central\r\nimport { AppConfig } from '../../../global/contracts/config/app-config';\r\nimport { APP_CONFIG } from '../../../app.config';\r\n\r\n// Models\r\nimport { CategoryList } from '../models/category-list.model';\r\nimport { CategoryProvider, CategoryContract } from '../../../global/contracts/modules/category.contract';\r\nimport { Category, CategoryServiceData } from '../models/categories.model';\r\n\r\n@Injectable()\r\nexport class CategoryService extends CategoryProvider {\r\n\r\n  constructor(http: HttpClient, @Inject(APP_CONFIG) config: AppConfig ) {\r\n    super(config, http);\r\n  }\r\n\r\n  // move this to a base class\r\n  public setServiceUrl(config: AppConfig): string {\r\n    return config.baseUrl + config.httpServiceUrls.categories + config.defaultDataSuffix;\r\n  }\r\n\r\n  public getServiceUrl(): string {\r\n    return this.serviceUrl + '?include=children&level=1&paginate=false' ;\r\n  }\r\n  public getAll(): Observable<CategoryContract[]> {\r\n    return this.getCategories();\r\n  }\r\n  public getCategories(): Observable<Category[]> {\r\n    return this.http.get<CategoryServiceData>(this.serviceUrl + '?include=children&level=1&paginate=false' ).pipe(map(\r\n      result => {\r\n        if ( result.data === undefined ) {\r\n          return [];\r\n        }\r\n        return result.data.map( cat => {\r\n          return this.mapServiceData(cat);\r\n        });\r\n      }));\r\n  }\r\n  public mapServiceData(cat: any): Category {\r\n    let parentId = 0;\r\n    if (cat.parentCat) {\r\n      parentId = cat.parentCat.id;\r\n    }\r\n    const category: Category = new Category(cat.categoryID,\r\n      parentId,\r\n      cat.name,\r\n      cat.description,\r\n      cat.slug,\r\n      cat.imageURL,\r\n      []);\r\n      category.depth = cat.level;\r\n    if (cat.childCategory !== undefined ) {\r\n      cat.childCategory.data.forEach( x =>\r\n        category.subCategories.push(this.mapServiceData(x))\r\n       );\r\n    } else if ( cat.children ) {\r\n      cat.children.data.forEach(x =>\r\n        category.subCategories.push(this.mapServiceData(x))\r\n      );\r\n    }\r\n    return category;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Category } from '../models/categories.model';\r\nimport { AbstractNestedCategory } from './nested-category.abstract';\r\n\r\n@Injectable()\r\nexport class FilteredOrthogonalNestedCategoriesService extends AbstractNestedCategory {\r\n\r\n  private categoryModel: Category[][] = [];\r\n  private depth = 0;\r\n  /**\r\n   * Used only for filters\r\n   *\r\n   * @private\r\n   * @type {Category[]}\r\n   * @memberof FilteredOrthogonalNestedCategoriesService\r\n   */\r\n  private results: Category[] = [];\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  public init(categories: Category[]): void {\r\n    this.categoryModel = [];\r\n    this.flattenAndSplit(categories, 0, this.categoryModel);\r\n    if (this.categoryModel.length > 0 ) {\r\n      this.depth = 1;\r\n    }\r\n  }\r\n\r\n/**\r\n * A recursive function to translate a tree into\r\n * a multi-dimensional array. NB: A shallow copy\r\n * of objects is used with {... notation\r\n * @private\r\n * @param {Category[]} category\r\n * @param {number} depth\r\n * @returns\r\n * @memberof FilteredOrthogonalNestedCategoriesService\r\n */\r\n  private flattenAndSplit(category: Category[], depth: number, categoryModel: Category[][] ) {\r\n    if (!this.hasDepth(depth, true) ) {\r\n      categoryModel[depth] = [];\r\n    }\r\n    category.forEach( element => {\r\n      const shallowCopyCat = {...element};\r\n      shallowCopyCat.subCategories = [];\r\n      categoryModel[depth].push(shallowCopyCat);\r\n      this.flattenAndSplit(element.subCategories, depth + 1, categoryModel);\r\n    });\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Painful recursive function as global scope\r\n   * is needed for results -probably better as a subset function.\r\n   * @param {Category[]} parents\r\n   * @param {number} [depth]\r\n   * @returns {Category[]}\r\n   * @memberof FilteredOrthogonalNestedCategoriesService\r\n   */\r\n  public recursiveFindChildren(parents: Category[], depth?: number): Category[] {\r\n    if ( depth === undefined) {\r\n      depth = 0;\r\n      this.results = [];\r\n    }\r\n    while (depth < this.categoryModel.length) {\r\n      const children = this.categoryModel[depth].filter(cat => parents.some(p => p.id === cat.parentCategoryId) );\r\n      depth++;\r\n      if ( children.length > 0 ) {\r\n        this.results = this.results.concat(children);\r\n      }\r\n      this.recursiveFindChildren(children, depth );\r\n    }\r\n    return this.results;\r\n  }\r\n\r\n  /**\r\n   * Finds all parent categories for any given child\r\n   * Non depth dependant - but can use to optimise\r\n   * @param {number} childId\r\n   * @param {number} [depth]\r\n   * @returns {Category[]}\r\n   * @memberof FilteredOrthogonalNestedCategoriesService\r\n   */\r\n  public recursiveFindParents(childId: number, depth?: number): Category[] {\r\n    if (depth === undefined) {\r\n      depth = this.categoryModel.length;\r\n      this.results = [];\r\n    }\r\n    while ( depth >= 0 ) {\r\n      let current: Category = null;\r\n      if ( this.hasDepth(depth, false) ) {\r\n        current = this.categoryModel[depth].find( x => x.id === childId);\r\n      }\r\n      depth --;\r\n      if ( current ) {\r\n        // console.log(current);\r\n        this.results = this.results.concat(current);\r\n        this.recursiveFindParents(current.parentCategoryId, depth);\r\n      }\r\n    }\r\n    return this.results;\r\n  }\r\n  /**\r\n   * @inheritDoc\r\n   *\r\n   * @returns {number}\r\n   * @memberof FilteredOrthogonalNestedCategoriesService\r\n   */\r\n  public getCurrentDepth(): number {\r\n    return this.depth;\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   *\r\n   * @returns {Category[][]}\r\n   * @memberof FilteredOrthogonalNestedCategoriesService\r\n   */\r\n  public getFullModel(): Category[][] {\r\n    return this.categoryModel;\r\n  }\r\n\r\n  public getModelSize(): number {\r\n    return this.categoryModel.length;\r\n  }\r\n  /**\r\n   * @inheritDoc\r\n   *\r\n   * @param {number} depth\r\n   * @returns {Category[]}\r\n   * @memberof FilteredOrthogonalNestedCategoriesService\r\n   */\r\n  public getCategories(depth: number): Category[] {\r\n    return this.hasDepth(depth, false) ? this.categoryModel[depth] : null;\r\n  }\r\n\r\n  /**\r\n   * Note this is a permanent filter - we actually don't allow a way\r\n   * back to the original model by design\r\n   *\r\n   * In theory this should be all levels and this is recursive but it only matters\r\n   * if you can pass through the toggle process and use the model directly\r\n   * But the get full Model is expected be built on top of a pipe filter anyway\r\n   * So the nesting shouldn't matter if implemented correctly\r\n   *\r\n   * BUT - should we remove unused parents - if you filter via a child?\r\n   * That is a weird filter to set. Should we limit this to filters at root only?\r\n   *\r\n   * @param {number[]} filteredIds\r\n   * @param {number} depth\r\n   * @memberof FilteredOrthogonalNestedCategoriesService\r\n   */\r\n  public applyFilters(filteredIds: number[], depth: number): void {\r\n    if (this.hasDepth(depth, false)) {\r\n      const filteredArray: Category[] = this.categoryModel[depth].filter( x => filteredIds.some(a => a === x.id));\r\n      this.categoryModel[depth] = filteredArray;\r\n    }\r\n    // let's apply all nesting filters\r\n    if (this.hasDepth(depth, true)) {\r\n      const filteredChildArray: Category[] = this.categoryModel[depth + 1].filter(x => filteredIds.some(a => a === x.parentCategoryId));\r\n      this.categoryModel[depth + 1] = filteredChildArray;\r\n      // console.log(filteredChildArray);\r\n    }\r\n    // This may create orphans - consider a remove orphans filter\r\n  }\r\n\r\n  /**\r\n * Note this is a permanent filter - we actually don't allow a way\r\n * back to the original model by design\r\n *\r\n * In theory this should be all levels and this is recursive but it only matters\r\n * if you can pass through the toggle process and use the model directly\r\n * But the get full Model is expected be built on top of a pipe filter anyway\r\n * So the nesting shouldn't matter if implemented correctly\r\n *\r\n * BUT - should we remove unused parents - if you filter via a child?\r\n * That is a weird filter to set. Should we limit this to filters at root only?\r\n *\r\n * @param {number[]} filteredIds\r\n * @param {number} depth\r\n * @memberof FilteredOrthogonalNestedCategoriesService\r\n */\r\n  public filterAtDepth(filteredIds: number[], depth: number): Category[] {\r\n    if (filteredIds.length === 0) {\r\n      return this.categoryModel[depth];\r\n    }\r\n    if (this.hasDepth(depth, false)) {\r\n      const results = this.categoryModel[depth].filter(x => filteredIds.some(a => a === x.id));\r\n      return this.categoryModel[depth].filter(x => filteredIds.some(a => a === x.parentCategoryId));\r\n    }\r\n    return [];\r\n    // This may create orphans - consider a remove orphans filter\r\n  }\r\n  /**\r\n   * @inheritDoc\r\n   *\r\n   * @param {number} categoryId\r\n   * @param {number} [depth]\r\n   * @returns {Category}\r\n   * @memberof FilteredOrthogonalNestedCategoriesService\r\n   */\r\n  public findCategoryAtDepth(categoryId: number, depth?: number): Category {\r\n    if (depth === undefined ) {\r\n      depth = 0;\r\n    }\r\n    while (depth < this.categoryModel.length) {\r\n      if (this.hasDepth(depth, false)) {\r\n        const result = this.categoryModel[depth].find(x => x.id === categoryId);\r\n        if ( result !== undefined ) {\r\n          return result;\r\n        }\r\n      }\r\n      depth++;\r\n      return this.findCategoryAtDepth(categoryId, depth);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   * NB: Will remove orphans on return\r\n   * @param {number} selectedId\r\n   * @param {number} [depth]\r\n   * @returns {Category[]}\r\n   * @memberof FilteredOrthogonalNestedCategoriesService\r\n   */\r\n  public toggle(selectedId: number, depth?: number): Category[] {\r\n    if (this.hasDepth(depth, true)) {\r\n      this.depth = depth + 1;\r\n        return this.categoryModel[this.depth].filter(x => {\r\n         return ( (this.hasValidParent(this.depth, x.parentCategoryId, selectedId)) &&\r\n          (x.parentCategoryId === selectedId) );\r\n      });\r\n    }\r\n    return [];\r\n  }\r\n  /**\r\n   * Checks if the array has been created at chosen depth\r\n   * Can also check if child exists\r\n   * @private\r\n   * @param {number} depth\r\n   * @param {boolean} andChildDepth\r\n   * @returns {boolean}\r\n   * @memberof FilteredOrthogonalNestedCategoriesService\r\n   */\r\n  private hasDepth(depth: number, andChildDepth: boolean): boolean {\r\n    if ( this.categoryModel[depth] === undefined) {\r\n      return false;\r\n    }\r\n    return andChildDepth ? this.categoryModel.length > depth + 1 : this.categoryModel.length >= depth;\r\n  }\r\n\r\n  /**\r\n   * Old method which strictly searches depth only\r\n   *\r\n   * @private\r\n   * @param {number} categoryId\r\n   * @param {number} depth\r\n   * @returns {boolean}\r\n   * @memberof FilteredOrthogonalNestedCategoriesService\r\n   */\r\n  private categoryExists(categoryId: number, depth: number ): boolean {\r\n    if (this.hasDepth(depth, false ) ) {\r\n      return (this.categoryModel[depth].findIndex( x => x.id === categoryId) !== -1 );\r\n    }\r\n    return false;\r\n  }\r\n  /**\r\n   * @inheritDoc\r\n   *\r\n   * @param {number} depth\r\n   * @param {Category} category\r\n   * @returns {number}\r\n   * @memberof FilteredOrthogonalNestedCategoriesService\r\n   */\r\n  public insertCategory(depth: number, category: Category): number {\r\n    if (category.subCategories.length > 0) {\r\n      return this.categoryModel.length;\r\n    }\r\n    if (this.hasDepth( depth, false) ) {\r\n      if ( (!this.findCategoryAtDepth(category.id) ) &&\r\n          (this.hasValidParent(depth, category.parentCategoryId, category.id)) ) {\r\n          this.categoryModel[depth].push(category);\r\n        }\r\n    }\r\n    return this.categoryModel.length;\r\n  }\r\n  /**\r\n   * @inheritDoc\r\n   *\r\n   * @param {number} categoryId\r\n   * @param {number} [depth]\r\n   * @returns {number}\r\n   * @memberof FilteredOrthogonalNestedCategoriesService\r\n   */\r\n  public deleteCategory(categoryId: number, depth?: number): number {\r\n    if (this.hasDepth(depth, false)) {\r\n      const index = this.categoryModel[depth].findIndex(x => x.id === categoryId);\r\n      if (index !== -1) {\r\n        this.categoryModel[depth].splice(index, 1);\r\n      }\r\n    }\r\n    return this.categoryModel.length;\r\n  }\r\n\r\n  private hasValidParent(childDepth: number, parentId: number, childId: number): boolean {\r\n    if (childDepth < 0 ) {\r\n      return false;\r\n    }\r\n    if ( (childDepth === 0 ) && (parentId === 0) ) {\r\n      return true;\r\n    }\r\n    return ((this.categoryExists(parentId, childDepth - 1)) && (childId !== 0) );\r\n  }\r\n}\r\n","import { Category } from '../models/categories.model';\r\n\r\nexport abstract class AbstractNestedCategory {\r\n\r\n    /**\r\n   * Not sure what this should do yet - other than load up initial\r\n   * But maybe a model should be stored.. Or use local storage if\r\n   * nesting needs to be achieved.\r\n   * This should be cached!!!\r\n   * @param {Category[]} categories\r\n   * @memberof AbstractNestedCategory\r\n   */\r\n    public abstract init(categories: Category[]): void;\r\n\r\n    /**\r\n     * Get the state of the category selection\r\n     *\r\n     * @abstract\r\n     * @returns {number}\r\n     * @memberof AbstractNestedCategory\r\n     */\r\n    public abstract getCurrentDepth(): number;\r\n\r\n    /**** Category Methods */\r\n    /**\r\n     * In this case [i] is the depth\r\n     * [i][j] will get a category at depth\r\n     * @abstract\r\n     * @returns {Category[][]}\r\n     * @memberof AbstractNestedCategory\r\n     */\r\n    public abstract getFullModel(): Category[][];\r\n\r\n    /**\r\n     * Get the categories for a specific depth\r\n     * Could be subscribed to I think.\r\n     * @param {number} depth\r\n     * @memberof AbstractNestedCategory\r\n     */\r\n    public abstract getCategories(depth: number): Category[];\r\n\r\n    /**\r\n     * Filter a box for specific catagory IDS - mainly for parent cases\r\n     * but may be handy elsewhere\r\n     * @param {number[]} filteredIds\r\n     * @param {number} boxIndex\r\n     * @memberof AbstractNestedCategory\r\n     */\r\n    public abstract applyFilters(filteredIds: number[], depth: number): void;\r\n\r\n    /**\r\n    * Find a category in a selected depth with a selected id\r\n    * If depth is not selected - perform a recursive search\r\n    * @private\r\n    * @param {number} categoryId\r\n    * @param {number} depth\r\n    * @returns {Category}\r\n    * @memberof AbstractNestedCategory\r\n    */\r\n    public abstract findCategoryAtDepth(categoryId: number, depth?: number): Category;\r\n\r\n    /**\r\n     * Toggle any box level.\r\n     * If no depth chosen toggle based on deep search\r\n     * @param {number} selectedId\r\n     * @param {number} selectedBoxIndex\r\n     * @memberof AbstractNestedCategory\r\n     */\r\n    public abstract toggle(selectedId: number, depth?: number): Category[];\r\n\r\n    /**\r\n     * Insert a new category\r\n     * Local model only (no http)\r\n     * @abstract\r\n     * @param {number} depth\r\n     * @param {Category} category\r\n     * @returns {number} The new count of items at this depth\r\n     * @memberof AbstractNestedCategory\r\n     */\r\n    public abstract insertCategory(depth: number, category: Category): number;\r\n\r\n    /**\r\n     * Local model only\r\n     * Delete from existng Categories\r\n     * @abstract\r\n     * @param {number} categoryId the category to delete\r\n     * @param {number} [depth] The level of nesting\r\n     * @returns {number} the new count of items for this depth\r\n     * @memberof AbstractNestedCategory\r\n     */\r\n    public abstract deleteCategory(categoryId: number, depth?: number): number;\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { CategoriesModule } from '../categories/categories.module';\r\nimport { FileHandlerModule } from '../file-handler/file-handler.module';\r\nimport { StorageModule } from '../storage/storage.module';\r\nimport { TagsModule } from '../tags/tags.module';\r\nimport { WishlistModule } from '../wishlist/wishlist.module';\r\nimport { FkFormsModule } from '../fk-forms/fk-forms.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    CategoriesModule,\r\n    FileHandlerModule,\r\n    StorageModule,\r\n    TagsModule,\r\n    WishlistModule,\r\n    FkFormsModule\r\n  ],\r\n  declarations: [],\r\n  exports: [\r\n    TagsModule,\r\n    CategoriesModule,\r\n    FileHandlerModule,\r\n    StorageModule,\r\n    TagsModule,\r\n    WishlistModule,\r\n    FkFormsModule\r\n  ]\r\n})\r\nexport class CoreInterfaceModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n// file handling\r\nimport { FileUploadService } from './services/file-upload.service';\r\nimport { ImageUploadModalComponent } from './components/image-upload-modal/image-upload-modal.component';\r\nimport { OverlayPanelModule } from 'primeng/overlaypanel';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ImageGallerySelecterComponent } from './components/image-gallery-selecter/image-gallery-selecter.component';\r\nimport { ProgressBarModule } from 'primeng/progressbar';\r\nimport { ProgressSpinnerModule } from 'primeng/progressspinner';\r\nimport { DialogModule } from 'primeng/dialog';\r\nimport { KendoUploaderComponent } from './components/kendo-uploader/kendo-uploader.component';\r\nimport { UploadModule } from '@progress/kendo-angular-upload';\r\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { JwtInterceptor } from '@auth0/angular-jwt';\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    OverlayPanelModule,\r\n    FormsModule,\r\n    UploadModule\r\n  ],\r\n  declarations: [ImageUploadModalComponent, ImageGallerySelecterComponent, KendoUploaderComponent],\r\n  exports: [ImageUploadModalComponent, KendoUploaderComponent],\r\n  providers: [FileUploadService,\r\n  { provide: HTTP_INTERCEPTORS,\r\n    useClass: JwtInterceptor,\r\n    multi: true\r\n  } ]\r\n})\r\nexport class FileHandlerModule { }\r\n","import { Injectable, Inject } from '@angular/core';\r\nimport { Image } from '../models/image.model';\r\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\r\nimport { APP_CONFIG } from '../../../app.config';\r\nimport { AppConfig } from '../../../global/contracts/config/app-config';\r\n// Rxjs\r\nimport { Observable } from 'rxjs';\r\nimport { map, filter, catchError, mergeMap, switchMap } from 'rxjs/operators';\r\nimport { ImageHandlerService } from '../../../global/contracts/modules/image.contract';\r\n\r\n@Injectable()\r\nexport class FileUploadService extends ImageHandlerService {\r\n\r\n  constructor(http: HttpClient, @Inject(APP_CONFIG) private config: AppConfig) {\r\n    super(config, http);\r\n  }\r\n\r\n  public setServiceUrl(config: AppConfig): string {\r\n    return config.baseUrl + config.httpServiceUrls.images + config.defaultDataSuffix;\r\n  }\r\n  public create(image: Image): Observable<Image> {\r\n    return this.http.post<Image>(this.serviceUrl, image);\r\n  }\r\n  public saveAnyFile(image: any, endPoint: string): Observable<any> {\r\n    const formData = new FormData();\r\n    formData.append('file', image);\r\n    const headers = new HttpHeaders();\r\n    headers.append('Content-Type', 'multipart/form-data');\r\n    headers.append('Accept', 'application/json');\r\n\r\n    const options = { headers: headers };\r\n    return this.http.post<any>(endPoint, formData, options).pipe(map(\r\n      response => response\r\n    ));\r\n  }\r\n  public saveFile(image: any, endPoint: string, id: number, name?: string): Observable<string> {\r\n    // if( endPoint === 'shop') {\r\n      const url = this.config.baseUrl + this.config.httpServiceUrls.shop + '/' + id + '/image';\r\n      const formData = new FormData();\r\n      formData.append('file', image, name);\r\n      const headers = new HttpHeaders();\r\n      headers.append('Content-Type', 'multipart/form-data');\r\n      headers.append('Accept', 'application/json');\r\n\r\n      const options = { headers: headers};\r\n    return this.http.post<any>(url, formData, options).pipe(map(\r\n        response => response.url\r\n      ));\r\n    // }\r\n  }\r\n}\r\n","<div class=\"fk-modal\"  [style.display]=\"visible ? 'block' : 'none'\">\r\n<div #container [ngClass]=\"{'ui-dialog ui-widget ui-widget-content ui-corner-all ui-shadow fk-modal-wrapper':true, 'ui-dialog-rtl':rtl,'ui-dialog-draggable':draggable}\"\r\n  [style.display]=\"visible ? 'block' : 'none'\" [class]=\"styleClass\" (mousedown)=\"moveOnTop()\" [@dialogState]=\"visible ? 'visible' : 'hidden'\"\r\n  role=\"dialog\" [attr.aria-labelledby]=\"id + '-label'\">\r\n    <div class=\"fk-modal-header\" #titlebar (mousedown)=\"initDrag($event)\" *ngIf=\"showHeader\">\r\n      <h3>{{header}}</h3>\r\n      <button class=\"non-button close-button\" (click)=\"close($event)\" (mousedown)=\"onCloseMouseDown($event)\" *ngIf=\"closable\">\r\n        <i class=\"fal fa-times\"></i>\r\n      </button>\r\n    </div>\r\n  <div #content class=\"ui-dialog-content ui-widget-content fk-modal-inner\" [ngStyle]=\"contentStyle\">\r\n    <ng-content></ng-content>\r\n  </div>\r\n  <div class=\"ui-dialog-footer ui-widget-content\" *ngIf=\"footerFacet && footerFacet.first\">\r\n    <ng-content select=\"p-footer\"></ng-content>\r\n  </div>\r\n  <!--<div *ngIf=\"resizable\" class=\"ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se\" style=\"z-index: 90;\"\r\n    (mousedown)=\"initResize($event)\"></div>-->\r\n</div>\r\n\r\n</div>","import { Component, OnInit, ElementRef, Renderer2, NgZone, Input, AfterViewInit, AfterViewChecked, OnDestroy,\r\n         ContentChildren, QueryList, ViewChild, Output, EventEmitter } from '@angular/core';\r\nimport { DomHandler } from 'primeng/components/dom/domhandler';\r\nimport { animate, transition, state, style, trigger } from '@angular/animations';\r\nimport { Header, Footer } from 'primeng/components/common/shared';\r\n\r\nlet idx = 0;\r\n@Component({\r\n  selector: 'app-fk-dialog',\r\n  templateUrl: './fk-dialog.component.html',\r\n  animations: [\r\n    trigger('dialogState', [\r\n      state('hidden', style({\r\n        opacity: 0\r\n      })),\r\n      state('visible', style({\r\n        opacity: 1\r\n      })),\r\n      transition('visible => hidden', animate('400ms ease-in')),\r\n      transition('hidden => visible', animate('400ms ease-out'))\r\n    ])\r\n  ],\r\n  styleUrls: ['./fk-dialog.component.scss']\r\n})\r\nexport class FkDialogComponent implements AfterViewInit, AfterViewChecked, OnDestroy {\r\n\r\n  @Input() header: string;\r\n\r\n  @Input() draggable = true;\r\n\r\n  @Input() resizable = true;\r\n\r\n  @Input() minWidth = 150;\r\n\r\n  @Input() minHeight = 150;\r\n\r\n  @Input() width: any;\r\n\r\n  @Input() height: any;\r\n\r\n  @Input() positionLeft: number;\r\n\r\n  @Input() positionTop: number;\r\n\r\n  @Input() contentStyle: any;\r\n\r\n  @Input() modal: boolean;\r\n\r\n  @Input() closeOnEscape = true;\r\n\r\n  @Input() dismissableMask: boolean;\r\n\r\n  @Input() rtl: boolean;\r\n\r\n  @Input() closable = true;\r\n\r\n  @Input() responsive = true;\r\n\r\n  @Input() appendTo: any;\r\n\r\n  @Input() style: any;\r\n\r\n  @Input() styleClass: string;\r\n\r\n  @Input() showHeader = true;\r\n\r\n  @Input() breakpoint = 640;\r\n\r\n  @Input() blockScroll = false;\r\n\r\n  @Input() autoZIndex = true;\r\n\r\n  @Input() baseZIndex = 0;\r\n\r\n  @Input() minX = 0;\r\n\r\n  @Input() minY = 0;\r\n\r\n  @Input() autoAlign = true;\r\n\r\n  @Input() focusOnShow = true;\r\n\r\n  @ContentChildren(Header, { descendants: false }) headerFacet: QueryList<Header>;\r\n\r\n  @ContentChildren(Footer, { descendants: false }) footerFacet: QueryList<Header>;\r\n\r\n  @ViewChild('container') containerViewChild: ElementRef;\r\n\r\n  @ViewChild('titlebar') headerViewChild: ElementRef;\r\n\r\n  @ViewChild('content') contentViewChild: ElementRef;\r\n\r\n  // tslint:disable-next-line:no-output-on-prefix\r\n  @Output() onShow: EventEmitter<any> = new EventEmitter();\r\n\r\n  // tslint:disable-next-line:no-output-on-prefix\r\n  @Output() onHide: EventEmitter<any> = new EventEmitter();\r\n\r\n  @Output() visibleChange: EventEmitter<any> = new EventEmitter();\r\n\r\n  _visible: boolean;\r\n\r\n  dragging: boolean;\r\n\r\n  documentDragListener: any;\r\n\r\n  documentDragEndListener: any;\r\n\r\n  resizing: boolean;\r\n\r\n  documentResizeListener: any;\r\n\r\n  documentResizeEndListener: any;\r\n\r\n  documentResponsiveListener: any;\r\n\r\n  documentEscapeListener: Function;\r\n\r\n  maskClickListener: Function;\r\n\r\n  lastPageX: number;\r\n\r\n  lastPageY: number;\r\n\r\n  mask: HTMLDivElement;\r\n\r\n  closeIconMouseDown: boolean;\r\n\r\n  preWidth: number;\r\n\r\n  preventVisibleChangePropagation: boolean;\r\n\r\n  executePostDisplayActions: boolean;\r\n\r\n  initialized: boolean;\r\n\r\n  currentHeight: number;\r\n\r\n  id = `ui-dialog-${idx++}`;\r\n\r\n  constructor(public el: ElementRef, public domHandler: DomHandler, public renderer: Renderer2, public zone: NgZone) { }\r\n\r\n  @Input() get visible(): boolean {\r\n    return this._visible;\r\n  }\r\n\r\n  set visible(val: boolean) {\r\n    this._visible = val;\r\n\r\n    if (this.initialized && this.containerViewChild && this.containerViewChild.nativeElement) {\r\n      if (this._visible) {\r\n        this.show();\r\n      } else {\r\n        if (this.preventVisibleChangePropagation) {\r\n          this.preventVisibleChangePropagation = false;\r\n        } else {\r\n          this.hide();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    if (this.executePostDisplayActions) {\r\n      this.onShow.emit({});\r\n      this.positionOverlay();\r\n      if (this.focusOnShow) {\r\n        this.focus();\r\n      }\r\n      this.currentHeight = this.domHandler.getOuterHeight(this.containerViewChild.nativeElement);\r\n      this.executePostDisplayActions = false;\r\n    } else if (this.autoAlign && this.visible) {\r\n      this.zone.runOutsideAngular(() => {\r\n        setTimeout(() => {\r\n          const height = this.domHandler.getOuterHeight(this.containerViewChild.nativeElement);\r\n\r\n          if (height !== this.currentHeight) {\r\n            this.currentHeight = height;\r\n            this.positionOverlay();\r\n          }\r\n        }, 50);\r\n      });\r\n    }\r\n  }\r\n\r\n  focus() {\r\n    const focusable = this.domHandler.findSingle(this.containerViewChild.nativeElement, 'button');\r\n    if (focusable) {\r\n      focusable.focus();\r\n    }\r\n  }\r\n\r\n  show() {\r\n    this.executePostDisplayActions = true;\r\n    this.moveOnTop();\r\n    this.bindGlobalListeners();\r\n\r\n    if (this.modal) {\r\n      this.enableModality();\r\n    }\r\n  }\r\n\r\n  positionOverlay() {\r\n    const viewport = this.domHandler.getViewport();\r\n    if (this.domHandler.getOuterHeight(this.containerViewChild.nativeElement) > viewport.height) {\r\n      this.contentViewChild.nativeElement.style.height = (viewport.height * .75) + 'px';\r\n    }\r\n\r\n    if (this.positionLeft >= 0 && this.positionTop >= 0) {\r\n      this.containerViewChild.nativeElement.style.left = this.positionLeft + 'px';\r\n      this.containerViewChild.nativeElement.style.top = this.positionTop + 'px';\r\n    } else if (this.positionTop >= 0) {\r\n      this.center();\r\n      this.containerViewChild.nativeElement.style.top = this.positionTop + 'px';\r\n    } else {\r\n      this.center();\r\n    }\r\n  }\r\n\r\n  hide() {\r\n    this.onHide.emit({});\r\n    this.unbindMaskClickListener();\r\n    this.unbindGlobalListeners();\r\n    this.dragging = false;\r\n\r\n    if (this.modal) {\r\n      this.disableModality();\r\n    }\r\n  }\r\n\r\n  close(event: Event) {\r\n    this.preventVisibleChangePropagation = true;\r\n    this.hide();\r\n    this.visibleChange.emit(false);\r\n    event.preventDefault();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.initialized = true;\r\n\r\n    if (this.appendTo) {\r\n      if (this.appendTo === 'body') {\r\n        document.body.appendChild(this.containerViewChild.nativeElement);\r\n      } else {\r\n        this.domHandler.appendChild(this.containerViewChild.nativeElement, this.appendTo);\r\n      }\r\n    }\r\n\r\n    if (this.visible) {\r\n      this.show();\r\n    }\r\n  }\r\n\r\n  center() {\r\n    let elementWidth = this.domHandler.getOuterWidth(this.containerViewChild.nativeElement);\r\n    let elementHeight = this.domHandler.getOuterHeight(this.containerViewChild.nativeElement);\r\n    if (elementWidth === 0 && elementHeight === 0) {\r\n      this.containerViewChild.nativeElement.style.visibility = 'hidden';\r\n      this.containerViewChild.nativeElement.style.display = 'block';\r\n      elementWidth = this.domHandler.getOuterWidth(this.containerViewChild.nativeElement);\r\n      elementHeight = this.domHandler.getOuterHeight(this.containerViewChild.nativeElement);\r\n      this.containerViewChild.nativeElement.style.display = 'none';\r\n      this.containerViewChild.nativeElement.style.visibility = 'visible';\r\n    }\r\n    const viewport = this.domHandler.getViewport();\r\n    const x = Math.max((viewport.width - elementWidth) / 2, 0);\r\n    const y = Math.max((viewport.height - elementHeight) / 2, 0);\r\n\r\n    this.containerViewChild.nativeElement.style.left = x + 'px';\r\n    this.containerViewChild.nativeElement.style.top = y + 'px';\r\n  }\r\n\r\n  enableModality() {\r\n    if (!this.mask) {\r\n      this.mask = document.createElement('div');\r\n      this.mask.style.zIndex = String(parseInt(this.containerViewChild.nativeElement.style.zIndex, 10) - 1);\r\n      let maskStyleClass = 'ui-widget-overlay ui-dialog-mask';\r\n      if (this.blockScroll) {\r\n        maskStyleClass += ' ui-dialog-mask-scrollblocker';\r\n      }\r\n      this.domHandler.addMultipleClasses(this.mask, maskStyleClass);\r\n\r\n      if (this.closable && this.dismissableMask) {\r\n        this.maskClickListener = this.renderer.listen(this.mask, 'click', (event: any) => {\r\n          this.close(event);\r\n        });\r\n      }\r\n      document.body.appendChild(this.mask);\r\n      if (this.blockScroll) {\r\n        this.domHandler.addClass(document.body, 'ui-overflow-hidden');\r\n      }\r\n    }\r\n  }\r\n\r\n  disableModality() {\r\n    if (this.mask) {\r\n      document.body.removeChild(this.mask);\r\n      if (this.blockScroll) {\r\n        const bodyChildren = document.body.children;\r\n        let hasBlockerMasks: boolean;\r\n        for (let i = 0; i < bodyChildren.length; i++) {\r\n          const bodyChild = bodyChildren[i];\r\n          if (this.domHandler.hasClass(bodyChild, 'ui-dialog-mask-scrollblocker')) {\r\n            hasBlockerMasks = true;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (!hasBlockerMasks) {\r\n          this.domHandler.removeClass(document.body, 'ui-overflow-hidden');\r\n        }\r\n      }\r\n      this.mask = null;\r\n    }\r\n  }\r\n\r\n  unbindMaskClickListener() {\r\n    if (this.maskClickListener) {\r\n      this.maskClickListener();\r\n      this.maskClickListener = null;\r\n    }\r\n  }\r\n\r\n  moveOnTop() {\r\n    if (this.autoZIndex) {\r\n      this.containerViewChild.nativeElement.style.zIndex = String(this.baseZIndex + (++DomHandler.zindex));\r\n    }\r\n  }\r\n\r\n  onCloseMouseDown(event: Event) {\r\n    this.closeIconMouseDown = true;\r\n  }\r\n\r\n  initDrag(event: MouseEvent) {\r\n    if (this.closeIconMouseDown) {\r\n      this.closeIconMouseDown = false;\r\n      return;\r\n    }\r\n\r\n    if (this.draggable) {\r\n      this.dragging = true;\r\n      this.lastPageX = event.pageX;\r\n      this.lastPageY = event.pageY;\r\n      this.domHandler.addClass(document.body, 'ui-unselectable-text');\r\n    }\r\n  }\r\n\r\n  onDrag(event: MouseEvent) {\r\n    if (this.dragging) {\r\n      const deltaX = event.pageX - this.lastPageX;\r\n      const deltaY = event.pageY - this.lastPageY;\r\n      const leftPos = parseInt(this.containerViewChild.nativeElement.style.left, 10) + deltaX;\r\n      const topPos = parseInt(this.containerViewChild.nativeElement.style.top, 10) + deltaY;\r\n\r\n      if (leftPos >= this.minX) {\r\n        this.containerViewChild.nativeElement.style.left = leftPos + 'px';\r\n      }\r\n\r\n      if (topPos >= this.minY) {\r\n        this.containerViewChild.nativeElement.style.top = topPos + 'px';\r\n      }\r\n\r\n      this.lastPageX = event.pageX;\r\n      this.lastPageY = event.pageY;\r\n    }\r\n  }\r\n\r\n  endDrag(event: MouseEvent) {\r\n    if (this.draggable) {\r\n      this.dragging = false;\r\n      this.domHandler.removeClass(document.body, 'ui-unselectable-text');\r\n    }\r\n  }\r\n\r\n  initResize(event: MouseEvent) {\r\n    if (this.resizable) {\r\n      this.preWidth = null;\r\n      this.resizing = true;\r\n      this.lastPageX = event.pageX;\r\n      this.lastPageY = event.pageY;\r\n      this.domHandler.addClass(document.body, 'ui-unselectable-text');\r\n    }\r\n  }\r\n\r\n  onResize(event: MouseEvent) {\r\n    if (this.resizing) {\r\n      const deltaX = event.pageX - this.lastPageX;\r\n      const deltaY = event.pageY - this.lastPageY;\r\n      const containerWidth = this.domHandler.getOuterWidth(this.containerViewChild.nativeElement);\r\n      const containerHeight = this.domHandler.getOuterHeight(this.containerViewChild.nativeElement);\r\n      const contentHeight = this.domHandler.getOuterHeight(this.contentViewChild.nativeElement);\r\n      const newWidth = containerWidth + deltaX;\r\n      const newHeight = containerHeight + deltaY;\r\n\r\n      if (newWidth > this.minWidth) {\r\n        this.containerViewChild.nativeElement.style.width = newWidth + 'px';\r\n      }\r\n\r\n      if (newHeight > this.minHeight) {\r\n        this.containerViewChild.nativeElement.style.height = newHeight + 'px';\r\n        this.contentViewChild.nativeElement.style.height = contentHeight + deltaY + 'px';\r\n      }\r\n\r\n      this.lastPageX = event.pageX;\r\n      this.lastPageY = event.pageY;\r\n    }\r\n  }\r\n\r\n  onResizeEnd(event: MouseEvent) {\r\n    if (this.resizing) {\r\n      this.resizing = false;\r\n      this.domHandler.removeClass(document.body, 'ui-unselectable-text');\r\n    }\r\n  }\r\n\r\n  bindGlobalListeners() {\r\n    if (this.draggable) {\r\n      this.bindDocumentDragListener();\r\n      this.bindDocumentDragEndListener();\r\n    }\r\n\r\n    if (this.resizable) {\r\n      this.bindDocumentResizeListeners();\r\n    }\r\n\r\n    if (this.responsive) {\r\n      this.bindDocumentResponsiveListener();\r\n    }\r\n\r\n    if (this.closeOnEscape && this.closable) {\r\n      this.bindDocumentEscapeListener();\r\n    }\r\n  }\r\n\r\n  unbindGlobalListeners() {\r\n    this.unbindDocumentDragListener();\r\n    this.unbindDocumentDragEndListener();\r\n    this.unbindDocumentResizeListeners();\r\n    this.unbindDocumentResponsiveListener();\r\n    this.unbindDocumentEscapeListener();\r\n  }\r\n\r\n  bindDocumentDragListener() {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.documentDragListener = this.onDrag.bind(this);\r\n      window.document.addEventListener('mousemove', this.documentDragListener);\r\n    });\r\n  }\r\n\r\n  unbindDocumentDragListener() {\r\n    if (this.documentDragListener) {\r\n      window.document.removeEventListener('mousemove', this.documentDragListener);\r\n      this.documentDragListener = null;\r\n    }\r\n  }\r\n\r\n  bindDocumentDragEndListener() {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.documentDragEndListener = this.endDrag.bind(this);\r\n      window.document.addEventListener('mouseup', this.documentDragEndListener);\r\n    });\r\n  }\r\n\r\n  unbindDocumentDragEndListener() {\r\n    if (this.documentDragEndListener) {\r\n      window.document.removeEventListener('mouseup', this.documentDragEndListener);\r\n      this.documentDragEndListener = null;\r\n    }\r\n  }\r\n\r\n  bindDocumentResizeListeners() {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.documentResizeListener = this.onResize.bind(this);\r\n      this.documentResizeEndListener = this.onResizeEnd.bind(this);\r\n      window.document.addEventListener('mousemove', this.documentResizeListener);\r\n      window.document.addEventListener('mouseup', this.documentResizeEndListener);\r\n    });\r\n  }\r\n\r\n  unbindDocumentResizeListeners() {\r\n    if (this.documentResizeListener && this.documentResizeEndListener) {\r\n      window.document.removeEventListener('mouseup', this.documentResizeListener);\r\n      window.document.removeEventListener('mouseup', this.documentResizeEndListener);\r\n      this.documentResizeListener = null;\r\n      this.documentResizeEndListener = null;\r\n    }\r\n  }\r\n\r\n  bindDocumentResponsiveListener() {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.documentResponsiveListener = this.onWindowResize.bind(this);\r\n      window.addEventListener('resize', this.documentResponsiveListener);\r\n    });\r\n  }\r\n\r\n  unbindDocumentResponsiveListener() {\r\n    if (this.documentResponsiveListener) {\r\n      window.removeEventListener('resize', this.documentResponsiveListener);\r\n      this.documentResponsiveListener = null;\r\n    }\r\n  }\r\n\r\n  onWindowResize(event) {\r\n    const viewport = this.domHandler.getViewport();\r\n    const width = this.domHandler.getOuterWidth(this.containerViewChild.nativeElement);\r\n    if (viewport.width <= this.breakpoint) {\r\n      if (!this.preWidth) {\r\n        this.preWidth = width;\r\n      }\r\n      this.containerViewChild.nativeElement.style.left = '0px';\r\n      this.containerViewChild.nativeElement.style.width = '100%';\r\n    } else {\r\n      this.containerViewChild.nativeElement.style.width = this.preWidth + 'px';\r\n      this.positionOverlay();\r\n    }\r\n  }\r\n\r\n  bindDocumentEscapeListener() {\r\n    this.documentEscapeListener = this.renderer.listen('document', 'keydown', (event) => {\r\n      if (event.which === 27) {\r\n        if (parseInt(this.containerViewChild.nativeElement.style.zIndex, 10) === DomHandler.zindex) {\r\n          this.close(event);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  unbindDocumentEscapeListener() {\r\n    if (this.documentEscapeListener) {\r\n      this.documentEscapeListener();\r\n      this.documentEscapeListener = null;\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.initialized = false;\r\n\r\n    this.disableModality();\r\n\r\n    this.unbindGlobalListeners();\r\n\r\n    if (this.appendTo) {\r\n      this.el.nativeElement.appendChild(this.containerViewChild.nativeElement);\r\n    }\r\n\r\n    this.unbindMaskClickListener();\r\n  }\r\n}\r\n","<div #container [ngClass]=\"'ui-growl ui-widget'\" [ngStyle]=\"style\" [class]=\"styleClass\">\r\n  <div #msgel *ngFor=\"let msg of value;let i = index\" class=\"ui-growl-item-container ui-state-highlight ui-corner-all ui-shadow\"\r\n    aria-live=\"polite\" [ngClass]=\"{'ui-growl-message-info':msg.severity == 'info','ui-growl-message-warn':msg.severity == 'warn', 'ui-growl-message-error':msg.severity == 'error','ui-growl-message-success':msg.severity == 'success'}\" (click)=\"onMessageClick(i)\" (mouseenter)=\"onMessageHover(i)\">\r\n    <div class=\"ui-growl-item\">\r\n      <div class=\"ui-growl-icon-close fal fa-times\" (click)=\"remove(i,msgel)\"></div>\r\n      <span class=\"ui-growl-image fas fa-2x\" [ngClass]=\"{'fa-info-circle':msg.severity == 'info','fa-exclamation-circle':msg.severity == 'warn', 'fa-exclamation-circle':msg.severity == 'error','fa-check-circle':msg.severity == 'success'}\"></span>\r\n      <div class=\"ui-growl-message\">\r\n        <span class=\"ui-growl-title\">{{msg.summary}}</span>\r\n        <p [innerHTML]=\"msg.detail||''\"></p>\r\n      </div>\r\n      <div style=\"clear: both;\"></div>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit, Input, AfterViewInit, DoCheck, OnDestroy, EventEmitter,\r\n         ViewChild, ElementRef, Optional, NgZone, IterableDiffers, Output } from '@angular/core';\r\nimport { Message } from 'primeng/components/common/message';\r\nimport { DomHandler } from 'primeng/components/dom/domhandler';\r\nimport { Subscription } from 'rxjs';\r\nimport { MessageService } from 'primeng/components/common/messageservice';\r\n\r\n@Component({\r\n  selector: 'app-fk-growl',\r\n  templateUrl: './fk-growl.component.html',\r\n  styleUrls: ['./fk-growl.component.scss']\r\n})\r\nexport class FkGrowlComponent implements AfterViewInit, DoCheck, OnDestroy {\r\n\r\n  @Input() life = 3000;\r\n\r\n  @Input() style: any;\r\n\r\n  @Input() styleClass: string;\r\n\r\n  @Input() immutable = true;\r\n\r\n  @Input() autoZIndex = true;\r\n\r\n  @Input() baseZIndex = 0;\r\n\r\n  @Input() key: string;\r\n\r\n  @Output() click: EventEmitter<any> = new EventEmitter();\r\n\r\n  @Output() hover: EventEmitter<any> = new EventEmitter();\r\n\r\n  @Output() close: EventEmitter<any> = new EventEmitter();\r\n\r\n  @Output() valueChange: EventEmitter<Message[]> = new EventEmitter<Message[]>();\r\n\r\n  @ViewChild('container') containerViewChild: ElementRef;\r\n\r\n  _sticky: boolean;\r\n\r\n  _value: Message[];\r\n\r\n  timeout: any;\r\n\r\n  preventRerender: boolean;\r\n\r\n  differ: any;\r\n\r\n  subscription: Subscription;\r\n\r\n  closeIconClick: boolean;\r\n\r\n  constructor(public el: ElementRef, public domHandler: DomHandler, public differs: IterableDiffers,\r\n    @Optional() public messageService: MessageService, private zone: NgZone) {\r\n    this.differ = differs.find([]).create(null);\r\n\r\n    if (messageService) {\r\n      this.subscription = messageService.messageObserver.subscribe(messages => {\r\n        if (messages) {\r\n          if (messages instanceof Array) {\r\n            const filteredMessages = messages.filter(m => this.key === m.key);\r\n            this.value = this.value ? [...this.value, ...filteredMessages] : [...filteredMessages];\r\n          } else if (this.key === messages.key) {\r\n            this.value = this.value ? [...this.value, ...[messages]] : [messages];\r\n          }\r\n        } else {\r\n          this.value = null;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (!this.sticky) {\r\n      this.initTimeout();\r\n    }\r\n  }\r\n\r\n  @Input() get value(): Message[] {\r\n    return this._value;\r\n  }\r\n\r\n  set value(val: Message[]) {\r\n    this._value = val;\r\n    if (this.containerViewChild && this.containerViewChild.nativeElement && this.immutable) {\r\n      this.handleValueChange();\r\n    }\r\n  }\r\n\r\n  @Input() get sticky(): boolean {\r\n    return this._sticky;\r\n  }\r\n\r\n  set sticky(value: boolean) {\r\n    if (value && this.timeout) {\r\n      clearTimeout(this.timeout);\r\n    }\r\n    this._sticky = value;\r\n  }\r\n\r\n  ngDoCheck() {\r\n    if (!this.immutable && this.containerViewChild && this.containerViewChild.nativeElement) {\r\n      const changes = this.differ.diff(this.value);\r\n      if (changes) {\r\n        this.handleValueChange();\r\n      }\r\n    }\r\n  }\r\n\r\n  handleValueChange() {\r\n    if (this.preventRerender) {\r\n      this.preventRerender = false;\r\n      return;\r\n    }\r\n\r\n    if (this.autoZIndex) {\r\n      this.containerViewChild.nativeElement.style.zIndex = String(this.baseZIndex + (++DomHandler.zindex));\r\n    }\r\n    this.domHandler.fadeIn(this.containerViewChild.nativeElement, 250);\r\n\r\n    if (!this.sticky) {\r\n      this.initTimeout();\r\n    }\r\n  }\r\n\r\n  initTimeout() {\r\n    if (this.timeout) {\r\n      clearTimeout(this.timeout);\r\n    }\r\n    this.zone.runOutsideAngular(() => {\r\n      this.timeout = setTimeout(() => {\r\n        this.zone.run(() => {\r\n          this.removeAll();\r\n        });\r\n      }, this.life);\r\n    });\r\n  }\r\n\r\n  remove(index: number, msgel: any) {\r\n    this.closeIconClick = true;\r\n    this.domHandler.fadeOut(msgel, 250);\r\n\r\n    setTimeout(() => {\r\n      this.preventRerender = true;\r\n      this.close.emit({ message: this.value[index] });\r\n\r\n      if (this.immutable) {\r\n        this._value = this.value.filter((val, i) => i !== index);\r\n        this.valueChange.emit(this._value);\r\n      } else {\r\n        this._value.splice(index, 1);\r\n      }\r\n    }, 250);\r\n  }\r\n\r\n  removeAll() {\r\n    if (this.value && this.value.length) {\r\n      this.domHandler.fadeOut(this.containerViewChild.nativeElement, 250);\r\n\r\n      setTimeout(() => {\r\n        this.value.forEach((msg, index) => this.close.emit({ message: this.value[index] }));\r\n        if (this.immutable) {\r\n          this.value = [];\r\n          this.valueChange.emit(this.value);\r\n        } else {\r\n          this.value.splice(0, this.value.length);\r\n        }\r\n      }, 250);\r\n    }\r\n  }\r\n\r\n  onMessageClick(i: number) {\r\n    if (this.closeIconClick) {\r\n      this.closeIconClick = false;\r\n    } else {\r\n      this.click.emit({ message: this.value[i] });\r\n    }\r\n  }\r\n\r\n  onMessageHover(i: number) {\r\n    this.hover.emit({ message: this.value[i] });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (!this.sticky) {\r\n      clearTimeout(this.timeout);\r\n    }\r\n\r\n    if (this.subscription) {\r\n      this.subscription.unsubscribe();\r\n    }\r\n  }\r\n}\r\n","<app-fk-growl [life]=\"6000\" [(value)]=\"msgs\"></app-fk-growl>","import { Component, OnInit } from '@angular/core';\r\nimport { Message } from 'primeng/components/common/api';\r\nimport { MessageService } from '../../services/message.service';\r\n\r\n@Component({\r\n  selector: 'app-form-messages',\r\n  templateUrl: './form-messages.component.html',\r\n  styleUrls: ['./form-messages.component.scss']\r\n})\r\nexport class FormMessagesComponent implements OnInit {\r\n\r\n  msgs: Message[] = [];\r\n  constructor(private _service: MessageService) { }\r\n\r\n  ngOnInit() {\r\n    this._service.messages.subscribe(newValue =>\r\n      this.msgs = newValue);\r\n  }\r\n}\r\n","<div class=\"form-actions centered\">\r\n  <!--<button type=\"submit\" class=\"btn btn-red float-left\"><i class=\"fas fa-trash-alt\"></i> Delete</button>-->\r\n  <button type=\"submit\"  [disabled]=\"!isValid\" [ngClass]=\"{'btn': true, 'btn-save': isValid, 'btn-primary': !isValid}\" (click)=\"trigger()\">\r\n    <i class=\"far fa-check\"></i> {{btnLabel}}</button>\r\n</div>\r\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { Message } from 'primeng/components/common/api';\r\nimport { MessageService } from '../../services/message.service';\r\n\r\n@Component({\r\n  selector: 'app-form-save',\r\n  templateUrl: './form-save.component.html',\r\n  styleUrls: ['./form-save.component.scss']\r\n})\r\nexport class FormSaveComponent implements OnInit {\r\n  @Input() btnLabel = '';\r\n  @Input() isValid = false;\r\n  @Output() saveTrigger = new EventEmitter<boolean>();\r\n  constructor() { }\r\n\r\n  ngOnInit() {}\r\n\r\n  trigger() {\r\n    this.saveTrigger.emit(true);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormSaveComponent } from './components/form-save/form-save.component';\r\nimport { MessageService } from './services/message.service';\r\nimport { MessagesModule } from 'primeng/messages';\r\nimport { FormMessagesComponent } from './components/form-messages/form-messages.component';\r\nimport { FormDataService } from './services/form-data.service';\r\nimport { GrowlModule } from 'primeng/growl';\r\nimport { FkGrowlComponent } from './components/fk-growl/fk-growl.component';\r\nimport { FkDialogComponent } from './components/fk-dialog/fk-dialog.component';\r\nimport { DomHandler } from 'primeng/components/common/api';\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MessagesModule\r\n  ],\r\n  declarations: [FormSaveComponent, FormMessagesComponent, FkGrowlComponent, FkDialogComponent],\r\n  providers: [MessageService, FormDataService, DomHandler],\r\n  exports: [FormSaveComponent, FormMessagesComponent, FkDialogComponent, FkGrowlComponent]\r\n})\r\nexport class FkFormsModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpParams } from '@angular/common/http';\r\n\r\n@Injectable()\r\nexport class FormDataService {\r\n\r\n  constructor() { }\r\n\r\n  convertFields(modelData: any): HttpParams {\r\n    let item = new HttpParams();\r\n    Object.keys(modelData).forEach(key => {\r\n      item = item.append(key, modelData[key]);\r\n    });\r\n    return item;\r\n  }\r\n  public convertToFormData(modelData: any): FormData {\r\n    const data = new FormData();\r\n    Object.keys(modelData).forEach(key => {\r\n      data.append(key, modelData[key]);\r\n    });\r\n    return data;\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Message } from 'primeng/components/common/api';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class MessageService {\r\n  private _msgs: Message[] = [];\r\n  messages: BehaviorSubject<Message[]> = new BehaviorSubject<Message[]>([]);\r\n  constructor() { }\r\n\r\n  public sendErrorMessage(title: string, message: string) {\r\n    this.sendMessage('error', title, message);\r\n  }\r\n  public sendInfoMessage(title: string, message: string) {\r\n    this.sendMessage('info', title, message);\r\n  }\r\n  public sendSuccessMessage(title: string, message: string) {\r\n    this.sendMessage('success', title, message);\r\n  }\r\n  public sendMessage(severity: string, title: string, message: string) {\r\n    this._msgs = [];\r\n    this._msgs.push({ severity: severity, summary: title, detail: message });\r\n    this.messages.next(this._msgs);\r\n  }\r\n  public getMessages() {\r\n    return this._msgs;\r\n  }\r\n  public clear() {\r\n    this._msgs = [];\r\n    this.messages.next(this._msgs);\r\n  }\r\n}\r\n","import { Injectable, Inject } from '@angular/core';\r\nimport { CookieService } from 'ngx-cookie-service';\r\nimport { StorageProvider } from '../../../global/contracts/services/storage.provider';\r\nimport { Exception } from 'handlebars';\r\nimport { environment } from '../../../../environments/environment';\r\nimport { APP_CONFIG } from '../../../app.config';\r\nimport { AppConfig } from '../../../global/contracts/config/app-config';\r\n@Injectable()\r\nexport class CookieStorageService extends StorageProvider {\r\n\r\n  private _path = '/';\r\n  private _domain = 'localhost';\r\n  private _expires: Date = new Date();\r\n  private _cookieExpiryHours = 24;\r\n  constructor(private storage: CookieService, @Inject(APP_CONFIG) private config: AppConfig ) {\r\n    super();\r\n    this._domain = config.cookieUrl;\r\n    this._path = config.cookiePath;\r\n    this._expires.setHours(this._expires.getHours() + config.cookieExpiryHours);\r\n  }\r\n  public setDomain(domain: string) {\r\n    this._domain = domain;\r\n  }\r\n  /**\r\n   * NB: We could add additional security that parses for\r\n   * insecure content like script references\r\n   *\r\n   * @param {string} keyName\r\n   * @param {string} keyValue\r\n   * @returns {boolean}\r\n   * @memberof CookieStorageService\r\n   */\r\n  public setKeyValue(keyName: string, keyValue: string): boolean {\r\n    if (keyValue == null) {\r\n      return false;\r\n    }\r\n    this.storage.set(keyName, keyValue, this._expires , this._path, this._domain);\r\n      // Second check for ensuring cookie is writeable\r\n      return this.storage.get(keyName) === keyValue;\r\n  }\r\n\r\n  /**\r\n   * The Object value wrapper for setting client storage dara\r\n   *\r\n   * @private\r\n   * @param {string} keyName\r\n   * @param {*} keyValue\r\n   * @returns boolean - true if stored otherwise false\r\n   * @memberof ClientStorageService\r\n   */\r\n  public setObjectValue(keyName: string, keyValue: any): boolean {\r\n    // note non-strict comparison allows for null or undefined\r\n    if (keyValue == null) {\r\n      return false;\r\n    }\r\n    return this.setKeyValue(keyName, JSON.stringify(keyValue));\r\n  }\r\n\r\n  /**\r\n   * Gets the client stored key valye\r\n   *\r\n   * @private\r\n   * @param {string} keyName\r\n   * @returns {string} null if not found\r\n   * @memberof ClientStorageService\r\n   */\r\n  public getKeyValue(keyName: string): string {\r\n    if (this.hasKey(keyName)) {\r\n      return this.storage.get(keyName);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Returns the JSON parsed object\r\n   * May be worth consiudering localised deserialisers\r\n   * for each model\r\n   * @private\r\n   * @param {string} keyName\r\n   * @returns {*} null object if not found\r\n   * @memberof ClientStorageService\r\n   */\r\n  public getKeyObjectValue(keyName: string): any {\r\n    const returnString = this.getKeyValue(keyName);\r\n    try {\r\n      return JSON.parse(returnString);\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }\r\n  /**\r\n   * Deletes a key\r\n   * @private\r\n   * @param {string} keyName\r\n   * @returns\r\n   * @memberof ClientStorageService\r\n   */\r\n  public deleteKey(keyName: string) {\r\n    if (this.hasKey(keyName)) {\r\n      this.storage.delete(keyName, this._path, this._domain);\r\n    }\r\n    return;\r\n  }\r\n  public clearData() {\r\n    this.storage.deleteAll(this._path, this._domain);\r\n    // this.storage.deleteAll('/', '/');\r\n    // this.storage.deleteAll();\r\n  }\r\n  public hasKey(keyName: string) {\r\n    return this.storage.check(keyName);\r\n  }\r\n}\r\n","import { StorageProvider } from '../../../global/contracts/services/storage.provider';\r\n\r\nexport class LocalStorageService extends StorageProvider  {\r\nprivate _domain: string;\r\n    /**\r\n * A generalised function for setting Key Value pairs in client\r\n * storage locations. Could add client side cache as well\r\n * @private\r\n * @param {string} keyName\r\n * @param {string} keyValue\r\n * @returns {boolean} true if stored otherwise false\r\n * @memberof ClientStorageService\r\n */\r\n    public setKeyValue(keyName: string, keyValue: string): boolean {\r\n        if (keyValue == null) {\r\n            return false;\r\n        }\r\n        try {\r\n            localStorage.setItem(keyName, keyValue);\r\n            return true;\r\n        } catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The Object value wrapper for setting client storage dara\r\n     *\r\n     * @private\r\n     * @param {string} keyName\r\n     * @param {*} keyValue\r\n     * @returns boolean - true if stored otherwise false\r\n     * @memberof ClientStorageService\r\n     */\r\n    public setObjectValue(keyName: string, keyValue: any) {\r\n        if (keyValue == null) {\r\n            return false;\r\n        }\r\n        return this.setKeyValue(keyName, JSON.stringify(keyValue));\r\n    }\r\n\r\n    /**\r\n     * Gets the client stored key valye\r\n     *\r\n     * @private\r\n     * @param {string} keyName\r\n     * @returns {string} Empty string if not found\r\n     * @memberof ClientStorageService\r\n     */\r\n    public getKeyValue(keyName: string): string {\r\n        try {\r\n            return localStorage.getItem(keyName);\r\n        } catch (e) {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the JSON parsed object\r\n     * May be worth consiudering localised deserialisers\r\n     * for each model\r\n     * @private\r\n     * @param {string} keyName\r\n     * @returns {*} null object if not found\r\n     * @memberof ClientStorageService\r\n     */\r\n    public getKeyObjectValue(keyName: string): any {\r\n        const returnString = this.getKeyValue(keyName);\r\n        try {\r\n            return JSON.parse(returnString);\r\n        } catch (e) {\r\n            return null;\r\n        }\r\n    }\r\n    /**\r\n     * Deletes a key\r\n     * @private\r\n     * @param {string} keyName\r\n     * @returns\r\n     * @memberof ClientStorageService\r\n     */\r\n    public deleteKey(keyName: string) {\r\n        try {\r\n            localStorage.removeItem(keyName);\r\n        } catch (e) {\r\n            return;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Deletes all storage\r\n     *\r\n     * @memberof LocalStorageService\r\n     */\r\n    public clearData() {\r\n        localStorage.clear();\r\n    }\r\n\r\n    public hasKey(keyName: string) {\r\n        return localStorage.getItem(keyName) !== null;\r\n    }\r\n    public setDomain(domain: string) {\r\n        this._domain = domain;\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { CookieStorageService } from './services/cookie-storage.service';\r\nimport { LocalStorageService } from './services/local-storage.service';\r\nimport { CookieService } from 'ngx-cookie-service';\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: [],\r\n  declarations: [],\r\n  providers: [\r\n    CookieService,\r\n    CookieStorageService,\r\n    LocalStorageService]\r\n})\r\nexport class StorageModule { }\r\n","import { JsonProperty } from 'json2typescript';\r\nimport { TagContract } from '../../../global/contracts/modules/tag.contract';\r\n\r\nexport class Tag implements TagContract {\r\n\r\n    @JsonProperty('id')\r\n    public id: number;\r\n\r\n    @JsonProperty('foreignId')\r\n    foreignId: number;\r\n\r\n    @JsonProperty('foreignType')\r\n    public foreignType: string;\r\n\r\n    @JsonProperty('name')\r\n    public name: string;\r\n\r\n    @JsonProperty('slug')\r\n    public slug: string;\r\n\r\n    @JsonProperty('suggest')\r\n    public suggest: string;\r\n\r\n    @JsonProperty('tagGroupID')\r\n    tagGroupID?: number;\r\n\r\n    @JsonProperty('count')\r\n    count?: number;\r\n\r\n    constructor( id: number, foreignId: number, foreignType: string, tag: string) {\r\n        this.foreignId      = foreignId;\r\n        this.id             = id;\r\n        this.foreignType    = foreignType;\r\n        this.name           = tag;\r\n    }\r\n}\r\n","import { Injectable, Inject } from '@angular/core';\r\nimport { Tag } from '../models/tag.model';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { AppConfig } from '../../../global/contracts/config/app-config';\r\nimport { APP_CONFIG } from '../../../app.config';\r\nimport { Observable } from 'rxjs';\r\nimport { TagHandlerService, TagContract } from '../../../global/contracts/modules/tag.contract';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class TagService extends TagHandlerService {\r\n\r\n  private selectedTags: Tag[] = [];\r\n\r\n  constructor(http: HttpClient, @Inject(APP_CONFIG) private config: AppConfig) {\r\n    super(config, http);\r\n  }\r\n  public setServiceUrl(config: AppConfig): string {\r\n    return config.baseUrl + config.httpServiceUrls.tags + config.defaultDataSuffix;\r\n  }\r\n  /**\r\n   * Mainly enforcing type safety. If you can access\r\n   * this and write to it - state won't be broken\r\n   * as init allows for write but you could accidently\r\n   * empty it.\r\n   * @returns\r\n   * @memberof selectedTags\r\n   */\r\n  public getAllFromList(): TagContract[] {\r\n    return this.selectedTags;\r\n  }\r\n\r\n  /**\r\n   * Set the selected Catagories from a list\r\n   *\r\n   * @param {Tag[]} selectedTags\r\n   * @memberof TagService\r\n   */\r\n  public initList(selectedTags: Tag[]): void {\r\n    this.selectedTags = selectedTags;\r\n  }\r\n\r\n\r\n  /**\r\n   * Select catagory and all parent categories\r\n   * And add them to selected list\r\n   * @private\r\n   * @param {number} tagId\r\n   * @memberof TagService\r\n   */\r\n  public addToList(alias: Tag): boolean {\r\n    if (!this.hasItem(alias.id)) {\r\n      // console.log(alias);\r\n      // console.log(alias.id);\r\n      // console.log(this.selectedTags);\r\n      this.selectedTags.push(alias);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Shallow remove. Will not remove parent categories for child.\r\n   * Could check for orphans - but it starts to seem unintuitve.\r\n   * @param {number} tagId\r\n   * @memberof TagService\r\n   */\r\n  public deleteFromList(tagId: number): boolean {\r\n    if (this.hasItem(tagId)) {\r\n      const index = this.selectedTags.findIndex(x => x.id === tagId);\r\n      this.selectedTags.splice(index, 1);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Get a category from a selected list\r\n   *\r\n   * @param {number} tagId\r\n   * @returns {Tag}\r\n   * @memberof TagService\r\n   */\r\n  public getItem(tagId: number): Tag {\r\n    return this.selectedTags.find(x => x.id === tagId);\r\n  }\r\n\r\n  /**\r\n   * Check if the category has already been selected\r\n   *\r\n   * @param {number} tagId\r\n   * @returns {boolean}\r\n   * @memberof TagService\r\n   */\r\n  public hasItem(tagId: number): boolean {\r\n    return (this.selectedTags.findIndex(x => x.id === tagId) !== -1);\r\n  }\r\n\r\n  /**\r\n   * Save the selected tags to the database\r\n   *\r\n   * @memberof TagService\r\n   */\r\n  public saveList(): Observable<Tag[]> {\r\n     this.selectedTags.forEach(element => {\r\n      this.create(element);\r\n    });\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param type Get tags via http\r\n   * @param allowLocal\r\n   */\r\n  public getTagsForType(type: string): Observable<Tag[]> {\r\n    return this.http.get<{data: Tag[]}>(this.serviceUrl + '?foreignType=' + type).pipe(map(\r\n      item => item.data));\r\n  }\r\n}\r\n","// core\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\r\n\r\n// 3rd party\r\nimport { TagInputModule } from 'ngx-chips';\r\n\r\n// services\r\nimport { TagService } from './services/tag.service';\r\n\r\n// components\r\nimport { TagSearchComponent } from './components/tag-search/tag-search.component';\r\nimport { TagFormComponent } from './components/tag-form/tag-form.component';\r\nimport { BadgeComponent } from './components/badge/badge.component';\r\nimport { RouterModule } from '@angular/router';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    TagInputModule,\r\n    RouterModule\r\n  ],\r\n  declarations: [\r\n    TagSearchComponent,\r\n    TagFormComponent,\r\n    BadgeComponent],\r\n  exports: [\r\n    TagSearchComponent,\r\n    TagFormComponent,\r\n    BadgeComponent ],\r\n    providers: [TagService]\r\n})\r\nexport class TagsModule { }\r\n","import { ProductContract } from '../../../global/contracts/modules/products.contract';\r\n\r\nexport class WishlistProducts implements ProductContract {\r\n    productID: number;\r\n    shopID: number;\r\n    shopName?: string;\r\n    title?: string;\r\n    slug: string;\r\n    description: string;\r\n    originalPrice?: number;\r\n    discountPrice?: number;\r\n    stock?: number;\r\n    trackInventory?: boolean;\r\n    mainImage?: string;\r\n    secondaryImageUrl?: string;\r\n    onSale?: boolean;\r\n    tagProduct?: boolean;\r\n    selected: boolean;\r\n}\r\nexport class Wishlist {\r\n    public products: WishlistProducts[] = [];\r\n    public userId: number;\r\n    constructor( userId: number ) {\r\n        this.userId = userId;\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n// rxjs\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n// Models\r\nimport { Wishlist, WishlistProducts } from '../models/wishlist.model';\r\nimport { ProductContract } from '../../../global/contracts/modules/products.contract';\r\n@Injectable()\r\nexport class WishlistService {\r\n  private wishlist: BehaviorSubject<Wishlist>;\r\n  // Probably need to inject localStorage\r\n  constructor() {\r\n    this.wishlist = new BehaviorSubject < Wishlist >( {\r\n      userId: 1,\r\n      products: []\r\n    } );\r\n    // if ( localStorage.getItem('wishlist') ) {\r\n    //   this.wishlist.next(JSON.parse(localStorage.getItem('wishlist')) );\r\n    // }\r\n  }\r\n\r\n  createWishlist( userId: number ) {\r\n    const list = new Wishlist( userId );\r\n    this.wishlist.next( list );\r\n  }\r\n\r\n  public hasProduct(productId: ProductContract): boolean {\r\n    const list = this.wishlist.getValue();\r\n    return (list.products.findIndex(x => x.productID === productId.productID) !== -1);\r\n  }\r\n  addProduct(productId: ProductContract) {\r\n    const list = this.wishlist.getValue();\r\n    const Index = list.products.findIndex(x => x.productID === productId.productID);\r\n    if (Index === -1) {\r\n      list.products.push(productId as WishlistProducts);\r\n      this.wishlist.next(list);\r\n      localStorage.setItem('wishlist', JSON.stringify( this.wishlist.getValue() ) );\r\n    }\r\n  }\r\n  deleteProduct(productId: number) {\r\n    const list = this.wishlist.getValue();\r\n    const index = list.products.findIndex(x => x.productID === productId);\r\n    list.products.splice(index, 1);\r\n    this.wishlist.next(list);\r\n    localStorage.setItem('wishlist', JSON.stringify(this.wishlist.getValue()));\r\n  }\r\n  getWishlist(): BehaviorSubject<Wishlist> {\r\n    if (localStorage.getItem('wishlist')) {\r\n      this.wishlist.next(JSON.parse(localStorage.getItem('wishlist')));\r\n    }\r\n    return this.wishlist;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { WishlistService } from './services/wishlist.service';\r\nimport { WishlistMenuComponent } from './components/wishlist-menu/wishlist-menu.component';\r\nimport { WishlistSelecterComponent } from './components/wishlist-selecter/wishlist-selecter.component';\r\nimport { WishlistItemComponent } from './components/wishlist-item/wishlist-item.component';\r\nimport { RouterModule } from '@angular/router';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule\r\n  ],\r\n  declarations: [WishlistMenuComponent, WishlistSelecterComponent, WishlistItemComponent],\r\n  providers: [\r\n    WishlistService,\r\n  ],\r\n  exports: [\r\n    WishlistMenuComponent,\r\n  WishlistSelecterComponent]\r\n})\r\nexport class WishlistModule { }\r\n","import { RestfulService, ConcreteRestfulService } from '../services/restful-service.abstract';\r\nimport { ListHandler } from '../services/list-handler.interface';\r\nimport { TypeContract } from './tag.contract';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\nexport interface CategoryContract extends TypeContract {\r\n    parentCategoryId: number;\r\n    subCategories?: CategoryContract[];\r\n    depth?: number;\r\n    name: string;\r\n    id: number;\r\n}\r\n\r\nexport abstract class CategoryHandler implements ListHandler<CategoryContract> {\r\n    public abstract hasItem(itemId: number): boolean;\r\n\r\n    public abstract getItem(itemId: number): CategoryContract;\r\n\r\n    public abstract initList(listItems: CategoryContract[]): void;\r\n\r\n    public abstract addToList(newCtagory: CategoryContract): void;\r\n\r\n    public abstract deleteFromList(itemId: number): boolean;\r\n\r\n    public abstract getAllFromList(): CategoryContract[];\r\n\r\n    public abstract removeCategory(cat: CategoryContract, depth?: number):  void;\r\n\r\n    public abstract applyFilters(filteredIds: number[], boxIndex: number): void;\r\n\r\n    public abstract resetCategories(): void;\r\n\r\n    public abstract getCategoryState(): BehaviorSubject<boolean>;\r\n\r\n    public abstract getLevels(depth?: number): number[];\r\n}\r\n\r\nexport abstract class CategoryProvider extends ConcreteRestfulService<CategoryContract> {\r\n\r\n}\r\n","import { RestfulService, ConcreteRestfulService } from '../services/restful-service.abstract';\r\nimport { JsonProperty } from 'json2typescript';\r\n\r\nexport interface FileContract {\r\n    getId(): number;\r\n    getUrl(): string;\r\n}\r\n\r\nexport interface ImageContract extends FileContract {\r\n   caption: string;\r\n}\r\nexport abstract class ImageHandlerService extends ConcreteRestfulService<ImageContract> {\r\n}\r\n","import { RestfulService, ConcreteRestfulService } from '../services/restful-service.abstract';\r\nimport { ListHandler } from '../services/list-handler.interface';\r\nimport { TypeContract, TagContract } from './tag.contract';\r\nimport { ShopInterface } from './shop.contract';\r\nimport { CategoryContract } from './category.contract';\r\nimport { ImageContract } from './image.contract';\r\n\r\nimport { Observable } from 'rxjs';\r\nimport { InjectionToken } from '@angular/core';\r\n\r\nexport interface ProductContract {\r\n    productID: number;\r\n    shopID: number;\r\n    shopName?: string;\r\n    title?: string;\r\n    slug: string;\r\n    description: string;\r\n    originalPrice?: number;\r\n    discountPrice?: number;\r\n    stock?: number;\r\n    trackInventory?: boolean;\r\n    mainImage?: string;\r\n    secondaryImageUrl?: string;\r\n    onSale?: boolean;\r\n    tagProduct?: boolean;\r\n}\r\n\r\nexport interface ProductsProvider {\r\n    getProductsForCategoryId( id: number): Observable<ProductContract[]>;\r\n    getProductsForShopId(id: number): Observable<ProductContract[]>;\r\n    getProductsForTagId(id: number): Observable<ProductContract[]>;\r\n    getAll(): Observable<ProductContract[]>;\r\n}\r\nexport let PRODUCTS_PROVIDER = new InjectionToken<ProductsProvider>('PRODUCTS_PROVIDER');\r\n","import { InjectionToken } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { CategoryContract } from './category.contract';\r\n\r\nexport interface ShopInterface {\r\n    id: number;\r\n    name: string;\r\n    userId: number;\r\n    shopOpen: boolean;\r\n    shopCategories: CategoryContract[];\r\n}\r\nexport interface ShopProvider {\r\n    getUserShop(userId: number): Observable<ShopInterface>;\r\n}\r\nexport let SHOP_PROVIDER = new InjectionToken<ShopProvider>('SHOP_PROVIDER');\r\n","import { RestfulService, ConcreteRestfulService } from '../services/restful-service.abstract';\r\nimport { ListHandler, SyncedListHandler } from '../services/list-handler.interface';\r\nimport { Observable } from 'rxjs';\r\n\r\n// So the thing is - what does another module care about annotations?\r\n// Thay are mainly sued for mapping on Request purposes.\r\n// So adding them to the contract is weird\r\n// But we may not have a choice - so suck it up? or use interfaces?\r\n// But as shown before interfaces are limited\r\nexport interface TypeContract {\r\n    id: number;\r\n    name: string;\r\n}\r\n\r\nexport interface TagContract extends TypeContract {\r\n    foreignType: string;\r\n    foreignId: number;\r\n    slug: string;\r\n    suggest: string;\r\n    tagGroupID ?: number;\r\n    count?: number;\r\n\r\n}\r\n\r\n/**\r\n * The contract expected of a Tag Handler\r\n *\r\n * @export\r\n * @abstract\r\n * @class TagHandlerService\r\n * @extends {RestfulService<TagContract>}\r\n * @implements {ListHandler<TagContract>}\r\n */\r\nexport abstract class TagHandlerService extends ConcreteRestfulService<TagContract> implements SyncedListHandler<TagContract> {\r\n    public abstract hasItem(itemId: number): boolean;\r\n\r\n    public abstract getItem(itemId: number): TagContract;\r\n\r\n    public abstract saveList(): Observable<TagContract[]>;\r\n\r\n    public abstract initList(listItems: TagContract[]): void;\r\n\r\n    public abstract addToList(newCtagory: TagContract): void;\r\n\r\n    public abstract deleteFromList(itemId: number): boolean;\r\n\r\n    public abstract getAllFromList(): TagContract[];\r\n\r\n    public abstract getTagsForType(type: string): Observable<TagContract[]>;\r\n\r\n\r\n}\r\n","import { Observable, BehaviorSubject } from 'rxjs';\r\n\r\n// Models\r\nimport { UserInterface, UserWithProfile, UserProfileContract } from '../modules/user.contract';\r\n\r\nexport interface AuthenticationProviderInterface {\r\n    login(userName: string, password: string): Observable<UserInterface>;\r\n    logout();\r\n    // Handled by storage provider or Authentication provider I wonder? Too specific!\r\n    // As couple to JWT\r\n    getAuthToken(): string;\r\n    checkRoles(expectedRoles: string[]): boolean;\r\n    hasRole(role: string): boolean;\r\n    getAuthUser(): UserWithProfile;\r\n    isAuthenticated(): boolean;\r\n    getAuthProfile(): UserProfileContract;\r\n    refreshSession(): void;\r\n    authenticate(userName: string, password: string): Observable<any>;\r\n    subscribeAuthProfile(): BehaviorSubject<UserProfileContract>;\r\n}\r\n\r\n/**\r\n * Base Class for authentication Providers\r\n * @export\r\n * @abstract\r\n * @class BaseAuthenticationProvider\r\n * @implements {AuthenticationProvider}\r\n */\r\nexport abstract class AuthenticationProvider implements AuthenticationProviderInterface {\r\n\r\n    abstract login(userName: string, password: string): Observable<UserInterface>;\r\n    abstract logout(): boolean;\r\n    // Handled by storage provider or Authentication provider I wonder?\r\n    abstract getAuthToken(): string;\r\n    abstract checkRoles(expectedRoles: string[]): boolean;\r\n    abstract hasRole(role: string): boolean;\r\n    abstract getAuthUser(): UserWithProfile;\r\n    abstract isAuthenticated(): boolean;\r\n    abstract getAuthProfile(): UserProfileContract;\r\n    abstract updateAuthProfile(profile: UserProfileContract);\r\n    abstract refreshSession(): void;\r\n    abstract authenticate(userName: string, password: string): Observable<any>;\r\n    abstract subscribeAuthProfile(): BehaviorSubject<UserProfileContract>;\r\n}\r\n","import { Observable } from 'rxjs';\r\nimport { AppConfig } from '../../../global/contracts/config/app-config';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nexport abstract class RestfulService<T> {\r\n    public readonly serviceUrl: string;\r\n    public abstract getAll(): Observable<T[]>;\r\n    public abstract getOne(id: any): Observable<T>;\r\n    public abstract create(model: T): Observable<T>;\r\n    public abstract update(model: T): Observable<T>;\r\n    public abstract delete(id: string): Observable<T>;\r\n    public abstract setServiceUrl(config: AppConfig): string;\r\n\r\n    constructor(config: AppConfig) {\r\n        this.serviceUrl = this.setServiceUrl(config);\r\n    }\r\n}\r\nexport abstract class ConcreteRestfulService<T> extends RestfulService<T> {\r\n\r\n    public getAll(): Observable<T[]> {\r\n        return this.http.get<T[]>(this.serviceUrl);\r\n    }\r\n    public getOne(id: any): Observable<T> {\r\n        return this.http.get<T>(this.serviceUrl + '/' + id);\r\n    }\r\n    public create(model: T): Observable<T> {\r\n        return this.http.post<T>(this.serviceUrl, model);\r\n    }\r\n    public update(model: T): Observable<T> {\r\n        return this.http.put<T>(this.serviceUrl, model);\r\n    }\r\n    public delete(id: string): Observable<T> {\r\n        return this.http.delete<T>(this.serviceUrl + '/' + id);\r\n    }\r\n    public abstract setServiceUrl(config: AppConfig): string;\r\n\r\n    constructor(config: AppConfig, protected http: HttpClient ) {\r\n        super(config);\r\n    }\r\n}\r\n","import { JsonConvert, OperationMode, ValueCheckingMode } from 'json2typescript';\r\nimport { Type } from '@angular/core';\r\n\r\nexport interface ISerialisable {\r\n    deserialiseJson(json: string, objectType: any);\r\n    serialiseJson(data: any);\r\n}\r\n/**\r\n * A (nearly) purely abstract class becuase interfaces are somewaht useless\r\n * in Angular's Dependency Injection strategy. Annoying because I\r\n * can see a great candidate for making a storageProivder implement\r\n * an Observable Interface for allowing subscription based models\r\n * I would want to inject an Observable variant of my storage Accessor\r\n * But I can't - meaning I now need to create some class just for\r\n * Obeservables and build a class Heirarchy around it.\r\n * @export\r\n * @abstract\r\n * @class StorageProvider\r\n */\r\nexport abstract class StorageProvider implements ISerialisable {\r\n\r\n    jsonConvert: JsonConvert;\r\n\r\n    constructor() {\r\n        this.jsonConvert = new JsonConvert();\r\n    }\r\n    /**\r\n     * Set a key/string value pair\r\n     * @param {string} keyName\r\n     * @param {string} keyValue\r\n     * @returns {boolean}\r\n     * @memberof StorageProvider\r\n     */\r\n    abstract setKeyValue(keyName: string, keyValue: string): boolean;\r\n    /**\r\n     * The Object value wrapper for setting client storage dara\r\n     *\r\n     * @private\r\n     * @param {string} keyName\r\n     * @param {*} keyValue\r\n     * @returns boolean - true if stored otherwise false\r\n     * @memberof ClientStorageService\r\n     */\r\n    abstract setObjectValue(keyName: string, keyValue: any);\r\n    /**\r\n     * Gets the client stored key valye\r\n     *\r\n     * @private\r\n     * @param {string} keyName\r\n     * @returns {string} Empty string if not found\r\n     * @memberof ClientStorageService\r\n     */\r\n    abstract getKeyValue(keyName: string): string;\r\n    /**\r\n     * Returns the JSON parsed object\r\n     * May be worth consiudering localised deserialisers\r\n     * for each model\r\n     * @private\r\n     * @param {string} keyName\r\n     * @returns {*} null object if not found\r\n     * @memberof ClientStorageService\r\n     */\r\n    abstract getKeyObjectValue(keyName: string);\r\n    /**\r\n     * Deletes a key\r\n     * @private\r\n     * @param {string} keyName\r\n     * @returns\r\n     * @memberof ClientStorageService\r\n     */\r\n    abstract deleteKey(keyName: string);\r\n\r\n    abstract clearData();\r\n\r\n    public deserialiseJson(json: string, objectType: any) {\r\n        return this.jsonConvert.deserialize(json, objectType);\r\n    }\r\n    public serialiseJson(data: any) {\r\n        this.jsonConvert.serialize(data);\r\n    }\r\n    public abstract hasKey(keyName: string);\r\n    public abstract setDomain(domain: string);\r\n}\r\n","// Core Imports\r\nimport { InjectionToken } from '@angular/core';\r\n\r\n// local imports\r\nimport { BrowserConfig } from './browser-config';\r\n\r\n//  Create Token\r\nexport const BROWSER_CONFIG = new InjectionToken<BrowserConfig>('app.config');\r\n\r\nexport const FKBrowserConfig: BrowserConfig = {\r\n    defaultBrowserHeight: 980,\r\n    defaultBrowserWidth: 1440,\r\n    defaultSceenHeight: 980,\r\n    defaultSceenWidth: 1440,\r\n    bannerHeight: 142\r\n};\r\n","    <div *ngIf=\"blocked\" class=\"loadRoute\">\r\n        <i class=\" fas fa-circle-notch fa-spin fa-4x \"></i>\r\n    </div>\r\n<app-fk-dialog header=\"Session Timeout\" [(visible)]=\"timeOut\" [width]=\"600\" [height]=\"500\" (onHide)=\"resetTimer()\">\r\n<p>To keep your products secure, your session has timed out. To log back in, please refresh the browser or click the button\r\n    below.\r\n</p>\r\n<p>\r\n    If you were in the middle of working. Please close this dialogue and copy any text you might need before logging in again.\r\n</p>\r\n<button class=\"btn btn-primary\" (click)=\"login()\">Log in\r\n    <i class=\"far fa-sign-in icon-right\"></i>\r\n</button>\r\n</app-fk-dialog>\r\n<app-fk-dialog header=\"Session Idle\" [(visible)]=\"idle\" [width]=\"600\" [height]=\"500\" (onHide)=\"resetTimer()\">\r\n    <p>You have been away from your computer for a while. If you want to refresh your session click below.\r\n    </p>\r\n    <button class=\"btn btn-primary\" (click)=\"refresh()\">Refresh\r\n        <i class=\"far fa-sync\"></i>\r\n    </button>\r\n</app-fk-dialog>","// Core\r\nimport { Component, Renderer2, OnInit, AfterViewInit, HostListener } from '@angular/core';\r\nimport { Router, NavigationEnd, NavigationStart, } from '@angular/router';\r\n\r\n// 3rd party\r\nimport { UserIdleService } from 'angular-user-idle';\r\n//\r\nimport { BrowserHandlerService } from '../../services/browser-handler.service';\r\nimport { AuthenticationProvider } from '../../../contracts/services/authentication.provider';\r\nimport { BrowserState } from '../../models/browser.model';\r\n\r\n@Component({\r\n  selector: 'app-browser-events',\r\n  templateUrl: './browser-events.component.html',\r\n  styleUrls: ['./browser-events.component.scss']\r\n})\r\nexport class BrowserEventsComponent implements OnInit, AfterViewInit {\r\n  blocked = false;\r\n  sessionTime = 0;\r\n  timeOut = false;\r\n  idle = false;\r\n  private _pingSubscribe;\r\n  constructor(private router: Router, private renderer: Renderer2, private browserHandler: BrowserHandlerService,\r\n    private userIdle: UserIdleService, private _auth: AuthenticationProvider) {}\r\n\r\n  @HostListener('window:resize') onResize() {\r\n    this.browserHandler.setWindowSize(window.innerWidth, window.innerHeight);\r\n    this.browserHandler.setDeviceSize(window.outerWidth, window.outerHeight);\r\n  }\r\n\r\n  @HostListener('window:scroll') onScroll() {\r\n    this.browserHandler.setScrollPosition( window.scrollX, window.scrollY );\r\n  }\r\n  @HostListener('window:waiting') onWaiting() {\r\n    // console.log('wait');\r\n  }\r\n  @HostListener('document:readystatechange') onDocReady() {\r\n    this.browserHandler.setPageReady();\r\n    // console.log('ready');\r\n  }\r\n  ngOnInit() {\r\n    this.browserHandler.setWindowSize( window.innerWidth, window.innerHeight );\r\n    this.browserHandler.setDeviceSize(window.outerWidth, window.outerHeight );\r\n    this.browserHandler.getAppVariables().subscribe((val) => {\r\n      (val.browser.scrollY > val.bannerHeight) ?\r\n        this.renderer.addClass(document.body, 'scrolled') : this.renderer.removeClass(document.body, 'scrolled');\r\n      if ( val.menuState.open ) {\r\n        this.renderer.addClass(document.body, 'menu-open');\r\n        this.renderer.removeClass(document.body, 'scrolled');\r\n        window.scrollTo(0, 0);\r\n      } else {\r\n        this.renderer.removeClass(document.body, 'menu-open');\r\n      }\r\n    });\r\n    this.browserHandler.getBrowserState().subscribe(state => {\r\n      if (state === BrowserState.beforeChange) {\r\n        // this.blocked = true;\r\n        if (this._auth.isAuthenticated()) {\r\n          console.log('refreshed session');\r\n          this.refresh();\r\n        }\r\n        // Browser\r\n        this.browserHandler.validateChange();\r\n      } else if (state === BrowserState.afterChange) {\r\n        // console.log('done');\r\n        this.blocked = false;\r\n      } else if (state === BrowserState.sessionEnded) {\r\n        if (this._pingSubscribe !== undefined) {\r\n          this._pingSubscribe.unsubscribe();\r\n        }\r\n        this.userIdle.stopTimer();\r\n      }\r\n    });\r\n\r\n    if (this._auth.isAuthenticated()) {\r\n      // Start watching when user idle is starting.\r\n      // Start watch when time is up.\r\n      this.userIdle.startWatching();\r\n      this._pingSubscribe = this.userIdle.ping$.subscribe( value =>\r\n        this.checkIdleState(value));\r\n  }\r\n  }\r\n  checkIdleState(value: number ) {\r\n    console.log(value);\r\n    if (value > (this.userIdle.getConfigValue().idle / this.userIdle.getConfigValue().ping)) {\r\n      this.idle = true;\r\n    }\r\n    if (value > (this.userIdle.getConfigValue().timeout / this.userIdle.getConfigValue().ping)) {\r\n      this.idle = false;\r\n      this.timeOut = true;\r\n    }\r\n  }\r\n  ngAfterViewInit(): void {\r\n\r\n    this.router.events.subscribe((evt) => {\r\n      if (evt instanceof NavigationStart) {\r\n       this.browserHandler.startChange();\r\n       this.browserHandler.setPageLoading();\r\n      }\r\n      if (evt instanceof NavigationEnd) {\r\n        this.browserHandler.setPageReady();\r\n        if (this._pingSubscribe === undefined ) {\r\n          if (this._auth.isAuthenticated()) {\r\n            // Start watching when user idle is starting.\r\n            // Start watch when time is up.\r\n            this.userIdle.startWatching();\r\n            this._pingSubscribe = this.userIdle.ping$.subscribe(value =>\r\n              this.checkIdleState(value));\r\n            }\r\n        }\r\n        this.renderer.addClass(document.body, 'end-loading');\r\n        setTimeout(() => { this.startApp(); }, 1500);\r\n      }\r\n      if (!(evt instanceof NavigationEnd)) {\r\n        return;\r\n      }\r\n      window.scrollTo(0, 0);\r\n    });\r\n  }\r\n\r\n  startApp() {\r\n    this.renderer.addClass(document.body, 'loaded');\r\n    this.renderer.removeClass(document.body, 'end-loading');\r\n    this.browserHandler.setPageLoaded();\r\n    this.browserHandler.completeChange();\r\n  }\r\n  login() {\r\n    if (this._pingSubscribe ) {\r\n      this._pingSubscribe.unsubscribe();\r\n    }\r\n    this._auth.logout();\r\n    this.timeOut = false;\r\n    this.router.navigateByUrl('/login');\r\n  }\r\n  resetTimer() {\r\n    // console.log('triggers');\r\n    this.userIdle.stopTimer();\r\n    if (this._pingSubscribe !== undefined) {\r\n      this._pingSubscribe.unsubscribe();\r\n    }\r\n    this.userIdle.startWatching();\r\n    this._pingSubscribe = this.userIdle.ping$.subscribe(value =>\r\n      this.checkIdleState(value));\r\n  }\r\n  refresh() {\r\n    this._auth.refreshSession();\r\n    this.idle = false;\r\n    this.resetTimer();\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n// config\r\nimport { BROWSER_CONFIG, FKBrowserConfig } from './browser.config';\r\n// components\r\nimport { BrowserEventsComponent } from './components/browser-events/browser-events.component';\r\n\r\n// services\r\nimport { BrowserHandlerService} from './services/browser-handler.service';\r\nimport { UserIdleModule } from 'angular-user-idle';\r\nimport { BlockUIModule } from 'primeng/blockui';\r\nimport { DialogModule } from 'primeng/dialog';\r\nimport { FkFormsModule } from '../../core/fk-forms/fk-forms.module';\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    UserIdleModule.forRoot({ idle: 1200, timeout: 6000, ping: 60 }),\r\n    FkFormsModule\r\n  ],\r\n  exports: [\r\n    BrowserEventsComponent\r\n  ],\r\n  providers: [\r\n    BrowserHandlerService,\r\n    { provide: BROWSER_CONFIG, useValue: FKBrowserConfig }\r\n  ],\r\n  declarations: [BrowserEventsComponent]\r\n})\r\nexport class FKBrowserModule { }\r\n","export enum BrowserType {\r\n    Firefox,\r\n    Chrome,\r\n    IE,\r\n    Edge,\r\n    Safari,\r\n    Opera\r\n}\r\n\r\nexport enum BrowserState {\r\n    loading,\r\n    loaded,\r\n    init,\r\n    beforeChange,\r\n    changeValid,\r\n    afterChange,\r\n    sessionEnded\r\n}\r\nexport class Browser {\r\n    browserType: BrowserType;\r\n    browserVersion: string;\r\n    deviceWidth: number;\r\n    deviceHeight: number;\r\n    screenHeight: number;\r\n    screenWidth: number;\r\n    browserState: BrowserState;\r\n    scrollX: number;\r\n    scrollY: number;\r\n}\r\n","import { Injectable, Inject } from '@angular/core';\r\n\r\n// rxjs\r\nimport { Observable, BehaviorSubject } from 'rxjs';\r\n\r\n// Central\r\nimport { BrowserConfig } from '../browser-config';\r\nimport { BROWSER_CONFIG } from '../browser.config';\r\n\r\n// import { }\r\nimport { AppVariables } from '../models/app-variables.model';\r\nimport { Browser, BrowserState, BrowserType } from '../models/browser.model';\r\nimport { Comment } from '@angular/compiler';\r\n\r\n@Injectable()\r\nexport class BrowserHandlerService {\r\n  private appVariables: BehaviorSubject<AppVariables>;\r\n  private docReady: BehaviorSubject<boolean>;\r\n  private stateChange: BehaviorSubject<BrowserState> = new BehaviorSubject<BrowserState>(BrowserState.init);\r\n\r\n  constructor(@Inject(BROWSER_CONFIG) private config: BrowserConfig) {\r\n    // Set Default values from config\r\n    this.appVariables = new BehaviorSubject<AppVariables >({\r\n      bannerHeight: config.bannerHeight,\r\n      currentBodyClass: '',\r\n      menuState: {\r\n        open: false,\r\n        subMenuOpen: false\r\n      },\r\n      browser: {\r\n      browserState: BrowserState.loading,\r\n      browserType: BrowserType.Chrome,\r\n      browserVersion: '0',\r\n      deviceWidth: config.defaultSceenWidth,\r\n      deviceHeight: config.defaultSceenHeight,\r\n      screenWidth: config.defaultBrowserWidth,\r\n      screenHeight: config.defaultBrowserHeight,\r\n      scrollX: 0,\r\n      scrollY: 0\r\n    }});\r\n    this.docReady = new BehaviorSubject<boolean>(false);\r\n  }\r\n  getDocReady(): BehaviorSubject<boolean> {\r\n    return this.docReady;\r\n  }\r\n  setPageLoading() {\r\n    const copied = this.appVariables.getValue();\r\n    copied.browser.browserState = BrowserState.loading;\r\n    this.appVariables.next(copied);\r\n    this.docReady.next(false);\r\n    this.stateChange.next(BrowserState.loading);\r\n  }\r\n  setPageLoaded() {\r\n    const copied = this.appVariables.getValue();\r\n    copied.browser.browserState = BrowserState.loaded;\r\n    this.appVariables.next(copied);\r\n    this.stateChange.next(BrowserState.loaded);\r\n  }\r\n  setPageReady() {\r\n    this.docReady.next(true);\r\n    this.stateChange.next(BrowserState.loaded);\r\n  }\r\n  getBrowserState(): BehaviorSubject<BrowserState> {\r\n    return this.stateChange;\r\n  }\r\n  startChange(): void {\r\n    this.stateChange.next(BrowserState.beforeChange);\r\n  }\r\n  completeChange(): void {\r\n    this.stateChange.next(BrowserState.afterChange);\r\n  }\r\n  validateChange(): void {\r\n    this.stateChange.next(BrowserState.changeValid);\r\n  }\r\n  toggleMenu() {\r\n    const copied = this.appVariables.getValue();\r\n    copied.menuState.open = !copied.menuState.open;\r\n    if (!copied.menuState.open) {\r\n      copied.menuState.subMenuOpen = false;\r\n    }\r\n    this.appVariables.next(copied);\r\n  }\r\n  setSessionEnd() {\r\n    this.stateChange.next(BrowserState.sessionEnded);\r\n  }\r\n  toggleSubMenu() {\r\n    const copied = this.appVariables.getValue();\r\n    copied.menuState.subMenuOpen = !copied.menuState.subMenuOpen;\r\n    this.appVariables.next(copied);\r\n  }\r\n\r\n  setBannerHeight( newHeight: number ) {\r\n    const copied = this.appVariables.getValue();\r\n    copied.bannerHeight = newHeight;\r\n    this.appVariables.next(copied);\r\n  }\r\n\r\n  setWindowSize( x: number, y: number) {\r\n    const copied = this.appVariables.getValue();\r\n    copied.browser.screenWidth = x;\r\n    copied.browser.screenHeight = y;\r\n    this.appVariables.next(copied);\r\n  }\r\n  setDeviceSize(x: number, y: number) {\r\n    const copied = this.appVariables.getValue();\r\n    copied.browser.deviceWidth = x;\r\n    copied.browser.deviceHeight = y;\r\n    this.appVariables.next(copied);\r\n  }\r\n\r\n  setScrollPosition(x: number, y: number) {\r\n    const copied = this.appVariables.getValue();\r\n    copied.browser.scrollX = x;\r\n    copied.browser.scrollY = y;\r\n    this.appVariables.next(copied);\r\n  }\r\n  setBodyClass(cssClass: string ) {\r\n    const copied = this.appVariables.getValue();\r\n    copied.currentBodyClass = cssClass;\r\n    this.appVariables.next(copied);\r\n  }\r\n\r\n  // Changes in global app variable state\r\n  getAppVariables(): BehaviorSubject<AppVariables> {\r\n    return this.appVariables;\r\n  }\r\n}\r\n","<p>\n  admin-dashboard works!\n</p>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-admin-dashboard',\n  templateUrl: './admin-dashboard.component.html',\n  styleUrls: ['./admin-dashboard.component.scss']\n})\nexport class AdminDashboardComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<p>\n  all-products works!\n</p>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-all-products',\n  templateUrl: './all-products.component.html',\n  styleUrls: ['./all-products.component.scss']\n})\nexport class AllProductsComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<p>\n  approve-products works!\n</p>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-approve-products',\n  templateUrl: './approve-products.component.html',\n  styleUrls: ['./approve-products.component.scss']\n})\nexport class ApproveProductsComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<p>\n  categories works!\n</p>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-categories',\n  templateUrl: './categories.component.html',\n  styleUrls: ['./categories.component.scss']\n})\nexport class CategoriesComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<p>\n  collections works!\n</p>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-collections',\n  templateUrl: './collections.component.html',\n  styleUrls: ['./collections.component.scss']\n})\nexport class CollectionsComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<p>\n  featured-products works!\n</p>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-featured-products',\n  templateUrl: './featured-products.component.html',\n  styleUrls: ['./featured-products.component.scss']\n})\nexport class FeaturedProductsComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<h2 class=\"page-heading\">Feature Slider</h2>\n<div class=\"content-inner\">\n \n <div class=\"new-item\"><button class=\"btn btn-new\"><i class=\"far fa-plus-circle\"></i> New Feature Slide</button></div>\n \n  <form class=\"form card-style\">\n    <fieldset class=\"form-group accordian\">\n      <div class=\"control-buttons\">\n        <button class=\"non-button\"><i class=\"far fa-trash-alt\"></i></button>\n        <div class=\"moveable\"><i class=\"far fa-ellipsis-v\"></i></div>\n      </div>\n      <h3 class=\"form-group-heading\" (click)=\"status=!status\"  \n    [ngClass]=\"status ? 'open' : ''\"><span><i class=\"far fa-angle-down\"></i></span> Handmade Natural Beauty</h3>\n      <div class=\"accordian-content\">\n        <div class=\"form-row\">\n          <label>Slide Text</label>\n          <div class=\"input-group has-prefix\">\n            <div class=\"input-group-prepend\"> <span class=\"input-group-text\"><i class=\"far fa-heading\"></i></span> </div>\n            <input type=\"text\" class=\"form-control\" value=\"Handmade Natural Beauty\"> </div>\n        </div>\n        <div class=\"form-row\">\n          <label>Button Text</label>\n          <div class=\"input-group has-prefix\">\n            <div class=\"input-group-prepend\"> <span class=\"input-group-text\"><i class=\"far fa-font\"></i></span> </div>\n            <input type=\"text\" class=\"form-control\" value=\"Shop the Collection\"> </div>\n        </div>\n        <div class=\"form-row\">\n          <label>Button Colour</label>\n          <div class=\"input-group has-prefix\">\n            <div class=\"input-group-prepend\"> <span class=\"input-group-text\"><i class=\"far fa-palette\"></i></span> </div>\n            <select class=\"form-control\">\n              <option>Please choose a button colour...</option>\n              <option value=\"blue\">Blue</option>\n              <option value=\"green\" selected>Green</option>\n              <option value=\"red\">Red</option>\n              <option value=\"black\">Black</option>\n              <option value=\"black\">White</option>\n            </select>\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <label>URL</label>\n          <div class=\"input-group has-prefix lookup\">\n            <div class=\"input-group-prepend\"> <span class=\"input-group-text\"><i class=\"far fa-link\"></i></span> </div>\n            <input type=\"text\" class=\"form-control\" placeholder=\"Paste a link or search\" value=\"/collections/handmade-natural-beauty\"> </div>\n        </div>\n        <div class=\"form-row\">\n          <label>Image</label>\n          <div class=\"product-image-control\">\n            <div class=\"image-controls control-buttons\">\n              <button class=\"non-button float-right remove\"> <span class=\"hidden\">Remove</span> <i class=\"fas fa-trash-alt\"></i> </button>\n            </div>\n            <div class=\"image-wrap\"> <img src=\"http://www.thefinderskeepers.com/img/home-banners/syd-ss17-4.jpg\"> </div>\n          </div>\n        </div>\n        <div class=\"form-row radio inline separator\">\n          <label>\n            <div class=\"fk-checkbox\">\n              <input type=\"radio\" name=\"visibility-slide-1\" checked> <i class=\"checked fas fa-dot-circle\"></i> <i class=\"unchecked fal fa-circle\"></i> </div> Visible </label>\n          <label>\n            <div class=\"fk-checkbox\">\n              <input type=\"radio\" name=\"visibility-slide-1\"> <i class=\"checked fas fa-dot-circle\"></i> <i class=\"unchecked fal fa-circle\"></i> </div> Hidden </label>\n          <p class=\"float-right\"><a href=\"#\">Set a specific publish date</a></p>\n        </div>\n        <div class=\"form-row\">\n          <div class=\"row\">\n            <div class=\"col-md-6\">\n              <label>Publish Date</label>\n              <div class=\"input-group has-prefix\">\n                <div class=\"input-group-prepend\"> <span class=\"input-group-text\"><i class=\"far fa-calendar-alt\"></i></span> </div>\n                <input type=\"text\" class=\"form-control\">\n              </div>\n            </div>\n            <div class=\"col-md-6\">\n              <label>Unpublish Date</label>\n              <div class=\"input-group has-prefix\">\n                <div class=\"input-group-prepend\"> <span class=\"input-group-text\"><i class=\"far fa-calendar-alt\"></i></span> </div>\n                <input type=\"text\" class=\"form-control\">\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </fieldset>\n    <fieldset class=\"form-group accordian\">\n      <div class=\"control-buttons\">\n        <button class=\"non-button\"><i class=\"far fa-trash-alt\"></i></button>\n        <div class=\"moveable\"><i class=\"far fa-ellipsis-v\"></i></div>\n      </div>\n      <h3 class=\"form-group-heading\" (click)=\"status=!status\"  \n    [ngClass]=\"status ? 'open' : ''\"><span><i class=\"far fa-angle-down\"></i></span> Image Slide</h3>\n      <div class=\"accordian-content\">\n        <div class=\"form-row\">\n          <label>Slide Text</label>\n          <div class=\"input-group has-prefix\">\n            <div class=\"input-group-prepend\"> <span class=\"input-group-text\"><i class=\"far fa-heading\"></i></span> </div>\n            <input type=\"text\" class=\"form-control\"> </div>\n        </div>\n        <div class=\"form-row\">\n          <label>Button Text</label>\n          <div class=\"input-group has-prefix\">\n            <div class=\"input-group-prepend\"> <span class=\"input-group-text\"><i class=\"far fa-font\"></i></span> </div>\n            <input type=\"text\" class=\"form-control\"> </div>\n        </div>\n        <div class=\"form-row\">\n          <label>Button Colour</label>\n          <div class=\"input-group has-prefix\">\n            <div class=\"input-group-prepend\"> <span class=\"input-group-text\"><i class=\"far fa-palette\"></i></span> </div>\n            <select class=\"form-control\">\n              <option>Please choose a button colour...</option>\n              <option value=\"blue\">Blue</option>\n              <option value=\"green\">Green</option>\n              <option value=\"red\">Red</option>\n              <option value=\"black\">Black</option>\n              <option value=\"black\">White</option>\n            </select>\n          </div>\n        </div>\n        <div class=\"form-row\">\n          <label>URL</label>\n          <div class=\"input-group has-prefix\">\n            <div class=\"input-group-prepend\"> <span class=\"input-group-text\"><i class=\"far fa-link\"></i></span> </div>\n            <input type=\"text\" class=\"form-control\" placeholder=\"Paste a link or search\"> </div>\n          <!-- FIELD LOOKUP should pop up when the field is clicked. It should show a list of the types of content that can be searched for - in this case, we want to allow searching for a product, collection, category or page. Each section can be drilled down into and a list of available links will be displayed for each level. If the user types in the box, it will show a list of relevant searches across each section. I realise this is complex functionality, so this is more of a nice to have, let me know if you have any ideas on how this could work better / simpler -->\n          <div class=\"field-lookup\">\n            <ul>\n              <li><span><i class=\"far fa-file-alt\"></i></span> Pages</li>\n              <li><span><i class=\"far fa-box-full\"></i></span> Collections</li>\n              <li><span><i class=\"far fa-book\"></i></span> Categories</li>\n              <li><span><i class=\"far fa-archive\"></i></span> Products</li>\n            </ul> <i class=\"fas fa-caret-down\"></i> </div>\n        </div>\n        <div class=\"form-row\">\n          <label>Image</label>\n          <div class=\"product-image-control\">\n            <div class=\"no-image-selected\">\n              <button class=\"btn btn-primary\"> <i class=\"fas fa-image\"></i> Select Image </button>\n            </div>\n          </div>\n        </div>\n        <div class=\"form-row radio inline separator\">\n          <label>\n            <div class=\"fk-checkbox\">\n              <input type=\"radio\" name=\"visibility-slide-2\"> <i class=\"checked fas fa-dot-circle\"></i> <i class=\"unchecked fal fa-circle\"></i> </div> Visible </label>\n          <label>\n            <div class=\"fk-checkbox\">\n              <input type=\"radio\" name=\"visibility-slide-2\" checked> <i class=\"checked fas fa-dot-circle\"></i> <i class=\"unchecked fal fa-circle\"></i> </div> Hidden </label>\n          <p class=\"float-right\"><a href=\"#\">Set a specific publish date</a></p>\n        </div>\n      </div>\n    </fieldset>\n  </form>\n</div>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-homepage-banner',\n  templateUrl: './homepage-banner.component.html',\n  styleUrls: ['./homepage-banner.component.scss']\n})\nexport class HomepageBannerComponent implements OnInit {\n\n  public status = false;\n  \n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<p>\n  new-arrivals works!\n</p>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-new-arrivals',\n  templateUrl: './new-arrivals.component.html',\n  styleUrls: ['./new-arrivals.component.scss']\n})\nexport class NewArrivalsComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<p>\n  users works!\n</p>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-users',\n  templateUrl: './users.component.html',\n  styleUrls: ['./users.component.scss']\n})\nexport class UsersComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","// simple data structure to allow for stricter conventions in routing\r\n\r\nexport enum DashboardRoles {\r\n    admin = 3,\r\n    buyer = 2,\r\n    seller = 1,\r\n    public = 0\r\n}\r\nexport enum UrlSegments {\r\n    dashboard = 0,\r\n    role = 0,\r\n    page = 1\r\n}\r\n","<div class=\"dashboard-menu\">\r\n  <div class=\"hello\">\r\n    <div class=\"image-wrap square-crop circle\">\r\n      <img [src]=\"imageUrl\" >\r\n    </div>\r\n  </div>\r\n  <ul>\r\n    <li *ngFor=\"let route of getMenuItems()\">\r\n      <a routerLink=\"{{route.path}}\" [routerLinkActive]=\"route.path === '' ? '' : 'active'\">\r\n        <i class=\"fal\" [ngClass]=\"route.data.icon\"></i>{{route.data.menuName}}\r\n      </a>\r\n    </li>\r\n  </ul>\r\n</div>","import { Component, OnInit, Input } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AuthenticationProvider } from '../../../../global/contracts/services/authentication.provider';\r\n\r\n\r\n@Component({\r\n  selector: 'app-dashboard-menu',\r\n  templateUrl: './dashboard-menu.component.html',\r\n  styleUrls: ['./dashboard-menu.component.scss']\r\n})\r\nexport class DashboardMenuComponent implements OnInit {\r\n  @Input() navigationParent = '/';\r\n  @Input() imageUrl = '';\r\n\r\n  constructor(private router: Router, private auth: AuthenticationProvider ) {\r\n   }\r\n  ngOnInit() {\r\n    if ( this.auth.getAuthProfile() !== null && this.auth.getAuthProfile() !== undefined) {\r\n       this.imageUrl = this.auth.getAuthProfile().getImageUrl();\r\n    }\r\n    this.auth.subscribeAuthProfile().subscribe(\r\n      updated => this.imageUrl = updated.getImageUrl()\r\n    );\r\n  }\r\n  getMenuItems() {\r\n    if (!this.navigationParent) {\r\n      return [];\r\n    }\r\n      const foundParent = this.router.config.find( x => x.path === this.navigationParent );\r\n      if ( foundParent !== undefined) {\r\n        return foundParent.children;\r\n      }\r\n    return [];\r\n  }\r\n}\r\n","<!-- <ul class=\"temp-nav\">\r\n  <li *ngIf=\"hasRole(['seller','admin'])\">\r\n    <a routerLink=\"./sellers\">Store Management</a>\r\n  </li>\r\n  <li *ngIf=\"hasRole(['buyer','admin'])\">\r\n    <a routerLink=\"./buyers\">Buyers</a>\r\n  </li>\r\n  <li *ngIf=\"hasRole(['admin'])\">\r\n    <a routerLink=\"./admin\">Admin</a>\r\n  </li>\r\n</ul> -->\r\n<div class=\"container-fluid dashboard\" [hidden]=\"getCurrentPage() === undefined\">\r\n  <app-dashboard-menu navigationParent=\"{{getCurrentPage()}}\"></app-dashboard-menu>\r\n  <div class=\"dashboard-content\">\r\n    <div class=\"container\">\r\n      <div class=\"nested-route-loader faded\" [ngClass]=\"{'nested-loading':isLoaded}\">\r\n        <app-shop-info></app-shop-info>\r\n        <router-outlet>\r\n        </router-outlet>\r\n      </div>\r\n      <div class=\"nested-route-loading nestedOverlay\" [ngClass]=\"{'nested-loaded':isLoaded, 'nested-loading':isLoading}\">\r\n        \r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\nimport {BrowserHandlerService } from '../../../../global/fk-browser/services/browser-handler.service';\r\nimport { Browser, BrowserState, BrowserType } from '../../../../global/fk-browser/models/browser.model';\r\nimport { Router, UrlTree, UrlSegmentGroup, UrlSegment, PRIMARY_OUTLET } from '@angular/router';\r\n\r\n// shared\r\nimport { AuthenticationProvider } from '../../../../global/contracts/services/authentication.provider';\r\nimport { UrlSegments } from '../../common/dashboard-roles.enum';\r\n@Component({\r\n  selector: 'app-nested-route-loader',\r\n  templateUrl: './nested-route-loader.component.html',\r\n  styleUrls: ['./nested-route-loader.component.scss']\r\n})\r\nexport class NestedRouteLoaderComponent implements OnInit {\r\n  public currentPage = '';\r\n  isLoaded = false;\r\n  isLoading = true;\r\n\r\n  constructor(private authService: AuthenticationProvider, private router: Router, private domService: BrowserHandlerService, ) { }\r\n\r\n  ngOnInit() {\r\n    this.domService.getAppVariables().subscribe(appVariables => {\r\n      this.isLoading = appVariables.browser.browserState === BrowserState.loading;\r\n      this.isLoaded = appVariables.browser.browserState === BrowserState.loaded;\r\n    });\r\n  }\r\n  // TODO : Another helper function that should eventually move\r\n  parseUrl(url: string) {\r\n    if ( url === '' ) {\r\n      return '';\r\n    }\r\n\r\n    const tree: UrlTree = this.router.parseUrl(url);\r\n    if ( tree.root.hasChildren ) {\r\n      const g: UrlSegmentGroup = tree.root.children[PRIMARY_OUTLET];\r\n      if (g ) {\r\n        const s: UrlSegment[] = g.segments;\r\n        return s;\r\n      }\r\n    }\r\n    return '';\r\n  }\r\n  // Arguably you could pass a parameter to the route - as in `/dashboard/:roleName/`\r\n  // But for all we know - there may end up being some unique logic to each role Page\r\n  // with separation required again. Also it takes away some of our ability to guard child routes.\r\n  // So instead we search for the route in the url as a convention.\r\n  // Needs to be some logic for when this breaks!\r\n  getCurrentPage() {\r\n    // @TODO put simply this needs some thorough testing and probably a service of its own!!\r\n    const segments = this.parseUrl(this.router.url);\r\n    if (segments === '') {\r\n      return '';\r\n    }\r\n    if (segments[UrlSegments.role] !== undefined) {\r\n      return segments[UrlSegments.role];\r\n    }\r\n    return '';\r\n  }\r\n\r\n  hasRole(roles: string[]) {\r\n    // A more generic form would parse the router config and check data items individually - requiring recursive tree search\r\n    return this.authService.checkRoles( roles );\r\n  }\r\n}\r\n","import { JsonProperty, JsonObject } from 'json2typescript';\r\nimport { TypeContract } from '../../../global/contracts/modules/tag.contract';\r\n\r\nexport class ProductAttributeType implements TypeContract {\r\n    @JsonProperty('id')\r\n    id: number;\r\n    @JsonProperty('attributeType', String)\r\n    name: string;\r\n}\r\n\r\nexport class ProductAttribute {\r\n\r\n    @JsonProperty('attributeID')\r\n    attributeID: number;\r\n\r\n    @JsonProperty('attributeType', String)\r\n    attributeType: String;\r\n\r\n    @JsonProperty('attributeLabel')\r\n    attributeLabel: string;\r\n\r\n    @JsonProperty('slug', String)\r\n    slug: string;\r\n\r\n    variants: ProductVariant[] = [];\r\n\r\n    savedAttribute = true;\r\n\r\n    constructor(other?: ProductAttribute) {\r\n        if (other !== undefined) {\r\n            this.attributeID = other.attributeID;\r\n            this.attributeType = other.attributeType;\r\n            this.attributeLabel = other.attributeLabel;\r\n            this.savedAttribute = false;\r\n            this.slug = other.slug;\r\n        }\r\n    }\r\n}\r\nexport class ProductAttributeFull extends ProductAttributeType {\r\n    public childAttributes: ProductAttribute[] = [];\r\n    constructor() {\r\n        super();\r\n    }\r\n}\r\n\r\n@JsonObject\r\nexport class ProductVariant {\r\n    @JsonProperty('attributeValueID')\r\n    attributeValueID: number;\r\n\r\n    @JsonProperty('productItemId')\r\n    productItemId: number;\r\n\r\n    @JsonProperty('attributeID')\r\n    attributeID: number;\r\n\r\n    @JsonProperty('attributeType', String)\r\n    attributeType = '';\r\n\r\n    @JsonProperty('label', String)\r\n    label = '';\r\n\r\n    @JsonProperty('slug', String)\r\n    slug: string;\r\n\r\n    @JsonProperty('userDefined')\r\n    userDefined: boolean;\r\n\r\n    @JsonProperty('isActive')\r\n    isActive: boolean;\r\n\r\n    isNew = true;\r\n\r\n    constructor(attr?: ProductAttribute) {\r\n        if (attr !== undefined ) {\r\n            this.attributeID = attr.attributeID;\r\n            this.attributeType = attr.attributeType.toString();\r\n            this.slug = attr.slug;\r\n            this.label = attr.attributeLabel;\r\n        }\r\n    }\r\n}\r\n@JsonObject\r\nexport class ProductVariantData {\r\n\r\n    @JsonProperty('data', [ProductVariant])\r\n    data: ProductVariant[];\r\n}\r\n\r\n","import { JsonProperty, JsonObject } from 'json2typescript';\r\nimport { ImageContract } from '../../../global/contracts/modules/image.contract';\r\nimport { ProductItemSpecification } from './specification.model';\r\nimport { ProductVariant, ProductVariantData } from './product-attribute.model';\r\n\r\n\r\n@JsonObject\r\nexport class Currency {\r\n    @JsonProperty('name')\r\n    name: string;\r\n    code: number;\r\n\r\n    @JsonProperty('precision')\r\n    precision: number;\r\n    subunit: number;\r\n\r\n    @JsonProperty('symbol')\r\n    symbol: string;\r\n    symbol_first: boolean;\r\n\r\n    @JsonProperty(' decimal_mark')\r\n    decimal_mark: string;\r\n\r\n    @JsonProperty('thousands_separator')\r\n    thousands_separator: string;\r\n    prefix: string;\r\n    suffix: string;\r\n}\r\n@JsonObject\r\nexport class Price {\r\n    @JsonProperty('amount')\r\n    amount: number;\r\n\r\n    @JsonProperty('value')\r\n    value: number;\r\n\r\n    @JsonProperty('currency')\r\n    currency: { [id: string]: Currency};\r\n}\r\n\r\n@JsonObject\r\nexport class ProductItem {\r\n\r\n    @JsonProperty('productItemID')\r\n    productItemID: number;\r\n\r\n    @JsonProperty('productID')\r\n    productID: number;\r\n\r\n    @JsonProperty('originalPrice', Price)\r\n    originalPrice: Price = new Price();\r\n\r\n    @JsonProperty('salePrice', Price)\r\n    salePrice: Price = new Price();\r\n\r\n    @JsonProperty('discountPrice', Price)\r\n    discountPrice: Price = new Price();\r\n\r\n    @JsonProperty('stock')\r\n    stock: number;\r\n\r\n    @JsonProperty('onSale')\r\n    onSale: boolean;\r\n\r\n    @JsonProperty('trackInventory')\r\n    trackInventory: boolean;\r\n\r\n    @JsonProperty('SKU', String)\r\n    SKU: string;\r\n\r\n    @JsonProperty('productImage')\r\n    productImages: ImageContract;\r\n\r\n    @JsonProperty('variants', ProductVariantData)\r\n    variants?: ProductVariantData;\r\n\r\n    @JsonProperty('isActive')\r\n    isActive = false;\r\n\r\n    @JsonProperty('isDefault')\r\n    isDefault = false;\r\n\r\n    @JsonProperty('imageURL')\r\n    imageURL: string;\r\n\r\n    @JsonProperty('imageID')\r\n    imageID: number;\r\n\r\n    @JsonProperty('order')\r\n    order?: number;\r\n\r\n    groupByValue?: string;\r\n\r\n    @JsonProperty('specifications', {data: [ProductItemSpecification]})\r\n    specifications: {data: ProductItemSpecification[]} = {data: []};\r\n}\r\n\r\n\r\n\r\n","import { ProductItem, Price } from './product-detail.model';\r\nimport { JsonProperty, JsonObject } from 'json2typescript';\r\nimport { ShopInterface } from '../../../global/contracts/modules/shop.contract';\r\nimport { TagContract } from '../../../global/contracts/modules/tag.contract';\r\nimport { CategoryContract } from '../../../global/contracts/modules/category.contract';\r\nimport { ImageContract } from '../../../global/contracts/modules/image.contract';\r\nimport { ProductContract } from '../../../global/contracts/modules/products.contract';\r\nimport { Tag } from '../../../core/tags/models/tag.model';\r\n\r\nexport class ProductImage implements ImageContract {\r\n\r\n\r\n  @JsonProperty('caption')\r\n  caption: string;\r\n\r\n  @JsonProperty('productImageID')\r\n  productImageID: number;\r\n\r\n  @JsonProperty('url', String)\r\n  url: string;\r\n\r\n  @JsonProperty('order')\r\n  order: number;\r\n\r\n  @JsonProperty('productID')\r\n  productID: number;\r\n\r\n  constructor(url?: string) {\r\n    this.url = url;\r\n  }\r\n  getId(): number {\r\n    return this.productImageID;\r\n  }\r\n  getUrl(): string {\r\n    return this.url;\r\n  }\r\n}\r\n\r\nexport class ProductItemServiceData {\r\n  @JsonProperty('data', [ProductItem])\r\n  data: ProductItem[];\r\n}\r\nexport class Product {\r\n  get name(): string {\r\n    return this.title;\r\n  }\r\n  @JsonProperty('productID')\r\n  public productID: number;\r\n\r\n  @JsonProperty('shopID')\r\n  public shopID: number;\r\n\r\n  @JsonProperty('shopName')\r\n  public shopName: string;\r\n\r\n  @JsonProperty('title', String)\r\n  public title: string;\r\n\r\n  @JsonProperty('slug', String)\r\n  public slug: string;\r\n\r\n  @JsonProperty('description', String)\r\n  public description: string;\r\n\r\n  @JsonProperty('productOrder')\r\n  public productOrder?: number;\r\n\r\n  @JsonProperty('status')\r\n  public status?: string;\r\n\r\n  public hasOptions: boolean;\r\n\r\n  @JsonProperty('items', ProductItemServiceData)\r\n  public items?: ProductItemServiceData;\r\n\r\n  @JsonProperty('masterItem', { data: ProductItem })\r\n  public masterItem?: {data: ProductItem} = {data: undefined};\r\n\r\n  @JsonProperty('tags', { data: [Tag] })\r\n  public tags: {data: Tag[]} = {data: []};\r\n\r\n  @JsonProperty('productCategories')\r\n  public productCategories?: CategoryContract[] = [];\r\n\r\n  public tagProduct = false;\r\n\r\n  @JsonProperty('gallery', {data: [ProductImage]})\r\n  gallery: { data: ProductImage[] } = { data: [] };\r\n\r\n  constructor(id?: number, title?: string, slug?: string,\r\n                description?: string) {\r\n    this.productID = id;\r\n      this.title = title;\r\n      this.slug = slug;\r\n      this.description = description;\r\n    }\r\n  }\r\n\r\n@JsonObject\r\nexport class ProductBridge implements ProductContract {\r\n\r\n  @JsonProperty('productID')\r\n  productID: number;\r\n\r\n  @JsonProperty('shopID')\r\n  shopID: number;\r\n\r\n  @JsonProperty('shopName')\r\n  shopName: string;\r\n\r\n  @JsonProperty('title')\r\n  title?: string;\r\n\r\n  @JsonProperty('slug')\r\n  slug: string;\r\n\r\n  @JsonProperty('description')\r\n  description: string;\r\n\r\n  originalPrice?: number;\r\n\r\n  discountPrice?: number;\r\n\r\n  stock?: number;\r\n\r\n  trackInventory?: boolean;\r\n\r\n  @JsonProperty('mainImage')\r\n  mainImage?: string;\r\n\r\n  @JsonProperty('createdData')\r\n  createdData?: string;\r\n\r\n  @JsonProperty('productOrder')\r\n  productOrder?: number;\r\n\r\n  secondaryImageUrl?: string;\r\n\r\n  onSale?: boolean;\r\n\r\n  tagProduct?: boolean;\r\n\r\n  name: string;\r\n\r\n  inventoryString?: string;\r\n\r\n  variants: number;\r\n\r\n  priceString = '';\r\n\r\n  totalStock = 0;\r\n\r\n  maxPrice = 0;\r\n\r\n  private _placeHolderImage = 'https://screenshotlayer.com/images/assets/placeholder.png';\r\n\r\n  constructor( input: Product) {\r\n        this.shopID = input.shopID;\r\n    this.productID = input.productID;\r\n        this.slug = input.slug;\r\n        this.description = input.description;\r\n        this.name = input.title;\r\n        this.title = input.title;\r\n        this.originalPrice = this.getOriginalPrice(input);\r\n        this.discountPrice = this.getDiscountPrice(input);\r\n        this.onSale = this.getOnSale(input);\r\n        this.stock = this.getStock(input);\r\n        this.trackInventory = this.getTrackInventory(input);\r\n        this.mainImage = this.getImageUrl(input);\r\n        this.secondaryImageUrl = this.getSecondaryImageUrl(input);\r\n        this.shopName = input.shopName;\r\n        this.inventoryString = this.getInventoryString(input);\r\n        this.variants = this.getVariants(input);\r\n        if (this.mainImage === '') {\r\n          this.mainImage = this._placeHolderImage;\r\n        }\r\n  }\r\n  public getVariants(input: Product): number {\r\n    if (input.items !== undefined) {\r\n      return input.items.data.length;\r\n    }\r\n    return 1;\r\n  }\r\n  public getInventoryString(input: Product): string {\r\n    let sumStock = 0;\r\n    let items = 0;\r\n    if (input.items !== undefined) {\r\n      if (input.items.data.length > 0 ) {\r\n        items = input.items.data.length;\r\n        input.items.data.forEach(\r\n          item => sumStock += item.stock\r\n        );\r\n      }\r\n      this.totalStock = sumStock;\r\n      return sumStock + ' in ' + items + ' variation' + ((items > 1) ? 's' : '');\r\n    } else if (input.masterItem !== undefined ) {\r\n        return input.masterItem.data.stock.toString();\r\n    }\r\n    return '0';\r\n  }\r\n  public getOriginalPrice(input: Product): number {\r\n  if (input.masterItem !== undefined) {\r\n    if (input.masterItem.data.originalPrice === undefined) {\r\n      this.priceString = '$0.00';\r\n      return 0.0;\r\n    }\r\n    this.priceString = '$' + this.getPrice(input.masterItem.data.originalPrice);\r\n    return this.getPrice(input.masterItem.data.originalPrice);\r\n  } else {\r\n    if ( input.items !== undefined ) {\r\n      if (input.items.data.length > 0 ) {\r\n        if (input.items.data.length === 1 ) {\r\n          this.priceString = '$' + this.getPrice(input.items.data[0].originalPrice);\r\n          return input.items.data[0].originalPrice.value;\r\n        }\r\n        const sortedList = input.items.data.sort( function(a, b) { return a.originalPrice.value - b.originalPrice.value; });\r\n        this.priceString = '$' + this.getPrice(sortedList[0].originalPrice);\r\n        this.maxPrice = this.getPrice(sortedList[0].originalPrice);\r\n        if (this.getPrice(sortedList[sortedList.length - 1].originalPrice) !== 0.0\r\n            && (this.getPrice(sortedList[0].originalPrice) !== this.getPrice(sortedList[sortedList.length - 1].originalPrice))) {\r\n          this.maxPrice = this.getPrice(sortedList[sortedList.length - 1].originalPrice);\r\n          this.priceString = this.priceString + ' - $' + this.getPrice(sortedList[sortedList.length - 1].originalPrice);\r\n        }\r\n        return this.getPrice(sortedList[sortedList.length - 1].originalPrice);\r\n      }\r\n    }\r\n  }\r\n  return 0.00;\r\n}\r\nprivate getPrice(price: Price): number {\r\n  if (price.value === undefined) {\r\n    return 0.0;\r\n  }\r\n  return price.value;\r\n}\r\n  public getDiscountPrice(input: Product): number {\r\n    if (input.masterItem !== undefined) {\r\n      if (input.masterItem.data.discountPrice === undefined) {\r\n        return 0.0;\r\n      }\r\n      return input.masterItem.data.discountPrice.value;\r\n    }\r\n  return 0.00;\r\n}\r\n\r\n  public getStock(input: Product): number {\r\n    if (input.masterItem !== undefined) {\r\n      if (input.masterItem.data.stock === undefined) {\r\n        return 0;\r\n      }\r\n      return input.masterItem.data.stock;\r\n    }\r\n  return 0;\r\n}\r\n\r\n  public getTrackInventory(input: Product): boolean {\r\n    if (input.masterItem !== undefined) {\r\n      if (input.masterItem.data.trackInventory === undefined) {\r\n        return false;\r\n      }\r\n      return input.masterItem.data.trackInventory;\r\n    }\r\n  return false;\r\n}\r\n\r\n  public getImageUrl(input: Product): string {\r\n  if (input.gallery !== undefined) {\r\n    return input.gallery.data[0].url;\r\n  } else if (input.masterItem !== undefined) {\r\n      if (input.masterItem.data.imageURL === undefined) {\r\n        return this._placeHolderImage;\r\n      }\r\n    return input.masterItem.data.imageURL;\r\n  } else if ( input.items !== undefined) {\r\n    if (input.items.data.length > 0 ) {\r\n      return input.items.data[0].imageURL === null ? this._placeHolderImage : input.items.data[0].imageURL;\r\n    }\r\n  }\r\n  return this._placeHolderImage;\r\n}\r\n\r\n  public getSecondaryImageUrl(input: Product): string {\r\n  if (input.gallery !== undefined) {\r\n    return input.gallery.data[1].url;\r\n  } else if (input.masterItem !== undefined) {\r\n    if (input.masterItem.data.imageURL === undefined) {\r\n      return '';\r\n    }\r\n    return input.masterItem.data.imageURL;\r\n  }\r\n  return '';\r\n}\r\n  public getOnSale(input: Product): boolean {\r\n    if (input.masterItem !== undefined) {\r\n      if (input.masterItem.data.onSale === undefined) {\r\n        return false;\r\n      }\r\n      return input.masterItem.data.onSale;\r\n    }\r\n  return false;\r\n  }\r\n\r\n}\r\n\r\nexport class ShopProductServiceData {\r\n  @JsonProperty('data', [Product])\r\n  data: Product[];\r\n\r\n}\r\n","import { JsonProperty, JsonObject } from 'json2typescript';\r\nimport { TypeContract } from '../../../global/contracts/modules/tag.contract';\r\n\r\n@JsonObject\r\nexport class SpecificationUnit {\r\n    @JsonProperty('unit')\r\n    unit: string;\r\n\r\n    @JsonProperty('specificationUnitID')\r\n    specificationUnitID: number;\r\n\r\n    @JsonProperty('isActive')\r\n    isActive: boolean;\r\n\r\n    @JsonProperty('userDefined', Boolean)\r\n    userDefined: Boolean;\r\n\r\n    constructor() {\r\n        this.unit = '';\r\n        this.isActive = true;\r\n    }\r\n}\r\n@JsonObject\r\nexport class SpecificationType {\r\n    @JsonProperty('value')\r\n    value: string;\r\n    @JsonProperty('specificationTypeID')\r\n    specificationTypeID: number;\r\n    @JsonProperty('userDefined', Boolean)\r\n    userDefined: Boolean;\r\n    @JsonProperty('isActive', Boolean)\r\n    isActive: Boolean;\r\n\r\n    @JsonProperty('units', {data: [SpecificationUnit]})\r\n    units: { data: SpecificationUnit[] } = {data: [] };\r\n    constructor() {\r\n        this.value = '';\r\n    }\r\n}\r\n\r\n\r\n@JsonObject\r\nexport class ProductItemSpecification {\r\n    @JsonProperty('specificationID')\r\n    specificationID: number;\r\n\r\n    @JsonProperty('type', { data: SpecificationType})\r\n    type: { data: SpecificationType};\r\n\r\n    @JsonProperty('productItemID')\r\n    productItemID: number;\r\n\r\n    @JsonProperty('unit', { data: SpecificationUnit})\r\n    unit: { data: SpecificationUnit };\r\n\r\n    isVisible: boolean;\r\n\r\n    @JsonProperty('value')\r\n    value: string;\r\n\r\n    constructor(productItemId: number) {\r\n        this.productItemID = productItemId;\r\n        this.value = '';\r\n    }\r\n}\r\n\r\n@JsonObject\r\nexport class ProductItemSpecificationData {\r\n    @JsonProperty('specification', [ProductItemSpecification])\r\n    data: ProductItemSpecification[];\r\n}\r\n\r\n","// Core\r\nimport { Injectable, Inject } from '@angular/core';\r\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\r\n\r\n// rxjs\r\nimport { Observable ,  BehaviorSubject } from 'rxjs';\r\nimport { map, filter, catchError, mergeMap, switchMap } from 'rxjs/operators';\r\n\r\n// Central\r\nimport { AppConfig } from '../../../global/contracts/config/app-config';\r\nimport { APP_CONFIG } from '../../../app.config';\r\n\r\n// Models\r\nimport {Product, ProductBridge, ShopProductServiceData, ProductImage} from '../models/product.model';\r\nimport { ProductContract, ProductsProvider } from '../../../global/contracts/modules/products.contract';\r\nimport { ProductItem } from '../models/product-detail.model';\r\nimport { ProductVariant } from '../models/product-attribute.model';\r\nimport { Image } from '../../../core/file-handler/models/image.model';\r\n\r\n// Inheritance by contract\r\nimport { ConcreteRestfulService } from '../../../global/contracts/services/restful-service.abstract';\r\n\r\n// Models from core - should use contraact which suggest we don;t have it right yet.\r\nimport { CategoryServiceData } from '../../../core/categories/models/categories.model';\r\nimport { Tag } from '../../../core/tags/models/tag.model';\r\nimport { CategoryContract } from '../../../global/contracts/modules/category.contract';\r\n\r\n// Services from Core  also suggest we may not have it right yet\r\nimport { CategoryService } from '../../../core/categories/services/category.service';\r\nimport { FormDataService } from '../../../core/fk-forms/services/form-data.service';\r\n\r\n@Injectable()\r\nexport class ProductService extends ConcreteRestfulService<ProductContract> implements ProductsProvider  {\r\n\r\n\r\n  // TODO: Make this a development environment setting to be injected\r\n  private _shopProductsUrl: string;\r\n  private _privateProductsUrl: string;\r\n  private _privateProductsItemUrl: string;\r\n  private _privateProductsImagesUrl: string;\r\n  public appState = new BehaviorSubject<string>('clean');\r\n  constructor(http: HttpClient, @Inject(APP_CONFIG)  config: AppConfig, private categoryService: CategoryService,\r\n              private dataService: FormDataService  ) {\r\n    super(config, http);\r\n   }\r\n\r\n  public getProductsForCategoryId(id: number): Observable<ProductContract[]> {\r\n    return this.http.get<ProductContract[]>(this.serviceUrl + '/category/' + id);\r\n  }\r\n  public getProductsForShopId(id: number): Observable<ProductContract[]> {\r\n    return this.http.get<ShopProductServiceData>(this._shopProductsUrl + '/' + id + '/products?paginate=false&include=items').pipe(map(\r\n      body => body.data.map(item => {\r\n        return new ProductBridge(item);\r\n      })\r\n    ));\r\n  }\r\n  public getProductsForTagId(id: number): Observable<ProductContract[]> {\r\n    return this.http.get<ShopProductServiceData>(this.serviceUrl + '/tag/' + id).pipe(map(\r\n      body => body.data\r\n    ));\r\n  }\r\n\r\n  public setServiceUrl(config: AppConfig): string {\r\n    this._shopProductsUrl = config.baseUrl + config.httpServiceUrls.shop;\r\n    this._privateProductsItemUrl = config.baseUrl + 'private/product-items';\r\n    this._privateProductsImagesUrl = config.baseUrl + 'private/product-images';\r\n    this._privateProductsUrl = config.baseUrl + config.httpServiceUrls.privateProducts;\r\n    return config.baseUrl + config.httpServiceUrls.products + config.defaultDataSuffix;\r\n  }\r\n\r\n  public getProductGallery(id: number): Observable<Product> {\r\n    return this.http.get<{ data: Product }>(this.serviceUrl + '/' + id + '?include=gallery').pipe(map(\r\n      prod => prod.data\r\n    ));\r\n  }\r\n\r\n  public getPublicProduct(id: number): Observable<Product> {\r\n    return this.http.get<{ data: Product }>(this.serviceUrl + '/' + id + '?include=gallery,items').pipe(map(\r\n      prod => prod.data\r\n    ));\r\n  }\r\n  public getProduct(id: number): Observable<Product> {\r\n    let product: Product = new Product();\r\n    return this.http.get<CategoryServiceData>(this._privateProductsUrl + '/' + id + '/categories').pipe(switchMap(\r\n      categories => {\r\n        const cats = categories.data.map(\r\n          cat => this.categoryService.mapServiceData(cat)\r\n        );\r\n        // return this.http.get<Tag[]>(this._privateProductsUrl + '/' + id + '/tags').switchMap\r\n        // ( tagData => {\r\n        //     const tgs = tagData;\r\n            return this.http.get<{data: Product}>(this.serviceUrl + '/' + id + '?include=gallery,tags,items').pipe(map(\r\n              prod => {\r\n                product = prod.data;\r\n                // product.productTags = tgs;\r\n                product.productCategories = cats;\r\n                this.appState.next('synced');\r\n                return product;\r\n              }));\r\n            // });\r\n          }));\r\n  }\r\n   // We need to think about the map function a little more - we can just use a proper model inside product!\r\n   // TS vs JS issue here!!\r\n   public getAll(): Observable<ProductContract[]> {\r\n      return this.http.get<{data: Product[]}>(this.serviceUrl + '?include=gallery').pipe(map( response => {\r\n          return response.data.map( item => {\r\n            return new ProductBridge(item);\r\n          });\r\n      }));\r\n   }\r\n   public createProduct(product: Product, shopId: number): Observable<Product> {\r\n     return this.http.post<{data: Product}>(this._shopProductsUrl + '/' + shopId + '/products', product).pipe(map(\r\n       result => result.data\r\n     ));\r\n   }\r\n   /**\r\n    * Save a product\r\n    * @param product\r\n    */\r\n  public saveProduct(product: Product): Observable<Product> {\r\n    let data = new HttpParams();\r\n    data = data.append('title', product.title);\r\n    data = data.append('description', product.description);\r\n    return this.http.put<Product>(this._privateProductsUrl + '/' + product.productID, data);\r\n  }\r\n  /**\r\n   * Should this be done on the tags service?\r\n   * @param tags\r\n   * @param productId\r\n   */\r\n  public saveTags(tags: Tag[], productId: number): Observable<Tag[]> {\r\n    const body = new FormData();\r\n    let i = 0;\r\n    // console.log(tags);\r\n    tags.forEach(\r\n      tag => {\r\n        // console.log(tag);\r\n        body.append('tags[' + i + ']', tag.name);\r\n        i++;\r\n      }\r\n    );\r\n    // if (tags.length === 0) {\r\n    //   body.append('tags', 'false');\r\n    // }\r\n    return this.http.post<{data: [Tag]}>(this._privateProductsUrl + '/' + productId + '/tags', body).pipe(map(\r\n      result => {\r\n        if ( result.data === undefined) {\r\n          return [];\r\n        }\r\n        return result.data;\r\n      }));\r\n  }\r\n  public saveCategories(cats: CategoryContract[], productId: number): Observable<Tag[]> {\r\n    const body = new FormData();\r\n    let i = 0;\r\n    cats.forEach(\r\n      cat => {\r\n        if (cat.id !== undefined) {\r\n          body.append('categoryIDs[' + i + ']', cat.id.toString());\r\n        } else {\r\n          body.append('categoryIDs[' + i + ']', cat['categoryID'].toString());\r\n        }\r\n        i++;\r\n      }\r\n    );\r\n    return this.http.post<{ data: [Tag] }>(this._privateProductsUrl + '/' + productId + '/categories', body).pipe(map(\r\n      result => result.data\r\n    ));\r\n  }\r\n  public getImageHandlerEndPoint(id: number) {\r\n    return this._privateProductsUrl + '/' + id + '/images/upload';\r\n  }\r\n  /**\r\n   * This needs to be done on a model I think\r\n   * @param item\r\n   */\r\n  public createProductItem(item: ProductItem): Observable<ProductItem> {\r\n\r\n    const data = new FormData();\r\n    data.append('SKU', item.SKU);\r\n    data.append('trackInventory', this.convertBooleanToString(item.trackInventory));\r\n    data.append('onSale', this.convertBooleanToString(item.onSale));\r\n    data.append('isActive', this.convertBooleanToString(item.isActive));\r\n    data.append('isDefault', this.convertBooleanToString(item.isDefault));\r\n    data.append('order', item.order.toString());\r\n    if (item.originalPrice.value !== undefined) {\r\n      data.append('originalPrice', item.originalPrice.value.toString());\r\n    } else {\r\n      data.append('originalPrice', '0.00');\r\n    }\r\n    if (item.originalPrice.value !== undefined) {\r\n      data.append('discountPrice', item.discountPrice.value.toString());\r\n    } else {\r\n      data.append('discountPrice', '0.00');\r\n    }\r\n    if (item.variants !== undefined) {\r\n      let i = 0;\r\n      item.variants.data.forEach(\r\n        variant => {\r\n          // console.log(variant);\r\n          if (variant.attributeID !== undefined) {\r\n            data.append('variants[' + i + '][attributeID]', variant.attributeID.toString());\r\n            data.append('variants[' + i + '][attributeValueID]', variant.attributeValueID.toString());\r\n            i++;\r\n          }\r\n        }\r\n      );\r\n    }\r\n    return this.http.post<{data: ProductItem}>(this._privateProductsUrl + '/' + item.productID + '/product-items', data).pipe(map(\r\n      result => { this.appState.next('creating'); return result.data; }\r\n    ));\r\n  }\r\n\r\n  /**\r\n   * Also should be done pon Product Item Model\r\n   * @param item\r\n   */\r\n  public saveProductItem(item: ProductItem): Observable<ProductItem> {\r\n    // console.log(item);\r\n    let data = new HttpParams();\r\n    data = data.append('SKU', item.SKU);\r\n    data = data.append('trackInventory', this.convertBooleanToString(item.trackInventory) );\r\n    data = data.append('onSale', this.convertBooleanToString(item.onSale));\r\n    data = data.append('isActive', this.convertBooleanToString(item.isActive));\r\n    data = data.append('isDefault', this.convertBooleanToString(item.isDefault));\r\n    if ( item.originalPrice.value !== undefined) {\r\n      data = data.append('originalPrice', item.originalPrice.value.toString());\r\n    } else {\r\n      data = data.append('originalPrice', '0.00');\r\n    }\r\n    if ( item.discountPrice.value !== undefined ) {\r\n      data = data.append('discountPrice', item.discountPrice.value.toString());\r\n    } else {\r\n      data = data.append('discountPrice', '0.00');\r\n    }\r\n    data = data.append('stock', item.stock.toString());\r\n    data = data.append('imageURL', item.imageURL);\r\n    data = data.append('order', item.order.toString());\r\n    if (item.imageID !== null && item.imageID !== 0) {\r\n      data = data.append('imageID', item.imageID.toString());\r\n    }\r\n    if (item.variants !== undefined) {\r\n      let i = 0;\r\n      item.variants.data.forEach(\r\n        variant => {\r\n          // console.log(variant);\r\n          if (variant.attributeID !== undefined) {\r\n            data = data.append('variants[' + i + '][attributeID]', variant.attributeID.toString());\r\n            data = data.append('variants[' + i + '][attributeValueID]', variant.attributeValueID.toString());\r\n            i++;\r\n          }\r\n        }\r\n      );\r\n    }\r\n\r\n    if (item.specifications.data !== undefined) {\r\n      let i = 0;\r\n      item.specifications.data.forEach(\r\n        spec => {\r\n          if ( spec['type'] !== undefined) {\r\n            data = data.append('specifications[' + i + '][specificationTypeID]', spec['type'].data.specificationTypeID.toString());\r\n            data = data.append('specifications[' + i + '][value]', spec.value);\r\n            data = data.append('specifications[' + i + '][isVisible]', '1');\r\n            data = data.append('specifications[' + i + '][specificationTypeUnitID]', spec['unit'].data.specificationUnitID.toString());\r\n            i++;\r\n          }\r\n        }\r\n      );\r\n    }\r\n    return this.http.put<{ data: ProductItem }>(this._privateProductsItemUrl + '/' + item.productItemID, data).pipe(map(\r\n      result => { this.appState.next('updating'); return result.data; }\r\n    ));\r\n  }\r\n  public deleteProductItem(id: number): Observable<boolean> {\r\n    return this.http.delete(this._privateProductsItemUrl + '/' + id).pipe(map(\r\n      response => { this.appState.next('deletingItem'); return true; }\r\n    ));\r\n\r\n  }\r\n  private convertBooleanToString(value: Boolean): string {\r\n    return value ? '1' : '0';\r\n  }\r\n  public deleteProductImage(imageID: number): Observable<any> {\r\n    return this.http.delete(this._privateProductsImagesUrl + '/' + imageID, { responseType: 'text' }).pipe(map(\r\n      data => { this.appState.next('deleteImage'); return data; }));\r\n  }\r\n  public updateProductImage(image: ProductImage): Observable<ProductImage> {\r\n    let data = new HttpParams();\r\n    data = data.append('caption', image.caption);\r\n    data = data.append('order', image.order.toString());\r\n    return this.http.put<{data: ProductImage}>(this._privateProductsImagesUrl + '/' + image.productImageID, data).pipe(map(\r\n      result => { this.appState.next('updateImages'); return result.data; }\r\n    ));\r\n\r\n  }\r\n  public updateProductImageOrder(images: ProductImage[], id: number): Observable<any> {\r\n    let data = new HttpParams();\r\n    let i = 0 ;\r\n    images.forEach( img => {\r\n      data = data.append('imageOrder[' + i + '][productImageID]', img.productImageID.toString());\r\n      data = data.append('imageOrder[' + i + '][order]', img.order.toString());\r\n      i++;\r\n    });\r\n    return this.http.post<any>(this._privateProductsUrl + '/' + id + '/images/order', data).pipe(map(\r\n      result => { this.appState.next('updateImageOrdering'); return result.data; }\r\n    ));\r\n\r\n  }\r\n}\r\n","<app-form-messages></app-form-messages>\r\n<h2 class=\"page-heading\">Account Settings</h2>\r\n<div class=\"content-inner\">\r\n  <form class=\"form\" #userForm=\"ngForm\">\r\n    <fieldset class=\"form-group\" *ngIf=\"user !== undefined\">\r\n      <h3 class=\"form-group-heading\">My Details</h3>\r\n      <a class=\"btn btn-link btn-small password-modal-trigger\" (click)=\"display=true; showEmailForm=false; header = 'Reset password';\">\r\n          <i class=\"fa fa-key\"></i>\r\n        Change my password</a>\r\n      <div class=\"form-row\">\r\n        <div class=\"row\">\r\n          <div class=\"col-md-6\">\r\n            <label>First Name</label>\r\n            <input type=\"text\" [(ngModel)]=\"user.firstName\" name=\"firstName\" class=\"form-control\"> </div>\r\n          <div class=\"col-md-6\">\r\n            <label>Last Name</label>\r\n            <input type=\"text\" [(ngModel)]=\"user.lastName\" name=\"lastName\" class=\"form-control\"> </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"form-row\">\r\n        <div class=\"row\">\r\n          <div class=\"col-md-6\">\r\n            <label>Account Email</label>\r\n            <div class=\"input-group\">\r\n              <button type=\"submit\" class=\"btn btn-save\" (click)=\"display=true;showEmailForm=true;header = 'Update Email Address';\">\r\n               <i class=\"far fa-check\"></i>Update Email address</button>\r\n            </div>\r\n          </div>\r\n      <div class=\"col-md-6\" *ngIf=\"user.userProfile!==undefined\">\r\n        <label>My Birthday</label>\r\n        <div class=\"input-group has-prefix\">\r\n          <div class=\"input-group-prepend\">\r\n            <span class=\"input-group-text\">\r\n                <i class=\"far fa-calendar-alt\"></i>\r\n            </span>\r\n          </div>\r\n          <input type=\"date\" [(ngModel)]=\"user.userProfile.birthDate\" name=\"birthdate\" class=\"form-control date-picker\"> </div>\r\n      </div>\r\n      </div>\r\n      </div>\r\n    </fieldset>\r\n    <fieldset class=\"form-group\" *ngIf=\"user.userProfile !== undefined\">\r\n      <h3 class=\"form-group-heading\">My Address</h3>\r\n      <div class=\"form-row\">\r\n        <label>Phone</label>\r\n        <input type=\"phone\" [(ngModel)]=\"user.userProfile.mobileNumber\" name=\"phone\" class=\"form-control\"> </div>\r\n      <div class=\"form-row\">\r\n        <label>Street</label>\r\n        <input type=\"text\" [(ngModel)]=\"user.userProfile.address1\" name=\"street1\" class=\"form-control\"> </div>\r\n      <div class=\"form-row\">\r\n        <label>Street Line 2 (optional)</label>\r\n        <input type=\"text\" [(ngModel)]=\"user.userProfile.address2\" name=\"street2\" class=\"form-control\"> </div>\r\n      <div class=\"form-row\">\r\n        <div class=\"row\">\r\n          <div class=\"col-md-6\">\r\n            <label>City</label>\r\n            <input type=\"text\" required [(ngModel)]=\"user.userProfile.city\" name=\"city\" class=\"form-control\"> </div>\r\n          <div class=\"col-md-6\">\r\n            <label>Postcode</label>\r\n            <input type=\"number\" [(ngModel)]=\"user.userProfile.postcode\" name=\"postcode\" class=\"form-control\"> </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"form-row\">\r\n        <div class=\"row\">\r\n          <div class=\"col-md-6\">\r\n            <label>Country</label>\r\n            <select class=\"form-control\" required [(ngModel)]=\"user.userProfile.countryCode\" name=\"country\">\r\n              <option *ngFor=\"let country of countries\" [ngValue]=\"country.code\">{{country.name}}</option>\r\n            </select>\r\n          </div>\r\n          <div class=\"col-md-6\">\r\n            <label>State/Territory</label>\r\n            <select class=\"form-control\" required [(ngModel)]=\"user.userProfile.state\" name=\"states\">\r\n              <option *ngFor=\"let state of states\" [ngValue]=\"state.value\">{{state.name}}</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </fieldset>\r\n    <div class=\"form-actions centered\">\r\n      <button type=\"submit\" class=\"btn btn-save\" (click)='save(userForm)'>\r\n                        <i class=\"far fa-check\"></i>\r\n        Save</button>\r\n    </div>\r\n  </form>\r\n</div>\r\n<!-- CHANGE PASSWORD MODAL -->\r\n<app-fk-dialog header=\"{{header}}\" [(visible)]=\"display\" [width]=\"600\" [height]=\"500\">\r\n  <app-reset-password (completed)=\"display=false\" private=\"true\" [userId]=\"user.userID\" [hidden]=\"showEmailForn\" *ngIf=\"!showEmailForm\"></app-reset-password>\r\n  <app-update-email-form (completed)=\"display=false\" [userId]=\"user.userID\" *ngIf=\"showEmailForm\"></app-update-email-form>\r\n</app-fk-dialog>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { UserService } from '../../services/user.service';\r\nimport { Country } from '../../models/countries.model';\r\nimport { AuthUser } from '../../models/auth-user.model';\r\nimport { AuthenticationProvider } from '../../../../global/contracts/services/authentication.provider';\r\nimport { UserWithProfile } from '../../../../global/contracts/modules/user.contract';\r\nimport { UserProfile } from '../../models/user-profile.model';\r\nimport { MessageService } from '../../../../core/fk-forms/services/message.service';\r\n\r\n@Component({\r\n  selector: 'app-account-form',\r\n  templateUrl: './account-form.component.html',\r\n  styleUrls: ['./account-form.component.scss']\r\n})\r\nexport class AccountFormComponent implements OnInit {\r\n\r\n  countries: Country[];\r\n  states: {name: string, value: string}[] = [\r\n    { name: 'ACT', value: 'ACT' },\r\n    { name: 'NSW', value: 'NSW' },\r\n    { name: 'NT', value: 'NT' },\r\n    { name: 'QLD', value: 'QLD' },\r\n    { name: 'SA', value: 'SA' },\r\n    { name: 'TAS', value: 'TAS' },\r\n    { name: 'VIC', value: 'VIC' },\r\n    { name: 'WA', value: 'WA' }\r\n  ];\r\n  user: AuthUser = new AuthUser();\r\n  display = false;\r\n  header = 'Reset password';\r\n  showEmailForm = false;\r\n  constructor(private _service: UserService, private _auth: AuthenticationProvider,\r\n    private _messageService: MessageService) { }\r\n\r\n  ngOnInit() {\r\n    this._messageService.clear();\r\n    this._service.getCountries().subscribe( data =>\r\n      this.arrangeCountryData(data.data)\r\n    );\r\n    this.user = this._auth.getAuthUser() as AuthUser;\r\n\r\n    this._service.getUserDetails(this.user.getId()).subscribe(\r\n      user => this.arrangeUser(user)\r\n    );\r\n  }\r\n\r\n  arrangeUser(user: UserProfile) {\r\n    this.user.userProfile = user;\r\n  }\r\n  arrangeCountryData(data: any[]) {\r\n    this.countries = data.map(\r\n      x => {\r\n        const country = new Country();\r\n        country.name = x.name.common;\r\n        country.code = x.cca2;\r\n        return country;\r\n      }) ;\r\n  }\r\n  save(form: any): void {\r\n    this._service.saveUserDetails(this.user.userProfile, this.user.userID).subscribe(\r\n      response => this._messageService.sendSuccessMessage('Success', 'Your details have been updated'),\r\n      error => this._messageService.sendErrorMessage('Error', 'Your details have not been updated'),\r\n  );\r\n  }\r\n}\r\n","<form class=\"form card-style\" #emailForm=\"ngForm\">\r\n  <fieldset class=\"form-group\">\r\n    <div class=\"form-row\">\r\n      <label>Confirm your new Email Address: {{emailAddress}}\r\n      </label>\r\n    </div>    \r\n    <app-form-save [isValid]=\"emailForm.valid && userId!==undefined\" [btnLabel]=\"'Update Email Address'\" (saveTrigger)=\"send($event)\"></app-form-save>\r\n  </fieldset>\r\n</form>","import { Component, OnInit, Input, EventEmitter, Output } from '@angular/core';\r\nimport { ActivatedRoute, ParamMap } from '@angular/router';\r\nimport { UserService } from '../../services/user.service';\r\nimport { MessageService } from '../../../../core/fk-forms/services/message.service';\r\n\r\n@Component({\r\n  selector: 'app-confirm-email',\r\n  templateUrl: './confirm-email.component.html',\r\n  styleUrls: ['./confirm-email.component.scss']\r\n})\r\nexport class ConfirmEmailComponent implements OnInit {\r\n\r\n  @Input() token: string;\r\n  @Input() emailAddress: string;\r\n  @Input() userId: number;\r\n  @Output() completed = new EventEmitter<boolean>(false);\r\n  constructor(private _service: UserService, private _messages: MessageService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  send(event) {\r\n    this._service.sendVerificationNewEmail(this.emailAddress, this.token, this.userId).subscribe(\r\n        data => {\r\n          this._messages.sendSuccessMessage('Updated', 'Your email address has been updated. Please log in again.');\r\n          this.completed.emit(true);\r\n        },\r\n        error => this._messages.sendErrorMessage('Verification Failed', error['message']));\r\n    }\r\n}\r\n","<!-- CHANGE PASSWORD MODAL -->\r\n<form class=\"form card-style\" #emailForm=\"ngForm\">\r\n  <fieldset class=\"form-group\">\r\n    <div class=\"form-row\">\r\n      <label>Send password reset email\r\n      </label>\r\n      <input type=\"email\" [(ngModel)]=\"emailAddress\" name=\"email\" class=\"form-control\">\r\n    </div>\r\n    <app-form-save [isValid]=\"emailForm.valid\" [btnLabel]=\"'Send Reset Email'\" (saveTrigger)=\"send($event)\"></app-form-save>\r\n  </fieldset>\r\n</form>\r\n","import { Component, OnInit, EventEmitter, Output, Input } from '@angular/core';\r\nimport { UserService } from '../../services/user.service';\r\nimport { MessageService } from '../../../../core/fk-forms/services/message.service';\r\nimport { ActivatedRoute, ParamMap } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-forgot-password',\r\n  templateUrl: './forgot-password.component.html',\r\n  styleUrls: []\r\n})\r\nexport class ForgotPasswordComponent implements OnInit {\r\n\r\n  emailAddress: string;\r\n  @Output() completed = new EventEmitter<boolean>(false);\r\n  constructor(private _service: UserService, private _messages: MessageService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n  send(event) {\r\n    this._service.sendVerificationEmail(this.emailAddress).subscribe(\r\n      data => {\r\n        this._messages.sendSuccessMessage('Email sent', 'You will receive an email with directions on resetting your password.');\r\n        this.completed.emit(true);\r\n      },\r\n      error => this._messages.sendErrorMessage('Verification Failed', error['message'])\r\n    );\r\n  }\r\n}\r\n","<app-form-messages></app-form-messages>\r\n<div class=\"container-fluid login\">\r\n  <div class=\"container\">\r\n    <form class=\"form\" (ngSubmit)=\"loginForm.valid && login()\" #loginForm=\"ngForm\" novalidate>\r\n      <div class=\"form-group\">\r\n        <h3 class=\"form-group-heading\">Please log in</h3>\r\n        <div class=\"form-row required\">\r\n          <label for=\"inputEmail\">Your Email address</label>\r\n          <input type=\"email\" id=\"inputEmail\" class=\"form-control\" placeholder=\"Email address\" autofocus name=\"username\" #username=\"ngModel\" [(ngModel)]=\"model.username\">\r\n          <div [hidden]=\"username.valid\" class=\"alert alert-danger\">\r\n            Email is required {{username.errors}}\r\n            </div>\r\n        </div>\r\n        <div class=\"form-row required\">\r\n          <label for=\"inputPassword\">Your Password</label>\r\n          <input type=\"password\" id=\"inputPassword\" class=\"form-control\" placeholder=\"Password\" name=\"password\"  [(ngModel)]=\"model.password\" required #name=\"ngModel\">\r\n        </div>\r\n        <div class=\"form-row checkbox\">\r\n          <label class=\"float-left\">\r\n            <div class=\"fk-checkbox\">\r\n              <input type=\"checkbox\" value=\"remember-me\">\r\n                  <i class=\"checked fas fa-check-square\"></i>\r\n                  <i class=\"unchecked fal fa-square\"></i>\r\n            </div> Remember me\r\n          </label>\r\n          <a class=\"forgot-password float-right\" (click)=\"display=!display\">Forgot your password?</a>\r\n        </div>\r\n        <div class=\"form-row authorising\" [hidden]=\"!responseAvailable\" (click)=\"acknowledgeMessage()\">\r\n          <i class=\"far {{icon}}\" [hidden]=\"!authenticating\"></i>\r\n          {{message}}\r\n        </div>\r\n      </div>\r\n      <div class=\"form-actions\">\r\n        <button class=\"btn btn-primary\" type=\"submit\" >Log in\r\n          <i class=\"far fa-sign-in icon-right\"></i>\r\n        </button>\r\n      </div>\r\n    </form>\r\n</div>\r\n</div>\r\n<app-fk-dialog header=\"{{header}}\" [(visible)]=\"display\" [width]=\"600\" [height]=\"500\">\r\n  <app-forgot-password (completed)=\"display=false\" *ngIf=\"showForgotPassword\"></app-forgot-password>\r\n  <app-confirm-email *ngIf=\"showConfirmEmail\" (completed)=\"display=false\" [token]=\"token\" [userId]=\"user.userID\" [emailAddress]=\"emailAddress\"></app-confirm-email>\r\n  <app-reset-password *ngIf=\"showPasswordReset\" (completed)=\"display=false\" [userId]=\"0\" [key]=\"key\" [requiresOld]=\"false\"></app-reset-password>\r\n</app-fk-dialog>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { AuthenticationProvider } from '../../../../global/contracts/services/authentication.provider';\r\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\r\nimport { AuthUser } from '../../models/auth-user.model';\r\nimport { UserService } from '../../services/user.service';\r\nimport { MessageService } from '../../../../core/fk-forms/services/message.service';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n  public model: { password: string, username: string }  = {password: '', username: ''};\r\n  public username = '';\r\n  public authenticating = false;\r\n  public message = 'Signing you in. One moment please.';\r\n  public responseAvailable = false;\r\n  public returnUrl: string;\r\n  private defaultRoute = '/sellers/home';\r\n  public user: AuthUser = new AuthUser(0);\r\n  display = false;\r\n  icon = 'fa-circle-notch fa-spin';\r\n  loadingIcon = 'fa-circle-notch fa-spin';\r\n  warnIcon = 'fa-exclamation-triangle';\r\n  header = 'Update Password';\r\n\r\n  emailAddress: string;\r\n  token: string;\r\n  key: string;\r\n\r\n  showPasswordReset = false;\r\n  showForgotPassword = true;\r\n  showConfirmEmail = false;\r\n  constructor(private authService: AuthenticationProvider, private route: ActivatedRoute,\r\n    private router: Router, private userService: UserService, private _messages: MessageService) { }\r\n\r\n  ngOnInit() {\r\n    this._messages.clear();\r\n    this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || this.defaultRoute;\r\n    if (this.returnUrl !== this.defaultRoute ) {\r\n      this.message = 'Sorry you are not signed in. Please log in to continue to that page';\r\n      this.responseAvailable = true;\r\n      this.icon = this.warnIcon;\r\n      this.authenticating = true;\r\n    }\r\n    this.route.paramMap.forEach((params: ParamMap) => {\r\n      if (params.has('key')) {\r\n        this.display = true;\r\n        this.key = params.get('key');\r\n        this.showPasswordReset = true;\r\n        this.showForgotPassword = false;\r\n        this.showConfirmEmail = false;\r\n      }\r\n      if (params.has('token')) {\r\n        this.display = true;\r\n        this.token = params.get('token');\r\n        if (this.authService.isAuthenticated()) {\r\n          this.user = this.authService.getAuthUser() as AuthUser;\r\n          if ( this.user === null)  {\r\n            this.user = new AuthUser();\r\n          }\r\n        } else {\r\n          this.user = new AuthUser();\r\n        }\r\n      }\r\n      if (params.has('email')) {\r\n        this.emailAddress = params.get('email');\r\n        this.showConfirmEmail = true;\r\n        this.showPasswordReset = false;\r\n        this.showForgotPassword = false;\r\n      }\r\n    });\r\n  }\r\n  login() {\r\n    this.icon = this.loadingIcon;\r\n    this.responseAvailable = true;\r\n    this.authenticating = true;\r\n    this.message = 'Signing you in. One moment please.';\r\n    // logout first in case someone is in session\r\n    this.authService.logout();\r\n\r\n    // login and reroute on success\r\n    this.authService.login(this.model.username, this.model.password ).subscribe(\r\n      data => {\r\n        // console.log(data);\r\n        if ( data.getId() ) {\r\n          this.authenticating = false;\r\n          this.responseAvailable = false;\r\n          this.router.navigate([this.returnUrl]);\r\n        } else {\r\n          this.message = 'Sorry. We could not log you in with that information. Please try again.';\r\n          this.icon = this.warnIcon;\r\n          this.authenticating = false;\r\n        }\r\n      },\r\n      error => {\r\n        console.log(error);\r\n        this.message = 'Sorry. We could not log you in with that information. Please try again.';\r\n        this.icon = this.warnIcon;\r\n        this.authenticating = false;\r\n      } );\r\n  }\r\n  acknowledgeMessage() {\r\n    this.responseAvailable = false;\r\n  }\r\n}\r\n","<span (click)=\"logout()\" class=\"btn btn-primary\">Log out\r\n  <i class=\"far fa-power-off icon-right\"></i>\r\n</span>","import { Component, OnInit } from '@angular/core';\r\nimport { AuthenticationProvider } from '../../../../global/contracts/services/authentication.provider';\r\nimport { Router } from '@angular/router';\r\nimport { BrowserHandlerService } from '../../../../global/fk-browser/services/browser-handler.service';\r\n\r\n@Component({\r\n  selector: 'app-logout',\r\n  templateUrl: './logout.component.html',\r\n  styleUrls: ['./logout.component.scss']\r\n})\r\nexport class LogoutComponent implements OnInit {\r\n\r\n  constructor(private auth: AuthenticationProvider, private router: Router, private _browser: BrowserHandlerService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n  /**\r\n   * Logout component\r\n   *\r\n   * @memberof LogoutComponent\r\n   */\r\n  logout() {\r\n    this.auth.logout();\r\n    this._browser.setSessionEnd();\r\n    // Should be in config!!!\r\n    this.router.navigate(['/']);\r\n  }\r\n}\r\n","<!-- CHANGE PASSWORD MODAL -->\r\n<!-- password Form-->\r\n<form class=\"form\" #passwordForm=\"ngForm\">\r\n  <fieldset class=\"form-group\">\r\n    <div class=\"form-row\" *ngIf=\"saved\">\r\n      <label>\r\n        <a href=\"/login\">login</a>\r\n      </label>\r\n    </div>\r\n    <div class=\"form-row\">\r\n      <label>Your Email Address\r\n      </label>\r\n      <input type=\"email\" required name=\"emailAddress\" [(ngModel)]=\"emailAddress\" email class=\"form-control\"> </div>\r\n    <div class=\"form-row\" *ngIf=\"requiresOld\">\r\n      <label>Your Current Password\r\n        <!-- <a class=\"float-right\" href=\"#\">Forgot your password?</a> -->\r\n      </label>\r\n      <input type=\"password\" required [(ngModel)]=\"oldPassword\" name=\"password\" class=\"form-control\"> </div>\r\n    <div class=\"form-row\">\r\n      <label>Choose a New Password</label>\r\n      <input type=\"password\" required [(ngModel)]=\"newPassword\" name=\"newPassword\" class=\"form-control\" /> </div>\r\n    <div class=\"form-row\">\r\n      <label>Confirm Password</label>\r\n      <input type=\"password\" [(ngModel)]=\"newPassword_confirmation\" required name=\"newPassword_confirmation\" class=\"form-control\"\r\n      /> </div>\r\n  </fieldset>\r\n  <app-form-save [isValid]=\"passwordForm.valid\" [btnLabel]=\"buttonLabel\" (saveTrigger)=\"save($event)\"></app-form-save>\r\n</form>\r\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { UserService } from '../../services/user.service';\r\nimport { MessageService } from '../../../../core/fk-forms/services/message.service';\r\n\r\n@Component({\r\n  selector: 'app-reset-password',\r\n  templateUrl: './reset-password.component.html',\r\n  styleUrls: ['./reset-password.component.scss']\r\n})\r\nexport class ResetPasswordComponent implements OnInit {\r\n\r\n  @Input() key: string;\r\n  @Input() requiresOld = true;\r\n  @Input() userId = 0;\r\n  emailAddress = '';\r\n  oldPassword: string;\r\n  newPassword: string;\r\n  newPassword_confirmation: string;\r\n  saved = false;\r\n  buttonLabel = 'Reset password';\r\n  @Output() completed = new EventEmitter<boolean>(false);\r\n\r\n  constructor(private _service: UserService, private _messages: MessageService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n  save(event) {\r\n    if (this.requiresOld) {\r\n      this._service.updatePassword\r\n        (this.emailAddress, this.oldPassword, this.newPassword, this.newPassword_confirmation, this.userId).subscribe(\r\n          result => {\r\n            this._messages.sendSuccessMessage('Password Updated', 'Please log in again');\r\n            this.saved = true;\r\n            this.completed.emit(true);\r\n          },\r\n          error => this._messages.sendErrorMessage('Could not save', error.message)\r\n        );\r\n    } else {\r\n      this._service.confirmPasswordUpdate\r\n        (this.emailAddress, this.newPassword, this.newPassword_confirmation, this.key).subscribe(\r\n          result => {\r\n            this._messages.sendSuccessMessage('Password Updated', 'Please log in again');\r\n            this.saved = true;\r\n            this.completed.emit(true);\r\n          },\r\n          error => this._messages.sendErrorMessage('Could not save', error.message)\r\n        );\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"shop-info\">\r\n  <h3>Welcome, {{ getUserName() }}</h3>\r\n <app-logout></app-logout>\r\n   <a class=\"btn btn-primary\">Help\r\n    <i class=\"fal fa-question-circle icon-right\"></i>\r\n  </a>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\n// shared servvices\r\nimport { AuthenticationProvider } from '../../../../global/contracts/services/authentication.provider';\r\nimport { AuthUser } from '../../models/auth-user.model';\r\n\r\n@Component({\r\n  selector: 'app-shop-info',\r\n  templateUrl: './shop-info.component.html',\r\n  styleUrls: ['./shop-info.component.scss']\r\n})\r\nexport class ShopInfoComponent implements OnInit {\r\n\r\n  constructor(private auth: AuthenticationProvider ) { }\r\n  user = new AuthUser();\r\n  ngOnInit() {\r\n  }\r\n  getUserName() {\r\n    this.user = this.auth.getAuthUser() as AuthUser;\r\n     if (this.user ) {\r\n       return this.user.getName();\r\n     }\r\n    return '';\r\n  }\r\n}\r\n","  <form class=\"form\" #emailForm=\"ngForm\">\r\n    <fieldset class=\"form-group\">\r\n      <div class=\"row\">\r\n        <div class=\"col-md-12\">\r\n        </div>\r\n      </div>\r\n      <div class=\"form-row\">\r\n        <label>Your Old Email Address</label>\r\n        <input type=\"email\" required name=\"emailAddress\" [(ngModel)]=\"emailAddress\" class=\"form-control\"> </div>\r\n      <div class=\"form-row\">\r\n        <label>Your Current Password\r\n          <a class=\"float-right\" href=\"#\">Forgot your password?</a>\r\n        </label>\r\n        <input type=\"password\" required [(ngModel)]=\"password\" name=\"password\" class=\"form-control\"> </div>\r\n      <div class=\"form-row\">\r\n        <label>Choose a New Email address</label>\r\n        <input type=\"email\" email required [(ngModel)]=\"newEmail\" name=\"newEmail\" class=\"form-control\" /> </div>\r\n      <div class=\"form-row\">\r\n        <label>Confirm Email address</label>\r\n        <input type=\"email\" email [(ngModel)]=\"newEmail_confirmation\" name=\"newEmail_confirmation\" class=\"form-control\" /> </div>\r\n      <app-form-messages></app-form-messages>\r\n    </fieldset>\r\n    <app-form-save [isValid]=\"emailForm.valid\" [btnLabel]=\"'Update Email'\" (saveTrigger)=\"save($event)\"></app-form-save>\r\n  </form>","import { Component, OnInit, EventEmitter, Input, Output } from '@angular/core';\r\nimport { UserService } from '../../services/user.service';\r\nimport { MessageService } from '../../../../core/fk-forms/services/message.service';\r\n\r\n@Component({\r\n  selector: 'app-update-email-form',\r\n  templateUrl: './update-email-form.component.html',\r\n  styleUrls: ['./update-email-form.component.scss']\r\n})\r\nexport class UpdateEmailFormComponent implements OnInit {\r\n  @Output() completed = new EventEmitter<boolean>();\r\n  @Input() private = false;\r\n  emailAddress: string;\r\n  password: string;\r\n  newEmail: string;\r\n  newEmail_confirmation: string;\r\n  @Input() userId = 0;\r\n  constructor(private _service: UserService, private _messages: MessageService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n  save(event) {\r\n    this._service.updateEmail\r\n      (this.emailAddress, this.password, this.newEmail, this.newEmail_confirmation, this.userId).subscribe(\r\n        data => {\r\n        this._messages.sendSuccessMessage('Email verification sent',\r\n          'A verification email has been sent to your new email address to confirm this change..');\r\n        this.completed.emit(true);\r\n        },\r\n        error => {\r\n          this._messages.sendErrorMessage('Email Update failed', 'Please try again or contact support as soon as possible');\r\n        });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router, CanActivate, CanLoad } from '@angular/router';\r\n\r\n// Services\r\nimport { AuthenticationProvider } from '../../../global/contracts/services/authentication.provider';\r\nimport { Route } from '@angular/compiler/src/core';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class AuthGuardServiceService implements CanActivate, CanLoad {\r\n\r\n  canLoad(route: Route): boolean | Observable<boolean> | Promise<boolean> {\r\n    if (!this.auth.isAuthenticated()) {\r\n      this.router.navigate(['login']);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  canActivate(): boolean {\r\n    if (!this.auth.isAuthenticated()) {\r\n      this.router.navigate(['login']);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  constructor(private auth: AuthenticationProvider, private router: Router) { }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  Router,\r\n  CanActivate,\r\n  ActivatedRouteSnapshot\r\n} from '@angular/router';\r\nimport { AuthenticationProvider } from '../../../global/contracts/services/authentication.provider';\r\n\r\n@Injectable()\r\nexport class RoleGuardService implements CanActivate {\r\n\r\n  constructor(public auth: AuthenticationProvider, public router: Router) {}\r\n\r\n  canActivate(route: ActivatedRouteSnapshot): boolean {\r\n    // this will be passed from the route config\r\n    // on the data property\r\n    // console.log(route);\r\n    if (this.auth.checkRoles(route.data.expectedRoles) && this.auth.isAuthenticated()) {\r\n      return true;\r\n    }\r\n    if ( 'pathFromRoot' in route ) {\r\n      this.router.navigate(['login'], { queryParams: { returnUrl: this.generatePath(route.pathFromRoot) } });\r\n    } else {\r\n      this.router.navigate(['login']);\r\n    }\r\n    return false;\r\n  }\r\n  // This may become a common problem\r\n  private generatePath(allPaths: ActivatedRouteSnapshot[] ): string {\r\n    if (allPaths.length === 0) {\r\n      return '';\r\n    }\r\n    if (allPaths[0]['_routerState'] !== undefined ) {\r\n      return allPaths[0]['_routerState'].url;\r\n    }\r\n    return '';\r\n  }\r\n\r\n}\r\n","// 3rd party decorator\r\nimport { JsonObject, JsonProperty } from 'json2typescript';\r\nimport { TypeContract } from '../../../global/contracts/modules/tag.contract';\r\nimport { RoleContract } from '../../../global/contracts/modules/user.contract';\r\n\r\n@JsonObject\r\nexport class Permissions {\r\n\r\n    @JsonProperty('model', String)\r\n    model: string;\r\n\r\n    @JsonProperty('permission', String)\r\n    permission: string;\r\n\r\n    /**\r\n     * Construct the model\r\n     */\r\n    constructor(model: string, permission: string) {\r\n        this.model      = model;\r\n        this.permission = permission;\r\n    }\r\n}\r\n\r\n@JsonObject\r\nexport class AuthRole implements RoleContract {\r\n    @JsonProperty('roleID')\r\n    roleID: number;\r\n\r\n    @JsonProperty('slug', String)\r\n    slug: string;\r\n\r\n    @JsonProperty('label', String)\r\n    label: string;\r\n\r\n    @JsonProperty('description', String)\r\n    description: string;\r\n\r\n    @JsonProperty('perms', [Permissions])\r\n    perms:  Permissions[];\r\n\r\n    /**\r\n     *\r\n     */\r\n    constructor(id: number, slug: string, label: string, description: string, perms: Permissions[]) {\r\n            this.roleID             = id;\r\n            this.slug           = slug;\r\n            this.label         = label;\r\n            this.description    = description;\r\n            this.perms          = perms;\r\n    }\r\n}\r\n\r\n@JsonObject\r\nexport class AuthRoleService {\r\n    @JsonProperty('data', [AuthRole])\r\n    data: AuthRole[];\r\n}\r\n\r\n","// 3rd party decorator\r\nimport { JsonObject, JsonProperty } from 'json2typescript';\r\n\r\n// Dependant models\r\nimport { AuthRole, AuthRoleService } from './auth-role.model';\r\nimport { UserInterface, UserWithProfile, UserProfileContract } from '../../../global/contracts/modules/user.contract';\r\nimport { UserProfile } from './user-profile.model';\r\n\r\n\r\nexport class Auth {\r\n    password: string;\r\n    userID?: number;\r\n    email: string;\r\n    token?: string;\r\n    /**\r\n     * optional auth token request\r\n     */\r\n    constructor(username: string, password: string,  id?: number, token?: string) {\r\n        this.password = password;\r\n        this.email = username;\r\n        if ( id ) {\r\n            this.userID = id;\r\n        }\r\n        if ( token ) {\r\n            this.token = token;\r\n        }\r\n    }\r\n}\r\n@JsonObject\r\nexport class AuthUser implements UserWithProfile {\r\n\r\n    @JsonProperty('userID')\r\n    public userID: number;\r\n\r\n    @JsonProperty('emailAddress', String)\r\n    public emailAddress: string;\r\n\r\n    @JsonProperty('firstName', String)\r\n    public firstName: string;\r\n\r\n    @JsonProperty('lastName', String)\r\n    public lastName: string;\r\n\r\n    @JsonProperty('isVerified')\r\n    public isVerified: boolean;\r\n\r\n    @JsonProperty('createdDate', String)\r\n    public createdDate: string;\r\n\r\n    @JsonProperty('roles', AuthRoleService)\r\n    public roles: AuthRoleService;\r\n\r\n    // @JsonProperty('userProfile', UserProfile)\r\n    public userProfile: UserProfile = new UserProfile(0);\r\n\r\n    constructor( id?: number, userFirstName?: string, userLastName?: string, emailAddress?: string,\r\n        creationDate?: string, isVerified?: boolean, roles?: AuthRoleService, userProfile?: UserProfile ) {\r\n        this.userID         = id;\r\n        this.firstName      = userFirstName;\r\n        this.lastName       = userLastName;\r\n        this.emailAddress   = emailAddress;\r\n        this.createdDate   = creationDate;\r\n        this.isVerified     = isVerified;\r\n        this.roles          = roles;\r\n        this.userProfile    = userProfile;\r\n    }\r\n    public copyTo(data: AuthUser): void {\r\n        if (data !== undefined) {\r\n            this.userID = data.userID;\r\n            this.emailAddress = data.emailAddress;\r\n            this.firstName = data.firstName;\r\n            this.lastName = data.lastName;\r\n            this.roles = data.roles;\r\n            this.isVerified = data.isVerified;\r\n            this.createdDate = data.createdDate;\r\n        }\r\n    }\r\n    public getId(): number {\r\n        return this.userID;\r\n    }\r\n    public getEmailAddress(): string {\r\n        return this.emailAddress;\r\n    }\r\n    public getRoles() {\r\n        return this.roles.data;\r\n    }\r\n    // public setRoles(data: any): void {\r\n    getUserProfile(): UserProfileContract {\r\n        return this.userProfile;\r\n    }\r\n    getName(): string {\r\n        return this.firstName + ' ' + this.lastName;\r\n    }\r\n    // }\r\n\r\n}\r\n\r\nexport class AuthUserService {\r\n    @JsonProperty('data', AuthUser)\r\n    data: AuthUser;\r\n}\r\n","export class Country {\r\n\r\n    public name: string;\r\n    public code: string;\r\n}\r\n","import { UserProfileContract } from '../../../global/contracts/modules/user.contract';\r\nimport { JsonObject, JsonProperty } from 'json2typescript';\r\nimport { Shop, ShopServiceModel } from '../../shop/models/shop.model';\r\n\r\n@JsonObject\r\nexport class UserProfile implements UserProfileContract {\r\n\r\n    userID: number;\r\n\r\n    shop: Shop;\r\n\r\n    emailAaddress: string;\r\n\r\n    constructor(id?: number) {\r\n        this.userID = id;\r\n    }\r\n    copyFrom(data: UserProfile) {\r\n        this.shop = data.shop;\r\n        this.userID = data.userID;\r\n        this.emailAaddress = data.emailAaddress;\r\n    }\r\n    getImageUrl(): string {\r\n        if (this.shop !== undefined ) {\r\n            return this.shop.shopImage;\r\n        }\r\n        return '';\r\n    }\r\n    getShopId(): number {\r\n        if (this.shop !== undefined) {\r\n            return this.shop.id;\r\n        }\r\n        return 0;\r\n    }\r\n    getShop(): Shop {\r\n        return this.shop;\r\n    }\r\n}\r\n\r\nexport class UserProfileServiceData {\r\n    @JsonProperty('userID')\r\n    userID: number;\r\n\r\n    @JsonProperty('shop', { data: ShopServiceModel })\r\n    shop: { data: ShopServiceModel };\r\n\r\n    @JsonProperty('emailAaddress')\r\n    emailAaddress: string;\r\n\r\n\r\n}\r\nexport class UserProfileService {\r\n    data: UserProfileServiceData;\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\n\r\n// 3rd Party\r\nimport { CookieService } from 'ngx-cookie-service';\r\nimport { JwtModule, JWT_OPTIONS, JwtInterceptor } from '@auth0/angular-jwt';\r\n\r\n// FK Modules\r\nimport { CoreInterfaceModule } from '../../core/core-interface/core-interface.module';\r\n\r\n// Components\r\nimport { LoginComponent } from './components/login/login.component';\r\nimport { LogoutComponent } from './components/logout/logout.component';\r\nimport { LoginMenuControlComponent } from './components/login-menu-control/login-menu-control.component';\r\nimport { ShopInfoComponent } from './components/shop-info/shop-info.component';\r\n// services\r\nimport { SecuredStorageProvider } from './services/secured-storage.provider';\r\nimport { secureStorageServiceFactory } from './services/secure-storage.factory';\r\nimport { ForgotPasswordComponent } from './components/forgot-password/forgot-password.component';\r\nimport { AccountFormComponent } from './components/account-form/account-form.component';\r\nimport { UserService } from './services/user.service';\r\nimport { UpdateEmailFormComponent } from './components/update-email-form/update-email-form.component';\r\nimport { ConfirmEmailComponent } from './components/confirm-email/confirm-email.component';\r\nimport { ResetPasswordComponent } from './components/reset-password/reset-password.component';\r\n// import { HTTP_INTERCEPTORS } from '@angular/core/'\r\n// import { JwtInterceptor } from @auth0/angular-jwt;\r\n// Font awesome\r\n// security\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    CoreInterfaceModule\r\n  ],\r\n  declarations: [\r\n    LoginComponent,\r\n    LogoutComponent,\r\n    LoginMenuControlComponent,\r\n    ShopInfoComponent,\r\n    ForgotPasswordComponent,\r\n    AccountFormComponent,\r\n    UpdateEmailFormComponent,\r\n    ConfirmEmailComponent,\r\n    ResetPasswordComponent\r\n    ],\r\n  providers: [UserService,\r\n    { provide: HTTP_INTERCEPTORS, useClass: JwtInterceptor, multi: true}\r\n  ],\r\n  exports: [\r\n    LoginComponent,\r\n    LogoutComponent,\r\n    LoginMenuControlComponent,\r\n    ShopInfoComponent,\r\n     AccountFormComponent\r\n  ]\r\n})\r\nexport class SecurityModule { }\r\n","/**\r\n * JWT AuthService\r\n * Copyritght: the Finders Keepers\r\n * Created: 20/3/2018\r\n */\r\n\r\nimport { Injectable, Inject } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\n\r\n// Rxjs\r\nimport { Observable, BehaviorSubject } from 'rxjs';\r\nimport { map, filter, catchError, mergeMap, switchMap } from 'rxjs/operators';\r\n// Central\r\nimport { AppConfig } from '../../../global/contracts/config/app-config';\r\nimport { APP_CONFIG } from '../../../app.config';\r\n\r\n// JWT\r\nimport { JwtHelperService } from '@auth0/angular-jwt';\r\n\r\n// Models\r\nimport { AuthUser, Auth, AuthUserService } from '../models/auth-user.model';\r\n\r\n// Storage\r\nimport { SecuredStorageProvider } from './secured-storage.provider';\r\n\r\n// Base Class\r\nimport { AuthenticationProvider  } from '../../../global/contracts/services/authentication.provider';\r\nimport { UserWithProfile, UserProfileContract } from '../../../global/contracts/modules/user.contract';\r\nimport { AuthRole } from '../models/auth-role.model';\r\nimport { ShopService } from '../../shop/services/shop.service';\r\nimport { UserProfile, UserProfileService } from '../models/user-profile.model';\r\nimport { Shop } from '../../shop/models/shop.model';\r\n\r\n/**\r\n * An Authentication service that relies on a JWT to\r\n * handle security\r\n * @export\r\n * @class JWTAuthService\r\n * @extends {AuthenticationProvider}\r\n */\r\n@Injectable()\r\nexport class JWTAuthService extends AuthenticationProvider {\r\n\r\n  /**\r\n   * restful URLS for authentication provides\r\n   * @private\r\n   * @type {string}\r\n   * @memberof JWTAuthService\r\n   */\r\n  private serviceUserUrl: string;\r\n\r\n  /**\r\n   * restful URLS for authentication provides\r\n   * @private\r\n   * @type {string}\r\n   * @memberof JWTAuthService\r\n   */\r\n  private serviceAuthUrl: string;\r\n\r\n  /**\r\n   * restful URLS for authentication provides\r\n   * @private\r\n   * @type {string}\r\n   * @memberof JWTAuthService\r\n   */\r\n  private _serviceProfileUrl: string;\r\n  /**\r\n   * Header settings. May not be needed.\r\n   * @private\r\n   * @type {{ headers: HttpHeaders }}\r\n   * @memberof JWTAuthService\r\n   */\r\n  private httpOptions: { headers: HttpHeaders } = { headers: new HttpHeaders({ 'Content-Type': 'application/json'}) };\r\n\r\n  private _userProfile: BehaviorSubject<UserProfileContract>;\r\n\r\n  private _tokenServiceUrl: string;\r\n  /**\r\n   * Creates an instance of JWTAuthService.\r\n   * @param {JwtHelperService} jwtHelper\r\n   * @param {HttpClient} http\r\n   * @param {AppConfig} config\r\n   * @param {SecuredStorageProvider} storageProvider\r\n   * @memberof JWTAuthService\r\n   */\r\n  constructor(private jwtHelper: JwtHelperService, private http: HttpClient, @Inject(APP_CONFIG) private config: AppConfig,\r\n    private storageProvider: SecuredStorageProvider) {\r\n    super();\r\n    this.setUrl( config );\r\n    this.storageProvider.setDomain(config.cookieUrl);\r\n    if ( this.getAuthProfile() !== undefined ) {\r\n      this._userProfile = new BehaviorSubject<UserProfile>(this.getAuthProfile() as UserProfile);\r\n    } else {\r\n      this._userProfile = new BehaviorSubject<UserProfile>(new UserProfile(0));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets up the URLS for getting data\r\n   * @private\r\n   * @param {AppConfig} config\r\n   * @memberof JWTAuthService\r\n   */\r\n  private setUrl(config: AppConfig) {\r\n    this.serviceUserUrl = config.baseUrl + config.httpServiceUrls.authUser + config.defaultDataSuffix;\r\n    this.serviceAuthUrl = config.baseUrl + config.httpServiceUrls.auth + config.defaultDataSuffix;\r\n    this._serviceProfileUrl = config.baseUrl + config.httpServiceUrls.shopForUser;\r\n    this._tokenServiceUrl = config.baseUrl + 'token';\r\n  }\r\n\r\n  /**\r\n   * Checks the existence and validity\r\n   * of a JWT\r\n   * @returns {boolean}\r\n   * @memberof JWTAuthService\r\n   */\r\n  public isAuthenticated(): boolean {\r\n    const token = this.storageProvider.getAuthToken();\r\n    // Check whether the token is expired and return\r\n    try {\r\n      const data = this.jwtHelper.decodeToken(token);\r\n      // Any other work on token\r\n      return !this.jwtHelper.isTokenExpired(token);\r\n    } catch (e) {\r\n      throw(e);\r\n    }\r\n  }\r\n  public refreshSession(): void {\r\n    //\r\n    this.http.get<{token: string}>(this._tokenServiceUrl).subscribe(\r\n      response => {\r\n        if (response.token !== undefined) {\r\n          this.storageProvider.setAuthToken(response.token);\r\n          // console.log('refreshed');\r\n          // console.log(response.token);\r\n        }\r\n      });\r\n  }\r\n  /**\r\n   * login function\r\n   *\r\n   * @param {string} userName\r\n   * @param {string} password\r\n   * @returns {Observable<AuthUser>}\r\n   * @memberof AuthService\r\n   */\r\n  public login(userName: string, password: string): Observable<AuthUser> {\r\n    this.logout();\r\n    const authRequest: Auth = new Auth(userName, password);\r\n    // return this.http.get<Auth>( this.serviceAuthUrl);\r\n\r\n    const authSub =  this.http.post<Auth>( this.serviceAuthUrl, authRequest, this.httpOptions  );\r\n    // switchMap to ensure subscriber is passed on but not yet modular\r\n    return authSub.pipe(switchMap( auth => {\r\n      const id = auth.userID;\r\n      const token = auth.token;\r\n      this.storageProvider.setAuthToken(token);\r\n      return this.http.get<UserProfileService>(this._serviceProfileUrl + '/' + id).pipe(switchMap(\r\n        result => {\r\n          const profile = result.data;\r\n          const userProfile = new  UserProfile(id);\r\n          userProfile.emailAaddress = profile.emailAaddress;\r\n          const shop = new Shop();\r\n          shop.bridgeFrom(id, profile.shop.data);\r\n          userProfile.shop = shop;\r\n          return this.http.get<AuthUserService>(this.serviceUserUrl + '/' + id ).pipe(map( user => {\r\n          const authUser: AuthUser = new AuthUser();\r\n          authUser.copyTo(user.data);\r\n          authUser.userProfile = userProfile;\r\n          if (authUser.userID) {\r\n            this.storageProvider.setUser(authUser);\r\n            if (userProfile !== undefined ) {\r\n              this.updateAuthProfile(userProfile);\r\n            }\r\n            // should check token\r\n          }\r\n          return authUser;\r\n      }));\r\n    }));\r\n    }));\r\n  }\r\n  authenticate(userName: string, password: string): Observable<Auth> {\r\n    const authRequest: Auth = new Auth(userName, password);\r\n    return this.http.post<Auth>(this.serviceAuthUrl, authRequest, this.httpOptions);\r\n  }\r\n  updateAuthProfile(profile: UserProfileContract) {\r\n    this.storageProvider.setUserProfile(profile as UserProfile);\r\n    if (this._userProfile !== undefined) {\r\n      this._userProfile.next(profile);\r\n    } else {\r\n      this._userProfile = new BehaviorSubject<UserProfile>(profile as UserProfile);\r\n    }\r\n  }\r\n  public logout(): boolean {\r\n    this.storageProvider.deleteStorage();\r\n    // Logout service needs to be called - but requires spec\r\n    return true;\r\n  }\r\n  // get User from session\r\n  public getAuthUser(): UserWithProfile {\r\n    if ( this.isAuthenticated() ) {\r\n      const copiedUser = new AuthUser();\r\n      copiedUser.copyTo(this.storageProvider.getUser());\r\n      return copiedUser;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // get the JWT token\r\n  public getAuthToken(): string {\r\n    return this.storageProvider.getAuthToken();\r\n  }\r\n\r\n  // Send an array of roles and check if user is in one of them\r\n  public checkRoles(expectedRoles: string[]): boolean {\r\n    let allowUser = false;\r\n    expectedRoles.forEach(role => {\r\n      // this.storageProvider.getRoles()\r\n      if ( this.hasRole(role) ) {\r\n        allowUser = true;\r\n      }\r\n    });\r\n    return allowUser;\r\n  }\r\n  public hasRole(role: string): boolean {\r\n    return this.storageProvider.getRoles().find(x => x.slug.toLowerCase() === role.toLowerCase()) !== undefined;\r\n  }\r\n\r\n  getAuthProfile(): UserProfileContract {\r\n    const profile = new UserProfile();\r\n    if (this.storageProvider.getUserProfile() !== null) {\r\n      profile.copyFrom(this.storageProvider.getUserProfile());\r\n    }\r\n    return profile;\r\n  }\r\n  public subscribeAuthProfile(): BehaviorSubject<UserProfileContract> {\r\n    return this._userProfile;\r\n  }\r\n}\r\n\r\n","\r\nimport { CookieService } from 'ngx-cookie-service';\r\nimport { SecureStorageService } from './secure-storage.service';\r\nimport { CookieStorageService } from '../../../core/storage/services/cookie-storage.service';\r\nimport { LocalStorageService } from '../../../core/storage/services/local-storage.service';\r\nimport { SecuredStorageProvider } from './secured-storage.provider';\r\nimport { AppConfig } from '../../../global/contracts/config/app-config';\r\n\r\n// A factory for choosing a storage provider at run time\r\nexport let secureStorageServiceFactory = (cookieService: CookieService, config: AppConfig ) => {\r\n    if ( navigator.cookieEnabled ) {\r\n        const service = new CookieStorageService(cookieService, config);\r\n        return new SecureStorageService(service);\r\n    }\r\n        return new SecureStorageService(new LocalStorageService());\r\n};\r\n","// Core\r\nimport { Injectable } from '@angular/core';\r\n\r\n// Third Party\r\nimport { CookieService } from 'ngx-cookie-service';\r\n\r\n// Models\r\nimport {Auth, AuthUser} from '../models/auth-user.model';\r\nimport { AuthRole } from '../models/auth-role.model';\r\nimport { UserProfile } from '../models/user-profile.model';\r\n\r\n// Local Imports\r\nimport { SecuredStorageProvider, storageKeys} from './secured-storage.provider';\r\nimport { StorageProvider } from '../../../global/contracts/services/storage.provider';\r\n/**\r\n * The secure storage provider has a storage provider\r\n * injected. Arguably the abstraction is not needed.\r\n * @export\r\n * @class SecureStorageService\r\n * @extends {SecuredStorageProvider}\r\n */\r\n@Injectable()\r\nexport class SecureStorageService extends SecuredStorageProvider {\r\n\r\n  /**\r\n   * Checks the build in navigato function for cookies.\r\n   * @private\r\n   * @memberof ClientStorageService\r\n   */\r\n  private useCookie = true;\r\n  constructor(private storage: StorageProvider) {\r\n    super();\r\n   }\r\n\r\n  /**\r\n   * Set the JWT in a secured cookie, default to local storage\r\n   * @param token a JWT\r\n   * @memberof ClientStorageService\r\n   */\r\n  setAuthToken(token: string) {\r\n    this.storage.deleteKey(storageKeys[storageKeys.authToken]);\r\n    this.storage.setKeyValue(storageKeys[storageKeys.authToken], token);\r\n  }\r\n\r\n  /**\r\n   * Get The Authentication token\r\n   * @returns {string}\r\n   * @memberof ClientStorageService\r\n   */\r\n  getAuthToken(): string {\r\n    return this.storage.getKeyValue(storageKeys[storageKeys.authToken]);\r\n  }\r\n\r\n  deleteStorage() {\r\n    this.storage.clearData();\r\n  }\r\n  /**\r\n   * Sets the AuthUser model into client storage\r\n   * @param {AuthUser} user\r\n   * @memberof ClientStorageService\r\n   */\r\n  setUser( user: AuthUser) {\r\n    this.storage.setObjectValue(storageKeys[storageKeys.authUser], user);\r\n  }\r\n\r\n  /**\r\n   * Gets The AuthUser Model from client storage\r\n   * TODO We need to better handle serialisation\r\n   * @returns {AuthUser}\r\n   * @memberof ClientStorageService\r\n   */\r\n  getUser(): AuthUser {\r\n    const result =  this.storage.getKeyObjectValue(storageKeys[storageKeys.authUser]);\r\n    if ( result ) {\r\n      return result;\r\n      // return this.storage.deserialiseJson(result, AuthUser);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  setRoles( roles: AuthRole[]) {\r\n    const user: AuthUser = this.getUser();\r\n    user.roles = {data: roles};\r\n    this.setUser(user);\r\n  }\r\n  /**\r\n   * Get all roles from secured storage if they exist\r\n   *\r\n   * @returns {AuthRole[]} or null\r\n   * @memberof SecureStorageService\r\n   */\r\n  getRoles(): AuthRole[]  {\r\n    if (this.getUser()) {\r\n      return this.getUser().roles.data;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * Get User profile data\r\n   *\r\n   * @returns {UserProfile}\r\n   * @memberof SecureStorageService\r\n   */\r\n  public getUserProfile(): UserProfile {\r\n    return this.storage.getKeyObjectValue(storageKeys[storageKeys.userProfile]);\r\n  }\r\n\r\n  /**\r\n   * Set User Profile data\r\n   *\r\n   * @param {UserProfile} profile\r\n   * @memberof SecureStorageService\r\n   */\r\n  public setUserProfile(profile: UserProfile) {\r\n    this.storage.setObjectValue(storageKeys[storageKeys.userProfile], profile);\r\n  }\r\n\r\n  public setDomain(domain: string) {\r\n    this.storage.setDomain(domain);\r\n  }\r\n}\r\n","// Models\r\nimport { Auth, AuthUser } from '../models/auth-user.model';\r\nimport { AuthRole } from '../models/auth-role.model';\r\nimport { UserProfile } from '../models/user-profile.model';\r\nimport { UserWithProfile } from '../../../global/contracts/modules/user.contract';\r\n\r\n// This needs to go into a contract\r\n/**\r\n *\r\n * Abstract class to allow the Dependency injection in angular\r\n * It serves little other purpose\r\n * @export\r\n * @abstract\r\n * @class SecuredStorageProvider\r\n */\r\nexport abstract class SecuredStorageProvider {\r\n    /**\r\n     * @method setAuth\r\n     * @memberof iStorageService\r\n     */\r\n    public abstract setAuthToken(token: string);\r\n    public abstract getAuthToken(): string;\r\n    public abstract setUser(auth: AuthUser);\r\n    public abstract getUser(): AuthUser;\r\n    public abstract setRoles( roles: AuthRole[] );\r\n    public abstract getRoles(): AuthRole[] ;\r\n    public abstract getUserProfile(): UserProfile;\r\n    public abstract setUserProfile(profile: UserProfile);\r\n    public abstract deleteStorage();\r\n    public abstract setDomain(domain: string);\r\n}\r\n/**\r\n * Keys for storage - this can be reused\r\n * with http as well\r\n *\r\n * @export\r\n * @enum {number}\r\n */\r\nexport enum storageKeys {\r\n    auth,\r\n    authUser,\r\n    userProfile,\r\n    authRoles,\r\n    authToken\r\n}\r\n","import { Injectable, Inject } from '@angular/core';\r\nimport { RestfulService, ConcreteRestfulService } from '../../../global/contracts/services/restful-service.abstract';\r\nimport { AuthUser, AuthUserService } from '../models/auth-user.model';\r\nimport { Observable } from 'rxjs';\r\nimport { AppConfig } from '../../../global/contracts/config/app-config';\r\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\r\nimport { APP_CONFIG } from '../../../app.config';\r\nimport { UserProfile, UserProfileService } from '../models/user-profile.model';\r\nimport { map, filter, catchError, mergeMap } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class UserService extends ConcreteRestfulService<AuthUser> {\r\n\r\n  private _restfulCountriesUrl = '/assets/data/countries.json';\r\n  private _userDetailsUrl = '';\r\n  private _passwordResetUrl = '';\r\n  private _passwordResetConfirmUrl = '';\r\n\r\n  constructor(http: HttpClient, @Inject(APP_CONFIG) private config: AppConfig) {\r\n    super(config, http);\r\n    this._restfulCountriesUrl = config.httpServiceUrls.countries;\r\n    this._userDetailsUrl = config.baseUrl + config.httpServiceUrls.userDetails;\r\n    this._passwordResetUrl = config.baseUrl + config.httpServiceUrls.passwordReset;\r\n    this._passwordResetConfirmUrl = config.baseUrl + config.httpServiceUrls.passwordResetConfirm;\r\n  }\r\n  public setServiceUrl(config: AppConfig): string {\r\n    return config.baseUrl + config.httpServiceUrls.authUser + config.defaultDataSuffix;\r\n  }\r\n  public getCountries(): Observable<any> {\r\n    // console.log('countries: ' + this._restfulCountriesUrl);\r\n    return this.http.get(this._restfulCountriesUrl);\r\n  }\r\n  public getUserDetails(userId: number): Observable<UserProfile> {\r\n    return this.http.get<{data: any}>(this._userDetailsUrl + '/' + userId + '/details').pipe(map(\r\n      response => {\r\n        // console.log(response.data);\r\n        return response.data;\r\n      }));\r\n  }\r\n  public saveUserDetails(profile: UserProfile, userId: number) {\r\n    let item = new HttpParams();\r\n    Object.keys(profile).forEach( key => {\r\n      if (profile[key] !== null) {\r\n        // console.log(profile[key]);\r\n        if (key === 'birthDate') {\r\n          const date = new Date(profile[key]);\r\n          const value = date.getDay() + '/' + date.getMonth() + '/' + date.getFullYear();\r\n          item = item.append(key, value);\r\n        } else {\r\n          item = item.append(key, profile[key]);\r\n        }\r\n      }\r\n    });\r\n    return this.http.put<UserProfileService>(this._userDetailsUrl + '/' + userId + '/details', item).pipe(map(\r\n      response => {\r\n        // console.log(response.data);\r\n        return response;\r\n      }));\r\n  }\r\n  // public updateEmailAddress(email: string) {\r\n\r\n  // }\r\n  public updatePassword(email: string, oldPassword: string, newPassword: string, passwordConfirm: string, userId: number):\r\n         Observable<AuthUser> {\r\n    let item = new HttpParams();\r\n    item = item.append('emailAddress', email);\r\n    item = item.append('oldPassword', oldPassword);\r\n    item = item.append('newPassword', newPassword);\r\n    item = item.append('newPassword_confirmation', passwordConfirm);\r\n    return this.http.post<AuthUserService>(this._userDetailsUrl + '/' + userId + '/password', item).pipe(map(\r\n      response => response.data\r\n    ));\r\n  }\r\n  public sendVerificationEmail(email: string): Observable<any> {\r\n    let item = new HttpParams();\r\n    item = item.append('email', email);\r\n    return this.http.post(this._passwordResetUrl, item);\r\n  }\r\n  public updateEmail(email: string, password: string, newEmail: string, newEmailConfirm: string, userId: number): Observable<any> {\r\n    let item = new HttpParams();\r\n    item = item.append('email', email);\r\n    item = item.append('password', password);\r\n    item = item.append('newEmailAddress', newEmail);\r\n    item = item.append('newEmailAddress_confirmation', newEmailConfirm);\r\n    return this.http.post<AuthUserService>(this._userDetailsUrl + '/' + userId + '/email', item).pipe(map(\r\n      response => response.data\r\n    ));\r\n  }\r\n  public confirmPasswordUpdate(email: string, newPassword: string, passwordConfirm: string, key: string): Observable<any> {\r\n    // this._passwordResetConfirmUrl\r\n    let item = new HttpParams();\r\n    item = item.append('email', email);\r\n    item = item.append('password', newPassword);\r\n    item = item.append('password_confirmation', passwordConfirm);\r\n    item = item.append('token', key);\r\n\r\n    return this.http.post(this._passwordResetConfirmUrl, item);\r\n  }\r\n  public sendVerificationNewEmail(email: string, token: string, id: number ): Observable<any> {\r\n    let item = new HttpParams();\r\n    item = item.append('newEmailAddress', email);\r\n    item = item.append('verificationToken', token);\r\n\r\n    return this.http.post<AuthUserService>(this._userDetailsUrl + '/' + id + '/email/verify', item).pipe(map(\r\n      response => response.data\r\n    ));\r\n  }\r\n}\r\n","<h2 class=\"page-heading\">Home</h2>\r\n<h4>Welcome to The Finders Keepers Online Market Place</h4>\r\n<div class=\"content\">\r\nAt the moment you are able to do the following:\r\n<ul>\r\n  <li>Add new products</li>\r\n  <li>Edit products</li>\r\n  <li>Preview products as they would appear on the Online store</li>\r\n  <li>Update your shop</li>\r\n  <li>Manage your account details</li>\r\n  <li>Manage your banking details</li>\r\n</ul>\r\n</div>\r\n<div class=\"content\">\r\nSeller instructions to go here\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-seller-dashboard',\r\n  templateUrl: './seller-dashboard.component.html',\r\n  styleUrls: ['./seller-dashboard.component.scss']\r\n})\r\nexport class SellerDashboardComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","// 3rd party decorator\r\nimport { JsonObject, JsonProperty } from 'json2typescript';\r\n\r\nexport class BankServiceModel {\r\n    @JsonProperty('bankID')\r\n    bankID: number;\r\n\r\n    @JsonProperty('name')\r\n    name: string;\r\n}\r\n\r\nexport class BanksData {\r\n    @JsonProperty('data', [BankServiceModel])\r\n    data: BankServiceModel[];\r\n}\r\n\r\nexport class BankingServiceModel {\r\n    @JsonProperty('bankAccountID')\r\n    id: number;\r\n\r\n    @JsonProperty('shopID')\r\n    shopID: number;\r\n\r\n    @JsonProperty('accountName')\r\n    accountName: string;\r\n\r\n    @JsonProperty('bsb')\r\n    bsb: number;\r\n\r\n    @JsonProperty('bank', {data: BankServiceModel} )\r\n    bank: {data: BankServiceModel} = { data: new BankServiceModel() };\r\n\r\n    @JsonProperty('accountNumber')\r\n    accountNumber: number;\r\n}\r\nexport class BankingServiceData {\r\n    @JsonProperty('data', BankingServiceModel)\r\n    data: BankingServiceModel;\r\n\r\n}\r\nexport class Banking {\r\n    @JsonProperty('id')\r\n    id: number;\r\n\r\n    @JsonProperty('shopId')\r\n    shopId: number;\r\n\r\n    @JsonProperty('accountName')\r\n    accountName: string;\r\n\r\n    @JsonProperty('bsb')\r\n    bsb: number;\r\n\r\n    // @JsonProperty('bankName')\r\n    // bankName: string;\r\n\r\n    @JsonProperty('bankID')\r\n    bankID = 0;\r\n\r\n    @JsonProperty('accountNumber')\r\n    accountNumber: number;\r\n\r\n    constructor() {}\r\n\r\n    bridgeFrom(model: BankingServiceModel) {\r\n        // console.log(model);\r\n        this.id = model.id;\r\n        this.shopId = model.shopID;\r\n        this.accountName = model.accountName;\r\n        this.accountNumber = model.accountNumber;\r\n        this.bsb = model.bsb;\r\n        // this.bankName = model.bank.data.name;\r\n        if (model.bank !== undefined) {\r\n            this.bankID = model.bank.data.bankID;\r\n        } else {\r\n            this.bankID = 0;\r\n        }\r\n    }\r\n}\r\n","// 3rd party decorator\r\nimport { JsonObject, JsonProperty } from 'json2typescript';\r\n\r\n// Dependant models\r\nimport { CategoryContract } from '../../../global/contracts/modules/category.contract';\r\nimport { ShopInterface } from '../../../global/contracts/modules/shop.contract';\r\nimport { ImageContract } from '../../../global/contracts/modules/image.contract';\r\nimport { Image } from '../../../core/file-handler/models/image.model';\r\nimport { CategoryService } from '../../../core/categories/services/category.service';\r\nimport { CategoryServiceData } from '../../../core/categories/models/categories.model';\r\nimport { Banking } from './banking-model.model';\r\n\r\n@JsonObject\r\nexport class ShopServiceModel {\r\n    @JsonProperty('shopID')\r\n    shopID: number;\r\n\r\n    @JsonProperty('name')\r\n    name: string;\r\n\r\n    @JsonProperty('mainImage')\r\n    mainImage: string;\r\n\r\n    @JsonProperty('bio')\r\n    bio: string;\r\n\r\n    @JsonProperty('creationDate')\r\n    addDate: number;\r\n\r\n    @JsonProperty('message')\r\n    message: string;\r\n\r\n    @JsonProperty('stallholderProfileID')\r\n    stallholderProfileID: number;\r\n\r\n    @JsonProperty('categories', CategoryServiceData)\r\n    categories?: CategoryServiceData;\r\n\r\n    @JsonProperty('status')\r\n    status: string;\r\n\r\n    categoryOut?: number[];\r\n}\r\n\r\n@JsonObject\r\nexport class ShopServiceData {\r\n    @JsonProperty('data', ShopServiceModel)\r\n    data: ShopServiceModel;\r\n}\r\n@JsonObject\r\nexport class UserShopServiceModel {\r\n    @JsonProperty('shop', ShopServiceData)\r\n    shop: ShopServiceData;\r\n\r\n    @JsonProperty('userID')\r\n    userID: number;\r\n}\r\nexport class UserShopServiceData {\r\n    @JsonProperty('data', UserShopServiceModel)\r\n    data: UserShopServiceModel;\r\n}\r\nexport class Shop implements ShopInterface {\r\n\r\n    id: number;\r\n\r\n    name: string;\r\n\r\n    shopImage: string;\r\n\r\n    shopDescription?: string;\r\n\r\n    shopOpen: boolean;\r\n\r\n    shopCategories: CategoryContract[] = [];\r\n\r\n    userId: number;\r\n\r\n    shopMessage?: string;\r\n\r\n    banking?: Banking;\r\n\r\n    stallHolderProfileID?: number;\r\n\r\n    constructor() {}\r\n\r\n    public bridgeFrom(userId: number, model: ShopServiceModel) {\r\n        this.id = model.shopID;\r\n        this.name = model.name;\r\n        this.shopOpen =  model.status === 'open';\r\n        this.userId = userId;\r\n        this.shopImage = model.mainImage;\r\n        this.shopDescription = model.bio;\r\n        // console.log(model);\r\n        if (model.categories !== undefined) {\r\n            model.categories.data.forEach(\r\n                item => {\r\n                    const tmpCat: CategoryContract = {\r\n                        parentCategoryId:  item.parentCat,\r\n                        id: item.categoryID,\r\n                        name: item.name,\r\n                        depth: item.level\r\n\r\n                    };\r\n                    this.shopCategories.push(tmpCat);\r\n                });\r\n        }\r\n        // console.log(this.shopCategories);\r\n        this.shopMessage = model.message;\r\n        this.stallHolderProfileID = model.stallholderProfileID;\r\n    }\r\n\r\n    public bridgeTo(): ShopServiceModel {\r\n        const model: ShopServiceModel = {\r\n         shopID: this.id,\r\n         name: this.name,\r\n         status: this.shopOpen ? 'open' : 'closed',\r\n         mainImage: this.shopImage,\r\n         bio: this.shopDescription,\r\n         stallholderProfileID: this.stallHolderProfileID,\r\n         message: this.shopMessage,\r\n         addDate: 0\r\n        };\r\n\r\n        const cats: number[] = [];\r\n        // console.log(this.shopCategories);\r\n        this.shopCategories.forEach( item => {\r\n            cats.push(item.id);\r\n            // console.log(item);\r\n        }\r\n        );\r\n        model.categoryOut = cats;\r\n        return model;\r\n    }\r\n}\r\n","import { Injectable, Inject } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\n\r\n// rxjs\r\nimport { Observable } from 'rxjs';\r\n\r\n// why is map so whacky?\r\nimport { map, catchError, switchMap} from 'rxjs/operators';\r\n\r\n// models\r\nimport { CategoryContract } from '../../../global/contracts/modules/category.contract';\r\nimport { Shop, ShopServiceModel, ShopServiceData, UserShopServiceData } from '../models/shop.model';\r\n\r\n// Central\r\nimport { AppConfig } from '../../../global/contracts/config/app-config';\r\nimport { APP_CONFIG } from '../../../app.config';\r\nimport { StorageProvider } from '../../../global/contracts/services/storage.provider';\r\nimport { BankingServiceData, Banking } from '../models/banking-model.model';\r\nimport { FormDataService } from '../../../core/fk-forms/services/form-data.service';\r\nimport { CategoryService } from '../../../core/categories/services/category.service';\r\nimport { ShopProvider } from '../../../global/contracts/modules/shop.contract';\r\n\r\n@Injectable()\r\nexport class ShopService implements ShopProvider {\r\n\r\n  private shopCategories: CategoryContract[];\r\n  private inSync: Boolean = false;\r\n  private serviceUrl: string;\r\n  private shopStorageKey = 'shop';\r\n  private _shopUserUrl = '';\r\n  constructor(private http: HttpClient, @Inject(APP_CONFIG) private config: AppConfig,\r\n              private storageProvider: StorageProvider, private dataService: FormDataService,\r\n              private categoryService: CategoryService) {\r\n    this.serviceUrl =  this.createServiceUrls(config);\r\n    this._shopUserUrl = config.baseUrl + config.httpServiceUrls.shopForUser + config.defaultDataSuffix;\r\n  }\r\n\r\n  private createServiceUrls(config: AppConfig): string {\r\n    return config.baseUrl + config.httpServiceUrls.shop + config.defaultDataSuffix;\r\n  }\r\n  // Observable!\r\n  public getUserShop(userId: number): Observable<Shop> {\r\n    // http\r\n    return this.http.get<UserShopServiceData>(this._shopUserUrl + '/' + userId).pipe(switchMap(\r\n      data => {\r\n        const shop = new Shop();\r\n        shop.bridgeFrom(userId, data.data.shop.data);\r\n        // shop.shopCategories = shop.shopCategories.map (cat =>  this.categoryService.mapServiceData(cat) );\r\n        return this.getBankingDetails(shop);\r\n      }));\r\n  }\r\n\r\n  public getBankingDetails(shop: Shop): Observable<Shop> {\r\n    // console.log(this.serviceUrl + '/' + shop.id + '/bank-account');\r\n    return this.http.get<BankingServiceData>(this.serviceUrl + '/' + shop.id + '/bank-account').pipe(map(\r\n      data => {\r\n        if (data === null) {\r\n          return shop;\r\n        } else {\r\n          const banking = new Banking();\r\n          banking.bridgeFrom(data.data);\r\n          shop.banking = banking;\r\n          return shop;\r\n        }\r\n      },\r\n      error => {\r\n        return shop;\r\n      }\r\n    ));\r\n  }\r\n  /**\r\n   * Get data from storage Provider\r\n   *\r\n   * @returns {Shop}\r\n   * @memberof ShopService\r\n   */\r\n  public getLocalShop(): Shop {\r\n    return this.storageProvider.getKeyObjectValue(this.shopStorageKey);\r\n  }\r\n\r\n  public hasLocalStorageShop(): boolean {\r\n    return this.storageProvider.hasKey(this.shopStorageKey);\r\n  }\r\n  public getImageHandlerEndPoint(id: number) {\r\n    return this.config.baseUrl + this.config.httpServiceUrls.shop + '/' + id + '/image';\r\n  }\r\n  /**\r\n   * Not sure when to call this method.\r\n   *\r\n   * @returns {Boolean}\r\n   * @memberof ShopService\r\n   */\r\n  public isInSync(): Boolean {\r\n    return this.inSync;\r\n  }\r\n  // To local storage\r\n  public updateShop(shop: Shop) {\r\n    this.storageProvider.setObjectValue(this.shopStorageKey, shop);\r\n  }\r\n\r\n  /**\r\n   * Fron local storage to remote\r\n   *\r\n   * @memberof ShopService\r\n   */\r\n  public synchroniseShop(shop: Shop): Observable<null | Shop> {\r\n    this.clearShop();\r\n    const shopServiceData = shop.bridgeTo();\r\n    shopServiceData['shopName'] = shop.name;\r\n    // console.log(shopServiceData);\r\n    let body = this.dataService.convertFields(shopServiceData);\r\n    let i = 0;\r\n    shopServiceData.categoryOut.forEach( item => {\r\n      body = body.append('categories[' + i + ']', item.toString());\r\n      i++;\r\n    });\r\n    if (shop.id === 0) {\r\n      return this.http.put<Shop>(this.serviceUrl, body);\r\n    } else {\r\n      // console.log('putting ' + JSON.stringify(shop));\r\n      return this.http.put<ShopServiceData>(this.serviceUrl + '/' + shop.id, body).pipe(map(\r\n        data => {\r\n          const tmpShop = new Shop();\r\n          tmpShop.bridgeFrom(shop.userId, data.data);\r\n          return tmpShop;\r\n        }\r\n      ));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Should remove from local storage\r\n   *\r\n   * @memberof ShopService\r\n   */\r\n  public clearShop() {\r\n    this.storageProvider.deleteKey(this.shopStorageKey);\r\n  }\r\n}\r\n","// Core\r\nimport { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\n// Pages\r\nimport { AuthGuardServiceService } from './modules/security/guards/auth-guard-service.service';\r\nimport { RoleGuardService } from './modules/security/guards/role-guard.service';\r\nimport { NestedRouteLoaderComponent } from './modules/navigation/components/nested-route-loader/nested-route-loader.component';\r\nimport { SellerDashboardComponent } from './modules/shop/components/seller-dashboard/seller-dashboard.component';\r\nimport { LoginComponent } from './modules/security/components/login/login.component';\r\nimport { AccountFormComponent } from './modules/security/components/account-form/account-form.component';\r\n\r\n\r\nimport { AdminDashboardComponent } from './modules/admin/pages/admin-dashboard/admin-dashboard.component';\r\nimport { HomepageBannerComponent } from './modules/admin/pages/homepage-banner/homepage-banner.component';\r\nimport { ApproveProductsComponent } from './modules/admin/pages/approve-products/approve-products.component';\r\nimport { FeaturedProductsComponent } from './modules/admin/pages/featured-products/featured-products.component';\r\nimport { NewArrivalsComponent } from './modules/admin/pages/new-arrivals/new-arrivals.component';\r\nimport { AllProductsComponent } from './modules/admin/pages/all-products/all-products.component';\r\nimport { CollectionsComponent } from './modules/admin/pages/collections/collections.component';\r\nimport { CategoriesComponent } from './modules/admin/pages/categories/categories.component';\r\nimport { UsersComponent } from './modules/admin/pages/users/users.component';\r\n\r\n\r\nconst publicRoutes: Routes = [\r\n  { path: '', redirectTo: '/login', pathMatch: 'full' },\r\n  { path: 'home', redirectTo: '/login' },\r\n  { path: 'login', component: LoginComponent },\r\n  { path: 'verify/password/:key', component: LoginComponent },\r\n  { path: 'verify/email/:email/token/:token', component: LoginComponent },\r\n  { path: 'sellers', component: NestedRouteLoaderComponent, children: [\r\n    {\r\n      path: 'home', canActivate: [RoleGuardService], component: SellerDashboardComponent,\r\n      data: { menuName: 'home', icon: 'fa-home', expectedRoles: ['seller'] }\r\n    },\r\n    {\r\n      path: 'shop', canActivate: [RoleGuardService], loadChildren: 'app/modules/shop/shop.module#ShopModule',\r\n      data: { menuName: 'my shop', icon: 'fa-user', expectedRoles: ['seller'] }\r\n    },\r\n    {\r\n      path: 'products', canActivate: [RoleGuardService], loadChildren: 'app/modules/products/products.module#ProductsModule',\r\n      data: { menuName: 'products', icon: 'fa-archive', expectedRoles: ['seller'] } },\r\n    { \r\n      path: 'account', canLoad: [RoleGuardService], canActivate: [RoleGuardService], component: AccountFormComponent,\r\n      data: { menuName: 'my account', icon: 'fa-cog', expectedRoles: ['seller'] }\r\n    }\r\n  ]},\r\n  { path: 'admin', component: NestedRouteLoaderComponent, children: [\r\n    {\r\n      path: 'home', canActivate: [RoleGuardService], component: AdminDashboardComponent,\r\n      data: { menuName: 'Home', icon: 'fa-home', expectedRoles: ['seller'] } \r\n    },\r\n    {\r\n      path: 'feature-slider', canActivate: [RoleGuardService], component: HomepageBannerComponent,\r\n      data: { menuName: 'Feature Slider', icon: 'fa-images', expectedRoles: ['seller'] } \r\n    },\r\n    {\r\n      path: 'featured-products', canActivate: [RoleGuardService], component: FeaturedProductsComponent,\r\n      data: { menuName: 'Featured Products', icon: 'fa-star', expectedRoles: ['seller'] } \r\n    },\r\n    {\r\n      path: 'new-arrivals', canActivate: [RoleGuardService], component: NewArrivalsComponent,\r\n      data: { menuName: 'New Arrivals', icon: 'fa-seedling', expectedRoles: ['seller'] } \r\n    },\r\n    {\r\n      path: 'all-products', canActivate: [RoleGuardService], component: AllProductsComponent,\r\n      data: { menuName: 'All Products', icon: 'fa-archive', expectedRoles: ['seller'] } \r\n    },\r\n    {\r\n      path: 'approve-products', canActivate: [RoleGuardService], component: ApproveProductsComponent,\r\n      data: { menuName: 'Approve Products', icon: 'fa-smile', expectedRoles: ['seller'] } \r\n    },\r\n    {\r\n      path: 'users', canActivate: [RoleGuardService], component: UsersComponent,\r\n      data: { menuName: 'Manage Users', icon: 'fa-user', expectedRoles: ['seller'] } \r\n    },\r\n    {\r\n      path: 'collections', canActivate: [RoleGuardService], component: CollectionsComponent,\r\n      data: { menuName: 'Collections', icon: 'fa-box-full', expectedRoles: ['seller'] } \r\n    },\r\n    {\r\n      path: 'categories', canActivate: [RoleGuardService], component: CategoriesComponent,\r\n      data: { menuName: 'Categories', icon: 'fa-book', expectedRoles: ['seller'] } \r\n    }\r\n  ]} \r\n];\r\n@NgModule({\r\n  imports: [\r\n  RouterModule.forRoot(publicRoutes)\r\n  ],\r\n  providers: [AuthGuardServiceService, RoleGuardService],\r\n  exports: [RouterModule]\r\n})\r\n\r\nexport class PublicRoutingModule { }\r\n","import { AppConfig } from '../app/global/contracts/config/app-config';\r\n\r\nexport const environment: AppConfig = {\r\n  production: false,\r\n  dataStore: 'inMemory',\r\n  baseUrl: 'http://dev-api.thefinderskeepersmarketplace.com/v1/',\r\n  httpServiceUrls: {\r\n    categories: 'public/categories',\r\n    products: 'public/products',\r\n    privateProducts: 'private/products',\r\n    wishlist: '',\r\n    featuredProducts: 'public/products',\r\n    auth: 'authenticate',\r\n    authUser: 'getUser',\r\n    shop: 'private/shops',\r\n    shopForUser: 'private/users',\r\n    images: 'image',\r\n    tags: 'public/tags',\r\n    attributes: 'public/attributes',\r\n    countries: '/assets/data/countries.json',\r\n    userDetails: 'private/users',\r\n    passwordReset: 'password-reset',\r\n    passwordResetConfirm: 'password-reset-confirm',\r\n    banks: 'private/banks',\r\n    shopProducts: 'private/shops',\r\n    specifications: 'public/specification-types'\r\n  },\r\n  defaultDataSuffix: '',\r\n  logoutUrl: '/home',\r\n  loginUrl: '/login',\r\n  cookieUrl: 'fk-om-frontend-dev.s3-website-ap-southeast-2.amazonaws.com',\r\n  cookiePath: '/',\r\n  cookieExpiryHours: 24\r\n};\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.warn(err));\r\n"],"sourceRoot":""}